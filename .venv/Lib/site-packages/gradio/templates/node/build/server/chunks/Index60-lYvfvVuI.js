import { c as create_ssr_component, v as validate_component, d as add_attribute, m as missing_component, b as createEventDispatcher } from './ssr-C3HYbsxA.js';
import { I as It, E as Et, Z as Ze, g as Et$1, w as te$1, _ as _t, au as Le, U as Ue, O, F as xe, $ as $t } from './2-CzxFoJuL.js';
import { v as ve, g as ge } from './ModifyUpload-LfFHbTC1.js';
export { default as BaseExample } from './Example22-7u--UOCG.js';
import './index-ClteBeTX.js';
import './Component-NmRBwSfF.js';
import 'path';
import 'url';
import 'fs';

const Z={code:".model3D.svelte-1mxwah3{display:flex;position:relative;width:var(--size-full);height:var(--size-full);border-radius:var(--block-radius);overflow:hidden}.model3D.svelte-1mxwah3 canvas{width:var(--size-full);height:var(--size-full);object-fit:contain;overflow:hidden}",map:`{"version":3,"file":"Model3D.svelte","sources":["Model3D.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { BlockLabel, IconButton, IconButtonWrapper } from \\"@gradio/atoms\\";\\nimport { File, Download, Undo } from \\"@gradio/icons\\";\\nimport { dequal } from \\"dequal\\";\\nexport let value;\\nexport let display_mode = \\"solid\\";\\nexport let clear_color = [0, 0, 0, 0];\\nexport let label = \\"\\";\\nexport let show_label;\\nexport let i18n;\\nexport let zoom_speed = 1;\\nexport let pan_speed = 1;\\nexport let camera_position = [\\n    null,\\n    null,\\n    null\\n];\\nexport let has_change_history = false;\\nlet current_settings = { camera_position, zoom_speed, pan_speed };\\nlet use_3dgs = false;\\nlet Canvas3DGSComponent;\\nlet Canvas3DComponent;\\nasync function loadCanvas3D() {\\n    const module = await import(\\"./Canvas3D.svelte\\");\\n    return module.default;\\n}\\nasync function loadCanvas3DGS() {\\n    const module = await import(\\"./Canvas3DGS.svelte\\");\\n    return module.default;\\n}\\n$: if (value) {\\n    use_3dgs = value.path.endsWith(\\".splat\\") || value.path.endsWith(\\".ply\\");\\n    if (use_3dgs) {\\n        loadCanvas3DGS().then((component) => {\\n            Canvas3DGSComponent = component;\\n        });\\n    }\\n    else {\\n        loadCanvas3D().then((component) => {\\n            Canvas3DComponent = component;\\n        });\\n    }\\n}\\nlet canvas3d;\\nfunction handle_undo() {\\n    canvas3d?.reset_camera_position();\\n}\\n$: {\\n    if (!dequal(current_settings.camera_position, camera_position) || current_settings.zoom_speed !== zoom_speed || current_settings.pan_speed !== pan_speed) {\\n        canvas3d?.update_camera(camera_position, zoom_speed, pan_speed);\\n        current_settings = { camera_position, zoom_speed, pan_speed };\\n    }\\n}\\n<\/script>\\n\\n<BlockLabel\\n\\t{show_label}\\n\\tIcon={File}\\n\\tlabel={label || i18n(\\"3D_model.3d_model\\")}\\n/>\\n{#if value}\\n\\t<div class=\\"model3D\\" data-testid=\\"model3d\\">\\n\\t\\t<IconButtonWrapper>\\n\\t\\t\\t{#if !use_3dgs}\\n\\t\\t\\t\\t<!-- Canvas3DGS doesn't implement the undo method (reset_camera_position) -->\\n\\t\\t\\t\\t<IconButton\\n\\t\\t\\t\\t\\tIcon={Undo}\\n\\t\\t\\t\\t\\tlabel=\\"Undo\\"\\n\\t\\t\\t\\t\\ton:click={() => handle_undo()}\\n\\t\\t\\t\\t\\tdisabled={!has_change_history}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t{/if}\\n\\t\\t\\t<a\\n\\t\\t\\t\\thref={value.url}\\n\\t\\t\\t\\ttarget={window.__is_colab__ ? \\"_blank\\" : null}\\n\\t\\t\\t\\tdownload={window.__is_colab__ ? null : value.orig_name || value.path}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<IconButton Icon={Download} label={i18n(\\"common.download\\")} />\\n\\t\\t\\t</a>\\n\\t\\t</IconButtonWrapper>\\n\\n\\t\\t{#if use_3dgs}\\n\\t\\t\\t<svelte:component\\n\\t\\t\\t\\tthis={Canvas3DGSComponent}\\n\\t\\t\\t\\t{value}\\n\\t\\t\\t\\t{zoom_speed}\\n\\t\\t\\t\\t{pan_speed}\\n\\t\\t\\t/>\\n\\t\\t{:else}\\n\\t\\t\\t<svelte:component\\n\\t\\t\\t\\tthis={Canvas3DComponent}\\n\\t\\t\\t\\tbind:this={canvas3d}\\n\\t\\t\\t\\t{value}\\n\\t\\t\\t\\t{display_mode}\\n\\t\\t\\t\\t{clear_color}\\n\\t\\t\\t\\t{camera_position}\\n\\t\\t\\t\\t{zoom_speed}\\n\\t\\t\\t\\t{pan_speed}\\n\\t\\t\\t/>\\n\\t\\t{/if}\\n\\t</div>\\n{/if}\\n\\n<style>\\n\\t.model3D {\\n\\t\\tdisplay: flex;\\n\\t\\tposition: relative;\\n\\t\\twidth: var(--size-full);\\n\\t\\theight: var(--size-full);\\n\\t\\tborder-radius: var(--block-radius);\\n\\t\\toverflow: hidden;\\n\\t}\\n\\t.model3D :global(canvas) {\\n\\t\\twidth: var(--size-full);\\n\\t\\theight: var(--size-full);\\n\\t\\tobject-fit: contain;\\n\\t\\toverflow: hidden;\\n\\t}</style>\\n"],"names":[],"mappings":"AAuGC,uBAAS,CACR,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,MAAM,CAAE,IAAI,WAAW,CAAC,CACxB,aAAa,CAAE,IAAI,cAAc,CAAC,CAClC,QAAQ,CAAE,MACX,CACA,uBAAQ,CAAS,MAAQ,CACxB,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,MAAM,CAAE,IAAI,WAAW,CAAC,CACxB,UAAU,CAAE,OAAO,CACnB,QAAQ,CAAE,MACX"}`};async function J(){return (await import('./Canvas3D-B_jcxqUB.js')).default}async function N(){return (await import('./Canvas3DGS-DveDxqQS.js')).default}const P=create_ssr_component((a,e,t,W)=>{let{value:l}=e,{display_mode:A="solid"}=e,{clear_color:f=[0,0,0,0]}=e,{label:r=""}=e,{show_label:C}=e,{i18n:_}=e,{zoom_speed:d=1}=e,{pan_speed:i=1}=e,{camera_position:s=[null,null,null]}=e,{has_change_history:v=!1}=e,c={camera_position:s,zoom_speed:d,pan_speed:i},u=!1,p,n,m;e.value===void 0&&t.value&&l!==void 0&&t.value(l),e.display_mode===void 0&&t.display_mode&&A!==void 0&&t.display_mode(A),e.clear_color===void 0&&t.clear_color&&f!==void 0&&t.clear_color(f),e.label===void 0&&t.label&&r!==void 0&&t.label(r),e.show_label===void 0&&t.show_label&&C!==void 0&&t.show_label(C),e.i18n===void 0&&t.i18n&&_!==void 0&&t.i18n(_),e.zoom_speed===void 0&&t.zoom_speed&&d!==void 0&&t.zoom_speed(d),e.pan_speed===void 0&&t.pan_speed&&i!==void 0&&t.pan_speed(i),e.camera_position===void 0&&t.camera_position&&s!==void 0&&t.camera_position(s),e.has_change_history===void 0&&t.has_change_history&&v!==void 0&&t.has_change_history(v),a.css.add(Z);let w,D,z=a.head;do w=!0,a.head=z,l&&(u=l.path.endsWith(".splat")||l.path.endsWith(".ply"),u?N().then(y=>{p=y;}):J().then(y=>{n=y;})),(!Le(c.camera_position,s)||c.zoom_speed!==d||c.pan_speed!==i)&&(m?.update_camera(s,d,i),c={camera_position:s,zoom_speed:d,pan_speed:i}),D=`${validate_component(Et$1,"BlockLabel").$$render(a,{show_label:C,Icon:te$1,label:r||_("3D_model.3d_model")},{},{})} ${l?`<div class="model3D svelte-1mxwah3" data-testid="model3d">${validate_component(Ue,"IconButtonWrapper").$$render(a,{},{},{default:()=>`${u?"":` ${validate_component(O,"IconButton").$$render(a,{Icon:xe,label:"Undo",disabled:!v},{},{})}`} <a${add_attribute("href",l.url,0)}${add_attribute("target",window.__is_colab__?"_blank":null,0)}${add_attribute("download",window.__is_colab__?null:l.orig_name||l.path,0)}>${validate_component(O,"IconButton").$$render(a,{Icon:$t,label:_("common.download")},{},{})}</a>`})} ${u?`${validate_component(p||missing_component,"svelte:component").$$render(a,{value:l,zoom_speed:d,pan_speed:i},{},{})}`:`${validate_component(n||missing_component,"svelte:component").$$render(a,{value:l,display_mode:A,clear_color:f,camera_position:s,zoom_speed:d,pan_speed:i,this:m},{this:y=>{m=y,w=!1;}},{})}`}</div>`:""}`;while(!w);return D}),V=P,$={code:".input-model.svelte-jub4pj{display:flex;position:relative;justify-content:center;align-items:center;width:var(--size-full);height:var(--size-full);border-radius:var(--block-radius);overflow:hidden}.input-model.svelte-jub4pj canvas{width:var(--size-full);height:var(--size-full);object-fit:contain;overflow:hidden}",map:'{"version":3,"file":"Model3DUpload.svelte","sources":["Model3DUpload.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { createEventDispatcher, tick } from \\"svelte\\";\\nimport { Upload, ModifyUpload } from \\"@gradio/upload\\";\\nimport { BlockLabel } from \\"@gradio/atoms\\";\\nimport { File } from \\"@gradio/icons\\";\\nexport let value;\\nexport let display_mode = \\"solid\\";\\nexport let clear_color = [0, 0, 0, 0];\\nexport let label = \\"\\";\\nexport let show_label;\\nexport let root;\\nexport let i18n;\\nexport let zoom_speed = 1;\\nexport let pan_speed = 1;\\nexport let max_file_size = null;\\nexport let uploading = false;\\nexport let camera_position = [\\n    null,\\n    null,\\n    null\\n];\\nexport let upload;\\nexport let stream_handler;\\nasync function handle_upload({ detail }) {\\n    value = detail;\\n    await tick();\\n    dispatch(\\"change\\", value);\\n    dispatch(\\"load\\", value);\\n}\\nasync function handle_clear() {\\n    value = null;\\n    await tick();\\n    dispatch(\\"clear\\");\\n    dispatch(\\"change\\");\\n}\\nlet use_3dgs = false;\\nlet Canvas3DGSComponent;\\nlet Canvas3DComponent;\\nasync function loadCanvas3D() {\\n    const module = await import(\\"./Canvas3D.svelte\\");\\n    return module.default;\\n}\\nasync function loadCanvas3DGS() {\\n    const module = await import(\\"./Canvas3DGS.svelte\\");\\n    return module.default;\\n}\\n$: if (value) {\\n    use_3dgs = value.path.endsWith(\\".splat\\") || value.path.endsWith(\\".ply\\");\\n    if (use_3dgs) {\\n        loadCanvas3DGS().then((component) => {\\n            Canvas3DGSComponent = component;\\n        });\\n    }\\n    else {\\n        loadCanvas3D().then((component) => {\\n            Canvas3DComponent = component;\\n        });\\n    }\\n}\\nlet canvas3d;\\nasync function handle_undo() {\\n    canvas3d?.reset_camera_position();\\n}\\nconst dispatch = createEventDispatcher();\\nlet dragging = false;\\n$: dispatch(\\"drag\\", dragging);\\n<\/script>\\n\\n<BlockLabel {show_label} Icon={File} label={label || \\"3D Model\\"} />\\n\\n{#if value === null}\\n\\t<Upload\\n\\t\\t{upload}\\n\\t\\t{stream_handler}\\n\\t\\ton:load={handle_upload}\\n\\t\\t{root}\\n\\t\\t{max_file_size}\\n\\t\\tfiletype={[\\".stl\\", \\".obj\\", \\".gltf\\", \\".glb\\", \\"model/obj\\", \\".splat\\", \\".ply\\"]}\\n\\t\\tbind:dragging\\n\\t\\tbind:uploading\\n\\t\\ton:error\\n\\t\\taria_label={i18n(\\"model3d.drop_to_upload\\")}\\n\\t>\\n\\t\\t<slot />\\n\\t</Upload>\\n{:else}\\n\\t<div class=\\"input-model\\">\\n\\t\\t<ModifyUpload\\n\\t\\t\\tundoable={!use_3dgs}\\n\\t\\t\\ton:clear={handle_clear}\\n\\t\\t\\t{i18n}\\n\\t\\t\\ton:undo={handle_undo}\\n\\t\\t/>\\n\\n\\t\\t{#if use_3dgs}\\n\\t\\t\\t<svelte:component\\n\\t\\t\\t\\tthis={Canvas3DGSComponent}\\n\\t\\t\\t\\t{value}\\n\\t\\t\\t\\t{zoom_speed}\\n\\t\\t\\t\\t{pan_speed}\\n\\t\\t\\t/>\\n\\t\\t{:else}\\n\\t\\t\\t<svelte:component\\n\\t\\t\\t\\tthis={Canvas3DComponent}\\n\\t\\t\\t\\tbind:this={canvas3d}\\n\\t\\t\\t\\t{value}\\n\\t\\t\\t\\t{display_mode}\\n\\t\\t\\t\\t{clear_color}\\n\\t\\t\\t\\t{camera_position}\\n\\t\\t\\t\\t{zoom_speed}\\n\\t\\t\\t\\t{pan_speed}\\n\\t\\t\\t/>\\n\\t\\t{/if}\\n\\t</div>\\n{/if}\\n\\n<style>\\n\\t.input-model {\\n\\t\\tdisplay: flex;\\n\\t\\tposition: relative;\\n\\t\\tjustify-content: center;\\n\\t\\talign-items: center;\\n\\t\\twidth: var(--size-full);\\n\\t\\theight: var(--size-full);\\n\\t\\tborder-radius: var(--block-radius);\\n\\t\\toverflow: hidden;\\n\\t}\\n\\n\\t.input-model :global(canvas) {\\n\\t\\twidth: var(--size-full);\\n\\t\\theight: var(--size-full);\\n\\t\\tobject-fit: contain;\\n\\t\\toverflow: hidden;\\n\\t}</style>\\n"],"names":[],"mappings":"AAoHC,0BAAa,CACZ,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,MAAM,CAAE,IAAI,WAAW,CAAC,CACxB,aAAa,CAAE,IAAI,cAAc,CAAC,CAClC,QAAQ,CAAE,MACX,CAEA,0BAAY,CAAS,MAAQ,CAC5B,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,MAAM,CAAE,IAAI,WAAW,CAAC,CACxB,UAAU,CAAE,OAAO,CACnB,QAAQ,CAAE,MACX"}'};async function ee(){return (await import('./Canvas3D-B_jcxqUB.js')).default}async function te(){return (await import('./Canvas3DGS-DveDxqQS.js')).default}const ae=create_ssr_component((a,e,t,W)=>{let{value:l}=e,{display_mode:A="solid"}=e,{clear_color:f=[0,0,0,0]}=e,{label:r=""}=e,{show_label:C}=e,{root:_}=e,{i18n:d}=e,{zoom_speed:i=1}=e,{pan_speed:s=1}=e,{max_file_size:v=null}=e,{uploading:c=!1}=e,{camera_position:u=[null,null,null]}=e,{upload:p}=e,{stream_handler:n}=e,m=!1,w,D,z;const y=createEventDispatcher();let B=!1;e.value===void 0&&t.value&&l!==void 0&&t.value(l),e.display_mode===void 0&&t.display_mode&&A!==void 0&&t.display_mode(A),e.clear_color===void 0&&t.clear_color&&f!==void 0&&t.clear_color(f),e.label===void 0&&t.label&&r!==void 0&&t.label(r),e.show_label===void 0&&t.show_label&&C!==void 0&&t.show_label(C),e.root===void 0&&t.root&&_!==void 0&&t.root(_),e.i18n===void 0&&t.i18n&&d!==void 0&&t.i18n(d),e.zoom_speed===void 0&&t.zoom_speed&&i!==void 0&&t.zoom_speed(i),e.pan_speed===void 0&&t.pan_speed&&s!==void 0&&t.pan_speed(s),e.max_file_size===void 0&&t.max_file_size&&v!==void 0&&t.max_file_size(v),e.uploading===void 0&&t.uploading&&c!==void 0&&t.uploading(c),e.camera_position===void 0&&t.camera_position&&u!==void 0&&t.camera_position(u),e.upload===void 0&&t.upload&&p!==void 0&&t.upload(p),e.stream_handler===void 0&&t.stream_handler&&n!==void 0&&t.stream_handler(n),a.css.add($);let x,E,I=a.head;do x=!0,a.head=I,l&&(m=l.path.endsWith(".splat")||l.path.endsWith(".ply"),m?te().then(h=>{w=h;}):ee().then(h=>{D=h;})),y("drag",B),E=`${validate_component(Et$1,"BlockLabel").$$render(a,{show_label:C,Icon:te$1,label:r||"3D Model"},{},{})} ${l===null?`${validate_component(ve,"Upload").$$render(a,{upload:p,stream_handler:n,root:_,max_file_size:v,filetype:[".stl",".obj",".gltf",".glb","model/obj",".splat",".ply"],aria_label:d("model3d.drop_to_upload"),dragging:B,uploading:c},{dragging:h=>{B=h,x=!1;},uploading:h=>{c=h,x=!1;}},{default:()=>`${W.default?W.default({}):""}`})}`:`<div class="input-model svelte-jub4pj">${validate_component(ge,"ModifyUpload").$$render(a,{undoable:!m,i18n:d},{},{})} ${m?`${validate_component(w||missing_component,"svelte:component").$$render(a,{value:l,zoom_speed:i,pan_speed:s},{},{})}`:`${validate_component(D||missing_component,"svelte:component").$$render(a,{value:l,display_mode:A,clear_color:f,camera_position:u,zoom_speed:i,pan_speed:s,this:z},{this:h=>{z=h,x=!1;}},{})}`}</div>`}`;while(!x);return E}),le=ae,ce=create_ssr_component((a,e,t,W)=>{let{elem_id:l=""}=e,{elem_classes:A=[]}=e,{visible:f=!0}=e,{value:r=null}=e,{root:C}=e,{display_mode:_="solid"}=e,{clear_color:d}=e,{loading_status:i}=e,{label:s}=e,{show_label:v}=e,{container:c=!0}=e,{scale:u=null}=e,{min_width:p=void 0}=e,{gradio:n}=e,{height:m=void 0}=e,{zoom_speed:w=1}=e,{input_ready:D}=e,z=!1,{has_change_history:y=!1}=e,{camera_position:B=[null,null,null]}=e,{interactive:x}=e;const E=typeof window<"u";e.elem_id===void 0&&t.elem_id&&l!==void 0&&t.elem_id(l),e.elem_classes===void 0&&t.elem_classes&&A!==void 0&&t.elem_classes(A),e.visible===void 0&&t.visible&&f!==void 0&&t.visible(f),e.value===void 0&&t.value&&r!==void 0&&t.value(r),e.root===void 0&&t.root&&C!==void 0&&t.root(C),e.display_mode===void 0&&t.display_mode&&_!==void 0&&t.display_mode(_),e.clear_color===void 0&&t.clear_color&&d!==void 0&&t.clear_color(d),e.loading_status===void 0&&t.loading_status&&i!==void 0&&t.loading_status(i),e.label===void 0&&t.label&&s!==void 0&&t.label(s),e.show_label===void 0&&t.show_label&&v!==void 0&&t.show_label(v),e.container===void 0&&t.container&&c!==void 0&&t.container(c),e.scale===void 0&&t.scale&&u!==void 0&&t.scale(u),e.min_width===void 0&&t.min_width&&p!==void 0&&t.min_width(p),e.gradio===void 0&&t.gradio&&n!==void 0&&t.gradio(n),e.height===void 0&&t.height&&m!==void 0&&t.height(m),e.zoom_speed===void 0&&t.zoom_speed&&w!==void 0&&t.zoom_speed(w),e.input_ready===void 0&&t.input_ready&&D!==void 0&&t.input_ready(D),e.has_change_history===void 0&&t.has_change_history&&y!==void 0&&t.has_change_history(y),e.camera_position===void 0&&t.camera_position&&B!==void 0&&t.camera_position(B),e.interactive===void 0&&t.interactive&&x!==void 0&&t.interactive(x);let I,h,O=a.head;do I=!0,a.head=O,D=!z,h=`${x?`${validate_component(It,"Block").$$render(a,{visible:f,variant:r===null?"dashed":"solid",border_mode:"base",padding:!1,elem_id:l,elem_classes:A,container:c,scale:u,min_width:p,height:m},{},{default:()=>`${validate_component(Et,"StatusTracker").$$render(a,Object.assign({},{autoscroll:n.autoscroll},{i18n:n.i18n},i),{},{})} ${validate_component(le,"Model3DUpload").$$render(a,{label:s,show_label:v,root:C,display_mode:_,clear_color:d,value:r,camera_position:B,zoom_speed:w,i18n:n.i18n,max_file_size:n.max_file_size,upload:(...M)=>n.client.upload(...M),stream_handler:(...M)=>n.client.stream(...M),uploading:z},{uploading:M=>{z=M,I=!1;}},{default:()=>`${validate_component(Ze,"UploadText").$$render(a,{i18n:n.i18n,type:"file"},{},{})}`})}`})}`:`${validate_component(It,"Block").$$render(a,{visible:f,variant:r===null?"dashed":"solid",border_mode:"base",padding:!1,elem_id:l,elem_classes:A,container:c,scale:u,min_width:p,height:m},{},{default:()=>`${validate_component(Et,"StatusTracker").$$render(a,Object.assign({},{autoscroll:n.autoscroll},{i18n:n.i18n},i),{},{})} ${r&&E?`${validate_component(V,"Model3D").$$render(a,{value:r,i18n:n.i18n,display_mode:_,clear_color:d,label:s,show_label:v,camera_position:B,zoom_speed:w,has_change_history:y},{},{})}`:` ${validate_component(Et$1,"BlockLabel").$$render(a,{show_label:v,Icon:te$1,label:s||"3D Model"},{},{})} ${validate_component(_t,"Empty").$$render(a,{unpadded_box:!0,size:"large"},{},{default:()=>`${validate_component(te$1,"File").$$render(a,{},{},{})}`})}`}`})}`}`;while(!I);return h});

export { V as BaseModel3D, le as BaseModel3DUpload, ce as default };
//# sourceMappingURL=Index60-lYvfvVuI.js.map
