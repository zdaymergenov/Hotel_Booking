import { c as create_ssr_component, b as createEventDispatcher, v as validate_component, d as add_attribute, e as escape, o as onDestroy, f as each } from './ssr-C3HYbsxA.js';
import { g as Et$1, av as be, _ as _t, U as Ue, M as Mt, O, $ as $t, G as Ge, m as _, F as xe, a1 as ce, a0 as de, S as w, aB as dt, a4 as me, aa as fa } from './2-CzxFoJuL.js';
import { O as O$1 } from './Video-BOxlhE7M.js';
import { g as ge } from './ModifyUpload-LfFHbTC1.js';
import './index-ClteBeTX.js';
import './Component-NmRBwSfF.js';
import 'path';
import 'url';
import 'fs';
import './hls-DpKhbIaL.js';

const Kt=A=>{let t=["B","KB","MB","GB","PB"],e=0;for(;A>1024;)A/=1024,e++;let y=t[e];return A.toFixed(1)+" "+y},zt=()=>!0;function Wt(A,{autoplay:t}){async function e(){t&&await A.play();}return A.addEventListener("loadeddata",e),{destroy(){A.removeEventListener("loadeddata",e);}}}const ft={code:`.load-wrap.svelte-10c4beq{display:flex;justify-content:center;align-items:center;height:100%}.loader.svelte-10c4beq{display:flex;position:relative;background-color:var(--border-color-accent-subdued);animation:svelte-10c4beq-shadowPulse 2s linear infinite;box-shadow:-24px 0 var(--border-color-accent-subdued),
			24px 0 var(--border-color-accent-subdued);margin:var(--spacing-md);border-radius:50%;width:10px;height:10px;scale:0.5}@keyframes svelte-10c4beq-shadowPulse{33%{box-shadow:-24px 0 var(--border-color-accent-subdued),
				24px 0 #fff;background:#fff}66%{box-shadow:-24px 0 #fff,
				24px 0 #fff;background:var(--border-color-accent-subdued)}100%{box-shadow:-24px 0 #fff,
				24px 0 var(--border-color-accent-subdued);background:#fff}}.container.svelte-10c4beq{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:var(--spacing-lg) var(--spacing-lg) 0 var(--spacing-lg)}#timeline.svelte-10c4beq{display:flex;height:var(--size-10);flex:1;position:relative}img.svelte-10c4beq{flex:1 1 auto;min-width:0;object-fit:cover;height:var(--size-12);border:1px solid var(--block-border-color);user-select:none;z-index:1}.handle.svelte-10c4beq{width:3px;background-color:var(--color-accent);cursor:ew-resize;height:var(--size-12);z-index:3;position:absolute}.opaque-layer.svelte-10c4beq{background-color:rgba(230, 103, 40, 0.25);border:1px solid var(--color-accent);height:var(--size-12);position:absolute;z-index:2}`,map:'{"version":3,"file":"VideoTimeline.svelte","sources":["VideoTimeline.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount, onDestroy } from \\"svelte\\";\\nexport let videoElement;\\nexport let trimmedDuration;\\nexport let dragStart;\\nexport let dragEnd;\\nexport let loadingTimeline;\\nlet thumbnails = [];\\nlet numberOfThumbnails = 10;\\nlet intervalId;\\nlet videoDuration;\\nlet leftHandlePosition = 0;\\nlet rightHandlePosition = 100;\\nlet dragging = null;\\nconst startDragging = (side) => {\\n    dragging = side;\\n};\\n$: loadingTimeline = thumbnails.length !== numberOfThumbnails;\\nconst stopDragging = () => {\\n    dragging = null;\\n};\\nconst drag = (event, distance) => {\\n    if (dragging) {\\n        const timeline = document.getElementById(\\"timeline\\");\\n        if (!timeline)\\n            return;\\n        const rect = timeline.getBoundingClientRect();\\n        let newPercentage = (event.clientX - rect.left) / rect.width * 100;\\n        if (distance) {\\n            newPercentage = dragging === \\"left\\" ? leftHandlePosition + distance : rightHandlePosition + distance;\\n        }\\n        else {\\n            newPercentage = (event.clientX - rect.left) / rect.width * 100;\\n        }\\n        newPercentage = Math.max(0, Math.min(newPercentage, 100));\\n        if (dragging === \\"left\\") {\\n            leftHandlePosition = Math.min(newPercentage, rightHandlePosition);\\n            const newTimeLeft = leftHandlePosition / 100 * videoDuration;\\n            videoElement.currentTime = newTimeLeft;\\n            dragStart = newTimeLeft;\\n        }\\n        else if (dragging === \\"right\\") {\\n            rightHandlePosition = Math.max(newPercentage, leftHandlePosition);\\n            const newTimeRight = rightHandlePosition / 100 * videoDuration;\\n            videoElement.currentTime = newTimeRight;\\n            dragEnd = newTimeRight;\\n        }\\n        const startTime = leftHandlePosition / 100 * videoDuration;\\n        const endTime = rightHandlePosition / 100 * videoDuration;\\n        trimmedDuration = endTime - startTime;\\n        leftHandlePosition = leftHandlePosition;\\n        rightHandlePosition = rightHandlePosition;\\n    }\\n};\\nconst moveHandle = (e) => {\\n    if (dragging) {\\n        const distance = 1 / videoDuration * 100;\\n        if (e.key === \\"ArrowLeft\\") {\\n            drag({ clientX: 0 }, -distance);\\n        }\\n        else if (e.key === \\"ArrowRight\\") {\\n            drag({ clientX: 0 }, distance);\\n        }\\n    }\\n};\\nconst generateThumbnail = () => {\\n    const canvas = document.createElement(\\"canvas\\");\\n    const ctx = canvas.getContext(\\"2d\\");\\n    if (!ctx)\\n        return;\\n    canvas.width = videoElement.videoWidth;\\n    canvas.height = videoElement.videoHeight;\\n    ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);\\n    const thumbnail = canvas.toDataURL(\\"image/jpeg\\", 0.7);\\n    thumbnails = [...thumbnails, thumbnail];\\n};\\nonMount(() => {\\n    const loadMetadata = () => {\\n        videoDuration = videoElement.duration;\\n        const interval = videoDuration / numberOfThumbnails;\\n        let captures = 0;\\n        const onSeeked = () => {\\n            generateThumbnail();\\n            captures++;\\n            if (captures < numberOfThumbnails) {\\n                videoElement.currentTime += interval;\\n            }\\n            else {\\n                videoElement.removeEventListener(\\"seeked\\", onSeeked);\\n            }\\n        };\\n        videoElement.addEventListener(\\"seeked\\", onSeeked);\\n        videoElement.currentTime = 0;\\n    };\\n    if (videoElement.readyState >= 1) {\\n        loadMetadata();\\n    }\\n    else {\\n        videoElement.addEventListener(\\"loadedmetadata\\", loadMetadata);\\n    }\\n});\\nonDestroy(() => {\\n    window.removeEventListener(\\"mousemove\\", drag);\\n    window.removeEventListener(\\"mouseup\\", stopDragging);\\n    window.removeEventListener(\\"keydown\\", moveHandle);\\n    if (intervalId !== void 0) {\\n        clearInterval(intervalId);\\n    }\\n});\\nonMount(() => {\\n    window.addEventListener(\\"mousemove\\", drag);\\n    window.addEventListener(\\"mouseup\\", stopDragging);\\n    window.addEventListener(\\"keydown\\", moveHandle);\\n});\\n<\/script>\\n\\n<div class=\\"container\\">\\n\\t{#if loadingTimeline}\\n\\t\\t<div class=\\"load-wrap\\">\\n\\t\\t\\t<span aria-label=\\"loading timeline\\" class=\\"loader\\" />\\n\\t\\t</div>\\n\\t{:else}\\n\\t\\t<div id=\\"timeline\\" class=\\"thumbnail-wrapper\\">\\n\\t\\t\\t<button\\n\\t\\t\\t\\taria-label=\\"start drag handle for trimming video\\"\\n\\t\\t\\t\\tclass=\\"handle left\\"\\n\\t\\t\\t\\ton:mousedown={() => startDragging(\\"left\\")}\\n\\t\\t\\t\\ton:blur={stopDragging}\\n\\t\\t\\t\\ton:keydown={(e) => {\\n\\t\\t\\t\\t\\tif (e.key === \\"ArrowLeft\\" || e.key == \\"ArrowRight\\") {\\n\\t\\t\\t\\t\\t\\tstartDragging(\\"left\\");\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}}\\n\\t\\t\\t\\tstyle=\\"left: {leftHandlePosition}%;\\"\\n\\t\\t\\t/>\\n\\n\\t\\t\\t<div\\n\\t\\t\\t\\tclass=\\"opaque-layer\\"\\n\\t\\t\\t\\tstyle=\\"left: {leftHandlePosition}%; right: {100 - rightHandlePosition}%\\"\\n\\t\\t\\t/>\\n\\n\\t\\t\\t{#each thumbnails as thumbnail, i (i)}\\n\\t\\t\\t\\t<img src={thumbnail} alt={`frame-${i}`} draggable=\\"false\\" />\\n\\t\\t\\t{/each}\\n\\t\\t\\t<button\\n\\t\\t\\t\\taria-label=\\"end drag handle for trimming video\\"\\n\\t\\t\\t\\tclass=\\"handle right\\"\\n\\t\\t\\t\\ton:mousedown={() => startDragging(\\"right\\")}\\n\\t\\t\\t\\ton:blur={stopDragging}\\n\\t\\t\\t\\ton:keydown={(e) => {\\n\\t\\t\\t\\t\\tif (e.key === \\"ArrowLeft\\" || e.key == \\"ArrowRight\\") {\\n\\t\\t\\t\\t\\t\\tstartDragging(\\"right\\");\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}}\\n\\t\\t\\t\\tstyle=\\"left: {rightHandlePosition}%;\\"\\n\\t\\t\\t/>\\n\\t\\t</div>\\n\\t{/if}\\n</div>\\n\\n<style>\\n\\t.load-wrap {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\talign-items: center;\\n\\t\\theight: 100%;\\n\\t}\\n\\t.loader {\\n\\t\\tdisplay: flex;\\n\\t\\tposition: relative;\\n\\t\\tbackground-color: var(--border-color-accent-subdued);\\n\\t\\tanimation: shadowPulse 2s linear infinite;\\n\\t\\tbox-shadow:\\n\\t\\t\\t-24px 0 var(--border-color-accent-subdued),\\n\\t\\t\\t24px 0 var(--border-color-accent-subdued);\\n\\t\\tmargin: var(--spacing-md);\\n\\t\\tborder-radius: 50%;\\n\\t\\twidth: 10px;\\n\\t\\theight: 10px;\\n\\t\\tscale: 0.5;\\n\\t}\\n\\n\\t@keyframes shadowPulse {\\n\\t\\t33% {\\n\\t\\t\\tbox-shadow:\\n\\t\\t\\t\\t-24px 0 var(--border-color-accent-subdued),\\n\\t\\t\\t\\t24px 0 #fff;\\n\\t\\t\\tbackground: #fff;\\n\\t\\t}\\n\\t\\t66% {\\n\\t\\t\\tbox-shadow:\\n\\t\\t\\t\\t-24px 0 #fff,\\n\\t\\t\\t\\t24px 0 #fff;\\n\\t\\t\\tbackground: var(--border-color-accent-subdued);\\n\\t\\t}\\n\\t\\t100% {\\n\\t\\t\\tbox-shadow:\\n\\t\\t\\t\\t-24px 0 #fff,\\n\\t\\t\\t\\t24px 0 var(--border-color-accent-subdued);\\n\\t\\t\\tbackground: #fff;\\n\\t\\t}\\n\\t}\\n\\n\\t.container {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: center;\\n\\t\\tmargin: var(--spacing-lg) var(--spacing-lg) 0 var(--spacing-lg);\\n\\t}\\n\\n\\t#timeline {\\n\\t\\tdisplay: flex;\\n\\t\\theight: var(--size-10);\\n\\t\\tflex: 1;\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\timg {\\n\\t\\tflex: 1 1 auto;\\n\\t\\tmin-width: 0;\\n\\t\\tobject-fit: cover;\\n\\t\\theight: var(--size-12);\\n\\t\\tborder: 1px solid var(--block-border-color);\\n\\t\\tuser-select: none;\\n\\t\\tz-index: 1;\\n\\t}\\n\\n\\t.handle {\\n\\t\\twidth: 3px;\\n\\t\\tbackground-color: var(--color-accent);\\n\\t\\tcursor: ew-resize;\\n\\t\\theight: var(--size-12);\\n\\t\\tz-index: 3;\\n\\t\\tposition: absolute;\\n\\t}\\n\\n\\t.opaque-layer {\\n\\t\\tbackground-color: rgba(230, 103, 40, 0.25);\\n\\t\\tborder: 1px solid var(--color-accent);\\n\\t\\theight: var(--size-12);\\n\\t\\tposition: absolute;\\n\\t\\tz-index: 2;\\n\\t}</style>\\n"],"names":[],"mappings":"AAgKC,yBAAW,CACV,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IACT,CACA,sBAAQ,CACP,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,gBAAgB,CAAE,IAAI,6BAA6B,CAAC,CACpD,SAAS,CAAE,0BAAW,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,CACzC,UAAU,CACT,KAAK,CAAC,CAAC,CAAC,IAAI,6BAA6B,CAAC;AAC7C,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,6BAA6B,CAAC,CAC1C,MAAM,CAAE,IAAI,YAAY,CAAC,CACzB,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,GACR,CAEA,WAAW,0BAAY,CACtB,GAAI,CACH,UAAU,CACT,KAAK,CAAC,CAAC,CAAC,IAAI,6BAA6B,CAAC;AAC9C,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CACZ,UAAU,CAAE,IACb,CACA,GAAI,CACH,UAAU,CACT,KAAK,CAAC,CAAC,CAAC,IAAI;AAChB,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CACZ,UAAU,CAAE,IAAI,6BAA6B,CAC9C,CACA,IAAK,CACJ,UAAU,CACT,KAAK,CAAC,CAAC,CAAC,IAAI;AAChB,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,6BAA6B,CAAC,CAC1C,UAAU,CAAE,IACb,CACD,CAEA,yBAAW,CACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,IAAI,YAAY,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,YAAY,CAC/D,CAEA,wBAAU,CACT,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,IAAI,SAAS,CAAC,CACtB,IAAI,CAAE,CAAC,CACP,QAAQ,CAAE,QACX,CAEA,kBAAI,CACH,IAAI,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CACd,SAAS,CAAE,CAAC,CACZ,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,IAAI,SAAS,CAAC,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,oBAAoB,CAAC,CAC3C,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,CACV,CAEA,sBAAQ,CACP,KAAK,CAAE,GAAG,CACV,gBAAgB,CAAE,IAAI,cAAc,CAAC,CACrC,MAAM,CAAE,SAAS,CACjB,MAAM,CAAE,IAAI,SAAS,CAAC,CACtB,OAAO,CAAE,CAAC,CACV,QAAQ,CAAE,QACX,CAEA,4BAAc,CACb,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAC1C,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,cAAc,CAAC,CACrC,MAAM,CAAE,IAAI,SAAS,CAAC,CACtB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,CACV"}'};let z=10;const ht=create_ssr_component((A,t,e,y)=>{let{videoElement:n}=t,{trimmedDuration:s}=t,{dragStart:C}=t,{dragEnd:i}=t,{loadingTimeline:c}=t,v=[],o,l=0,r=100,u=null;const E=()=>{u=null;},g=(a,d)=>{if(u){const m=document.getElementById("timeline");if(!m)return;const f=m.getBoundingClientRect();let p=(a.clientX-f.left)/f.width*100;if(d?p=u==="left"?l+d:r+d:p=(a.clientX-f.left)/f.width*100,p=Math.max(0,Math.min(p,100)),u==="left"){l=Math.min(p,r);const x=l/100*o;n.currentTime=x,C=x;}else if(u==="right"){r=Math.max(p,l);const x=r/100*o;n.currentTime=x,i=x;}const b=l/100*o;s=r/100*o-b,l=l,r=r;}},w=a=>{if(u){const d=1/o*100;a.key==="ArrowLeft"?g({clientX:0},-d):a.key==="ArrowRight"&&g({clientX:0},d);}};return onDestroy(()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",E),window.removeEventListener("keydown",w);}),t.videoElement===void 0&&e.videoElement&&n!==void 0&&e.videoElement(n),t.trimmedDuration===void 0&&e.trimmedDuration&&s!==void 0&&e.trimmedDuration(s),t.dragStart===void 0&&e.dragStart&&C!==void 0&&e.dragStart(C),t.dragEnd===void 0&&e.dragEnd&&i!==void 0&&e.dragEnd(i),t.loadingTimeline===void 0&&e.loadingTimeline&&c!==void 0&&e.loadingTimeline(c),A.css.add(ft),c=v.length!==z,`<div class="container svelte-10c4beq">${c?'<div class="load-wrap svelte-10c4beq" data-svelte-h="svelte-13yzice"><span aria-label="loading timeline" class="loader svelte-10c4beq"></span></div>':`<div id="timeline" class="thumbnail-wrapper svelte-10c4beq"><button aria-label="start drag handle for trimming video" class="handle left svelte-10c4beq" style="${"left: "+escape(l,!0)+"%;"}"></button> <div class="opaque-layer svelte-10c4beq" style="${"left: "+escape(l,!0)+"%; right: "+escape(100-r,!0)+"%"}"></div> ${each(v,(a,d)=>`<img${add_attribute("src",a,0)}${add_attribute("alt",`frame-${d}`,0)} draggable="false" class="svelte-10c4beq">`)} <button aria-label="end drag handle for trimming video" class="handle right svelte-10c4beq" style="${"left: "+escape(r,!0)+"%;"}"></button></div>`} </div>`}),gt={code:".container.svelte-7yrr5f.svelte-7yrr5f{width:100%}time.svelte-7yrr5f.svelte-7yrr5f{color:var(--color-accent);font-weight:bold;padding-left:var(--spacing-xs)}.timeline-wrapper.svelte-7yrr5f.svelte-7yrr5f{display:flex;align-items:center;justify-content:center;width:100%}.text-button.svelte-7yrr5f.svelte-7yrr5f{border:1px solid var(--neutral-400);border-radius:var(--radius-sm);font-weight:300;font-size:var(--size-3);text-align:center;color:var(--neutral-400);height:var(--size-5);font-weight:bold;padding:0 5px;margin-left:5px}.text-button.svelte-7yrr5f.svelte-7yrr5f:hover,.text-button.svelte-7yrr5f.svelte-7yrr5f:focus{color:var(--color-accent);border-color:var(--color-accent)}.controls.svelte-7yrr5f.svelte-7yrr5f{display:flex;justify-content:space-between;align-items:center;margin:var(--spacing-lg);overflow:hidden}.edit-buttons.svelte-7yrr5f.svelte-7yrr5f{display:flex;gap:var(--spacing-sm)}@media(max-width: 320px){.controls.svelte-7yrr5f.svelte-7yrr5f{flex-direction:column;align-items:flex-start}.edit-buttons.svelte-7yrr5f.svelte-7yrr5f{margin-top:var(--spacing-sm)}.controls.svelte-7yrr5f .svelte-7yrr5f{margin:var(--spacing-sm)}.controls.svelte-7yrr5f .text-button.svelte-7yrr5f{margin-left:0}}.container.svelte-7yrr5f.svelte-7yrr5f{display:flex;flex-direction:column}.hidden.svelte-7yrr5f.svelte-7yrr5f{display:none}",map:'{"version":3,"file":"VideoControls.svelte","sources":["VideoControls.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { Undo, Trim, Clear } from \\"@gradio/icons\\";\\nimport VideoTimeline from \\"./VideoTimeline.svelte\\";\\nimport { trimVideo } from \\"./utils\\";\\nimport { FFmpeg } from \\"@ffmpeg/ffmpeg\\";\\nimport loadFfmpeg from \\"./utils\\";\\nimport { onMount } from \\"svelte\\";\\nimport { format_time } from \\"@gradio/utils\\";\\nimport { IconButton } from \\"@gradio/atoms\\";\\nimport { ModifyUpload } from \\"@gradio/upload\\";\\nexport let videoElement;\\nexport let showRedo = false;\\nexport let interactive = true;\\nexport let mode = \\"\\";\\nexport let handle_reset_value;\\nexport let handle_trim_video;\\nexport let processingVideo = false;\\nexport let i18n;\\nexport let value = null;\\nexport let show_download_button = false;\\nexport let handle_clear = () => {\\n};\\nexport let has_change_history = false;\\nlet ffmpeg;\\nonMount(async () => {\\n    ffmpeg = await loadFfmpeg();\\n});\\n$: if (mode === \\"edit\\" && trimmedDuration === null && videoElement)\\n    trimmedDuration = videoElement.duration;\\nlet trimmedDuration = null;\\nlet dragStart = 0;\\nlet dragEnd = 0;\\nlet loadingTimeline = false;\\nconst toggleTrimmingMode = () => {\\n    if (mode === \\"edit\\") {\\n        mode = \\"\\";\\n        trimmedDuration = videoElement.duration;\\n    }\\n    else {\\n        mode = \\"edit\\";\\n    }\\n};\\n<\/script>\\n\\n<div class=\\"container\\" class:hidden={mode !== \\"edit\\"}>\\n\\t{#if mode === \\"edit\\"}\\n\\t\\t<div class=\\"timeline-wrapper\\">\\n\\t\\t\\t<VideoTimeline\\n\\t\\t\\t\\t{videoElement}\\n\\t\\t\\t\\tbind:dragStart\\n\\t\\t\\t\\tbind:dragEnd\\n\\t\\t\\t\\tbind:trimmedDuration\\n\\t\\t\\t\\tbind:loadingTimeline\\n\\t\\t\\t/>\\n\\t\\t</div>\\n\\t{/if}\\n\\n\\t<div class=\\"controls\\" data-testid=\\"waveform-controls\\">\\n\\t\\t{#if mode === \\"edit\\" && trimmedDuration !== null}\\n\\t\\t\\t<time\\n\\t\\t\\t\\taria-label=\\"duration of selected region in seconds\\"\\n\\t\\t\\t\\tclass:hidden={loadingTimeline}>{format_time(trimmedDuration)}</time\\n\\t\\t\\t>\\n\\t\\t\\t<div class=\\"edit-buttons\\">\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tclass:hidden={loadingTimeline}\\n\\t\\t\\t\\t\\tclass=\\"text-button\\"\\n\\t\\t\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\t\\t\\tmode = \\"\\";\\n\\t\\t\\t\\t\\t\\tprocessingVideo = true;\\n\\t\\t\\t\\t\\t\\ttrimVideo(ffmpeg, dragStart, dragEnd, videoElement)\\n\\t\\t\\t\\t\\t\\t\\t.then((videoBlob) => {\\n\\t\\t\\t\\t\\t\\t\\t\\thandle_trim_video(videoBlob);\\n\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\t\\t\\t\\tprocessingVideo = false;\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}}>Trim</button\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tclass=\\"text-button\\"\\n\\t\\t\\t\\t\\tclass:hidden={loadingTimeline}\\n\\t\\t\\t\\t\\ton:click={toggleTrimmingMode}>Cancel</button\\n\\t\\t\\t\\t>\\n\\t\\t\\t</div>\\n\\t\\t{:else}\\n\\t\\t\\t<div />\\n\\t\\t{/if}\\n\\t</div>\\n</div>\\n\\n<ModifyUpload\\n\\t{i18n}\\n\\ton:clear={() => handle_clear()}\\n\\tdownload={show_download_button ? value?.url : null}\\n>\\n\\t{#if showRedo && mode === \\"\\"}\\n\\t\\t<IconButton\\n\\t\\t\\tIcon={Undo}\\n\\t\\t\\tlabel=\\"Reset video to initial value\\"\\n\\t\\t\\tdisabled={processingVideo || !has_change_history}\\n\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\thandle_reset_value();\\n\\t\\t\\t\\tmode = \\"\\";\\n\\t\\t\\t}}\\n\\t\\t/>\\n\\t{/if}\\n\\n\\t{#if interactive && mode === \\"\\"}\\n\\t\\t<IconButton\\n\\t\\t\\tIcon={Trim}\\n\\t\\t\\tlabel=\\"Trim video to selection\\"\\n\\t\\t\\tdisabled={processingVideo}\\n\\t\\t\\ton:click={toggleTrimmingMode}\\n\\t\\t/>\\n\\t{/if}\\n</ModifyUpload>\\n\\n<style>\\n\\t.container {\\n\\t\\twidth: 100%;\\n\\t}\\n\\ttime {\\n\\t\\tcolor: var(--color-accent);\\n\\t\\tfont-weight: bold;\\n\\t\\tpadding-left: var(--spacing-xs);\\n\\t}\\n\\n\\t.timeline-wrapper {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: center;\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t.text-button {\\n\\t\\tborder: 1px solid var(--neutral-400);\\n\\t\\tborder-radius: var(--radius-sm);\\n\\t\\tfont-weight: 300;\\n\\t\\tfont-size: var(--size-3);\\n\\t\\ttext-align: center;\\n\\t\\tcolor: var(--neutral-400);\\n\\t\\theight: var(--size-5);\\n\\t\\tfont-weight: bold;\\n\\t\\tpadding: 0 5px;\\n\\t\\tmargin-left: 5px;\\n\\t}\\n\\n\\t.text-button:hover,\\n\\t.text-button:focus {\\n\\t\\tcolor: var(--color-accent);\\n\\t\\tborder-color: var(--color-accent);\\n\\t}\\n\\n\\t.controls {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n\\t\\talign-items: center;\\n\\t\\tmargin: var(--spacing-lg);\\n\\t\\toverflow: hidden;\\n\\t}\\n\\n\\t.edit-buttons {\\n\\t\\tdisplay: flex;\\n\\t\\tgap: var(--spacing-sm);\\n\\t}\\n\\n\\t@media (max-width: 320px) {\\n\\t\\t.controls {\\n\\t\\t\\tflex-direction: column;\\n\\t\\t\\talign-items: flex-start;\\n\\t\\t}\\n\\n\\t\\t.edit-buttons {\\n\\t\\t\\tmargin-top: var(--spacing-sm);\\n\\t\\t}\\n\\n\\t\\t.controls * {\\n\\t\\t\\tmargin: var(--spacing-sm);\\n\\t\\t}\\n\\n\\t\\t.controls .text-button {\\n\\t\\t\\tmargin-left: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.container {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t}\\n\\n\\t.hidden {\\n\\t\\tdisplay: none;\\n\\t}</style>\\n"],"names":[],"mappings":"AAsHC,sCAAW,CACV,KAAK,CAAE,IACR,CACA,gCAAK,CACJ,KAAK,CAAE,IAAI,cAAc,CAAC,CAC1B,WAAW,CAAE,IAAI,CACjB,YAAY,CAAE,IAAI,YAAY,CAC/B,CAEA,6CAAkB,CACjB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,KAAK,CAAE,IACR,CAEA,wCAAa,CACZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,IAAI,WAAW,CAAC,CAC/B,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,QAAQ,CAAC,CACxB,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,MAAM,CAAE,IAAI,QAAQ,CAAC,CACrB,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,WAAW,CAAE,GACd,CAEA,wCAAY,MAAM,CAClB,wCAAY,MAAO,CAClB,KAAK,CAAE,IAAI,cAAc,CAAC,CAC1B,YAAY,CAAE,IAAI,cAAc,CACjC,CAEA,qCAAU,CACT,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,YAAY,CAAC,CACzB,QAAQ,CAAE,MACX,CAEA,yCAAc,CACb,OAAO,CAAE,IAAI,CACb,GAAG,CAAE,IAAI,YAAY,CACtB,CAEA,MAAO,YAAY,KAAK,CAAE,CACzB,qCAAU,CACT,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,UACd,CAEA,yCAAc,CACb,UAAU,CAAE,IAAI,YAAY,CAC7B,CAEA,uBAAS,CAAC,cAAE,CACX,MAAM,CAAE,IAAI,YAAY,CACzB,CAEA,uBAAS,CAAC,0BAAa,CACtB,WAAW,CAAE,CACd,CACD,CAEA,sCAAW,CACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MACjB,CAEA,mCAAQ,CACP,OAAO,CAAE,IACV"}'},wt=create_ssr_component((A,t,e,y)=>{let{videoElement:n}=t,{showRedo:s=!1}=t,{interactive:C=!0}=t,{mode:i=""}=t,{handle_reset_value:c}=t,{handle_trim_video:v}=t,{processingVideo:o=!1}=t,{i18n:l}=t,{value:r=null}=t,{show_download_button:u=!1}=t,{handle_clear:E=()=>{}}=t,{has_change_history:g=!1}=t;let w$1=null,_=0,a=0,d=!1;t.videoElement===void 0&&e.videoElement&&n!==void 0&&e.videoElement(n),t.showRedo===void 0&&e.showRedo&&s!==void 0&&e.showRedo(s),t.interactive===void 0&&e.interactive&&C!==void 0&&e.interactive(C),t.mode===void 0&&e.mode&&i!==void 0&&e.mode(i),t.handle_reset_value===void 0&&e.handle_reset_value&&c!==void 0&&e.handle_reset_value(c),t.handle_trim_video===void 0&&e.handle_trim_video&&v!==void 0&&e.handle_trim_video(v),t.processingVideo===void 0&&e.processingVideo&&o!==void 0&&e.processingVideo(o),t.i18n===void 0&&e.i18n&&l!==void 0&&e.i18n(l),t.value===void 0&&e.value&&r!==void 0&&e.value(r),t.show_download_button===void 0&&e.show_download_button&&u!==void 0&&e.show_download_button(u),t.handle_clear===void 0&&e.handle_clear&&E!==void 0&&e.handle_clear(E),t.has_change_history===void 0&&e.has_change_history&&g!==void 0&&e.has_change_history(g),A.css.add(gt);let m,f,p=A.head;do m=!0,A.head=p,i==="edit"&&w$1===null&&n&&(w$1=n.duration),f=`<div class="${["container svelte-7yrr5f",i!=="edit"?"hidden":""].join(" ").trim()}">${i==="edit"?`<div class="timeline-wrapper svelte-7yrr5f">${validate_component(ht,"VideoTimeline").$$render(A,{videoElement:n,dragStart:_,dragEnd:a,trimmedDuration:w$1,loadingTimeline:d},{dragStart:b=>{_=b,m=!1;},dragEnd:b=>{a=b,m=!1;},trimmedDuration:b=>{w$1=b,m=!1;},loadingTimeline:b=>{d=b,m=!1;}},{})}</div>`:""} <div class="controls svelte-7yrr5f" data-testid="waveform-controls">${i==="edit"&&w$1!==null?`<time aria-label="duration of selected region in seconds" class="${["svelte-7yrr5f",d?"hidden":""].join(" ").trim()}">${escape(w(w$1))}</time> <div class="edit-buttons svelte-7yrr5f"><button class="${["text-button svelte-7yrr5f",d?"hidden":""].join(" ").trim()}" data-svelte-h="svelte-18nzick">Trim</button> <button class="${["text-button svelte-7yrr5f",d?"hidden":""].join(" ").trim()}" data-svelte-h="svelte-1mj98i4">Cancel</button></div>`:'<div class="svelte-7yrr5f"></div>'}</div></div> ${validate_component(ge,"ModifyUpload").$$render(A,{i18n:l,download:u?r?.url:null},{},{default:()=>`${s&&i===""?`${validate_component(O,"IconButton").$$render(A,{Icon:xe,label:"Reset video to initial value",disabled:o||!g},{},{})}`:""} ${C&&i===""?`${validate_component(O,"IconButton").$$render(A,{Icon:me,label:"Trim video to selection",disabled:o},{},{})}`:""}`})}`;while(!m);return f}),pt={code:"span.svelte-euo1cw.svelte-euo1cw{text-shadow:0 0 8px rgba(0, 0, 0, 0.5)}progress.svelte-euo1cw.svelte-euo1cw{margin-right:var(--size-3);border-radius:var(--radius-sm);width:var(--size-full);height:var(--size-2)}progress.svelte-euo1cw.svelte-euo1cw::-webkit-progress-bar{border-radius:2px;background-color:rgba(255, 255, 255, 0.2);overflow:hidden}progress.svelte-euo1cw.svelte-euo1cw::-webkit-progress-value{background-color:rgba(255, 255, 255, 0.9)}.mirror.svelte-euo1cw.svelte-euo1cw{transform:scaleX(-1)}.mirror-wrap.svelte-euo1cw.svelte-euo1cw{position:relative;height:100%;width:100%}.controls.svelte-euo1cw.svelte-euo1cw{position:absolute;bottom:0;opacity:0;transition:500ms;margin:var(--size-2);border-radius:var(--radius-md);background:var(--color-grey-800);padding:var(--size-2) var(--size-1);width:calc(100% - 0.375rem * 2);width:calc(100% - var(--size-2) * 2)}.wrap.svelte-euo1cw:hover .controls.svelte-euo1cw{opacity:1}.inner.svelte-euo1cw.svelte-euo1cw{display:flex;justify-content:space-between;align-items:center;padding-right:var(--size-2);padding-left:var(--size-2);width:var(--size-full);height:var(--size-full)}.icon.svelte-euo1cw.svelte-euo1cw{display:flex;justify-content:center;cursor:pointer;width:var(--size-6);color:white}.time.svelte-euo1cw.svelte-euo1cw{flex-shrink:0;margin-right:var(--size-3);margin-left:var(--size-3);color:white;font-size:var(--text-sm);font-family:var(--font-mono)}.wrap.svelte-euo1cw.svelte-euo1cw{position:relative;background-color:var(--background-fill-secondary);height:var(--size-full);width:var(--size-full);border-radius:var(--radius-xl)}.wrap.svelte-euo1cw video{height:var(--size-full);width:var(--size-full)}",map:'{"version":3,"file":"Player.svelte","sources":["Player.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { createEventDispatcher } from \\"svelte\\";\\nimport { Play, Pause, Maximize, Undo } from \\"@gradio/icons\\";\\nimport Video from \\"./Video.svelte\\";\\nimport VideoControls from \\"./VideoControls.svelte\\";\\nimport { prepare_files } from \\"@gradio/client\\";\\nimport { format_time } from \\"@gradio/utils\\";\\nexport let root = \\"\\";\\nexport let src;\\nexport let subtitle = null;\\nexport let mirror;\\nexport let autoplay;\\nexport let loop;\\nexport let label = \\"test\\";\\nexport let interactive = false;\\nexport let handle_change = () => {\\n};\\nexport let handle_reset_value = () => {\\n};\\nexport let upload;\\nexport let is_stream;\\nexport let i18n;\\nexport let show_download_button = false;\\nexport let value = null;\\nexport let handle_clear = () => {\\n};\\nexport let has_change_history = false;\\nconst dispatch = createEventDispatcher();\\nlet time = 0;\\nlet duration;\\nlet paused = true;\\nlet video;\\nlet processingVideo = false;\\nfunction handleMove(e) {\\n    if (!duration)\\n        return;\\n    if (e.type === \\"click\\") {\\n        handle_click(e);\\n        return;\\n    }\\n    if (e.type !== \\"touchmove\\" && !(e.buttons & 1))\\n        return;\\n    const clientX = e.type === \\"touchmove\\" ? e.touches[0].clientX : e.clientX;\\n    const { left, right } = e.currentTarget.getBoundingClientRect();\\n    time = duration * (clientX - left) / (right - left);\\n}\\nasync function play_pause() {\\n    if (document.fullscreenElement != video) {\\n        const isPlaying = video.currentTime > 0 && !video.paused && !video.ended && video.readyState > video.HAVE_CURRENT_DATA;\\n        if (!isPlaying) {\\n            await video.play();\\n        }\\n        else\\n            video.pause();\\n    }\\n}\\nfunction handle_click(e) {\\n    const { left, right } = e.currentTarget.getBoundingClientRect();\\n    time = duration * (e.clientX - left) / (right - left);\\n}\\nfunction handle_end() {\\n    dispatch(\\"stop\\");\\n    dispatch(\\"end\\");\\n}\\nconst handle_trim_video = async (videoBlob) => {\\n    let _video_blob = new File([videoBlob], \\"video.mp4\\");\\n    const val = await prepare_files([_video_blob]);\\n    let value2 = ((await upload(val, root))?.filter(Boolean))[0];\\n    handle_change(value2);\\n};\\nfunction open_full_screen() {\\n    video.requestFullscreen();\\n}\\n$: time = time || 0;\\n$: duration = duration || 0;\\n<\/script>\\n\\n<div class=\\"wrap\\">\\n\\t<div class=\\"mirror-wrap\\" class:mirror>\\n\\t\\t<Video\\n\\t\\t\\t{src}\\n\\t\\t\\tpreload=\\"auto\\"\\n\\t\\t\\t{autoplay}\\n\\t\\t\\t{loop}\\n\\t\\t\\t{is_stream}\\n\\t\\t\\ton:click={play_pause}\\n\\t\\t\\ton:play\\n\\t\\t\\ton:pause\\n\\t\\t\\ton:error\\n\\t\\t\\ton:ended={handle_end}\\n\\t\\t\\tbind:currentTime={time}\\n\\t\\t\\tbind:duration\\n\\t\\t\\tbind:paused\\n\\t\\t\\tbind:node={video}\\n\\t\\t\\tdata-testid={`${label}-player`}\\n\\t\\t\\t{processingVideo}\\n\\t\\t\\ton:loadstart\\n\\t\\t\\ton:loadeddata\\n\\t\\t\\ton:loadedmetadata\\n\\t\\t>\\n\\t\\t\\t<track kind=\\"captions\\" src={subtitle} default />\\n\\t\\t</Video>\\n\\t</div>\\n\\n\\t<div class=\\"controls\\">\\n\\t\\t<div class=\\"inner\\">\\n\\t\\t\\t<span\\n\\t\\t\\t\\trole=\\"button\\"\\n\\t\\t\\t\\ttabindex=\\"0\\"\\n\\t\\t\\t\\tclass=\\"icon\\"\\n\\t\\t\\t\\taria-label=\\"play-pause-replay-button\\"\\n\\t\\t\\t\\ton:click={play_pause}\\n\\t\\t\\t\\ton:keydown={play_pause}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{#if time === duration}\\n\\t\\t\\t\\t\\t<Undo />\\n\\t\\t\\t\\t{:else if paused}\\n\\t\\t\\t\\t\\t<Play />\\n\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t<Pause />\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t</span>\\n\\n\\t\\t\\t<span class=\\"time\\">{format_time(time)} / {format_time(duration)}</span>\\n\\n\\t\\t\\t<!-- TODO: implement accessible video timeline for 4.0 -->\\n\\t\\t\\t<!-- svelte-ignore a11y-click-events-have-key-events -->\\n\\t\\t\\t<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\\n\\t\\t\\t<progress\\n\\t\\t\\t\\tvalue={time / duration || 0}\\n\\t\\t\\t\\ton:mousemove={handleMove}\\n\\t\\t\\t\\ton:touchmove|preventDefault={handleMove}\\n\\t\\t\\t\\ton:click|stopPropagation|preventDefault={handle_click}\\n\\t\\t\\t/>\\n\\n\\t\\t\\t<div\\n\\t\\t\\t\\trole=\\"button\\"\\n\\t\\t\\t\\ttabindex=\\"0\\"\\n\\t\\t\\t\\tclass=\\"icon\\"\\n\\t\\t\\t\\taria-label=\\"full-screen\\"\\n\\t\\t\\t\\ton:click={open_full_screen}\\n\\t\\t\\t\\ton:keypress={open_full_screen}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<Maximize />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n{#if interactive}\\n\\t<VideoControls\\n\\t\\tvideoElement={video}\\n\\t\\tshowRedo\\n\\t\\t{handle_trim_video}\\n\\t\\t{handle_reset_value}\\n\\t\\tbind:processingVideo\\n\\t\\t{value}\\n\\t\\t{i18n}\\n\\t\\t{show_download_button}\\n\\t\\t{handle_clear}\\n\\t\\t{has_change_history}\\n\\t/>\\n{/if}\\n\\n<style lang=\\"postcss\\">\\n\\tspan {\\n\\t\\ttext-shadow: 0 0 8px rgba(0, 0, 0, 0.5);\\n\\t}\\n\\n\\tprogress {\\n\\t\\tmargin-right: var(--size-3);\\n\\t\\tborder-radius: var(--radius-sm);\\n\\t\\twidth: var(--size-full);\\n\\t\\theight: var(--size-2);\\n\\t}\\n\\n\\tprogress::-webkit-progress-bar {\\n\\t\\tborder-radius: 2px;\\n\\t\\tbackground-color: rgba(255, 255, 255, 0.2);\\n\\t\\toverflow: hidden;\\n\\t}\\n\\n\\tprogress::-webkit-progress-value {\\n\\t\\tbackground-color: rgba(255, 255, 255, 0.9);\\n\\t}\\n\\n\\t.mirror {\\n\\t\\ttransform: scaleX(-1);\\n\\t}\\n\\n\\t.mirror-wrap {\\n\\t\\tposition: relative;\\n\\t\\theight: 100%;\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t.controls {\\n\\t\\tposition: absolute;\\n\\t\\tbottom: 0;\\n\\t\\topacity: 0;\\n\\t\\ttransition: 500ms;\\n\\t\\tmargin: var(--size-2);\\n\\t\\tborder-radius: var(--radius-md);\\n\\t\\tbackground: var(--color-grey-800);\\n\\t\\tpadding: var(--size-2) var(--size-1);\\n\\t\\twidth: calc(100% - 0.375rem * 2);\\n\\t\\twidth: calc(100% - var(--size-2) * 2);\\n\\t}\\n\\t.wrap:hover .controls {\\n\\t\\topacity: 1;\\n\\t}\\n\\n\\t.inner {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n\\t\\talign-items: center;\\n\\t\\tpadding-right: var(--size-2);\\n\\t\\tpadding-left: var(--size-2);\\n\\t\\twidth: var(--size-full);\\n\\t\\theight: var(--size-full);\\n\\t}\\n\\n\\t.icon {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\tcursor: pointer;\\n\\t\\twidth: var(--size-6);\\n\\t\\tcolor: white;\\n\\t}\\n\\n\\t.time {\\n\\t\\tflex-shrink: 0;\\n\\t\\tmargin-right: var(--size-3);\\n\\t\\tmargin-left: var(--size-3);\\n\\t\\tcolor: white;\\n\\t\\tfont-size: var(--text-sm);\\n\\t\\tfont-family: var(--font-mono);\\n\\t}\\n\\t.wrap {\\n\\t\\tposition: relative;\\n\\t\\tbackground-color: var(--background-fill-secondary);\\n\\t\\theight: var(--size-full);\\n\\t\\twidth: var(--size-full);\\n\\t\\tborder-radius: var(--radius-xl);\\n\\t}\\n\\t.wrap :global(video) {\\n\\t\\theight: var(--size-full);\\n\\t\\twidth: var(--size-full);\\n\\t}</style>\\n"],"names":[],"mappings":"AAmKC,gCAAK,CACJ,WAAW,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACvC,CAEA,oCAAS,CACR,YAAY,CAAE,IAAI,QAAQ,CAAC,CAC3B,aAAa,CAAE,IAAI,WAAW,CAAC,CAC/B,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,MAAM,CAAE,IAAI,QAAQ,CACrB,CAEA,oCAAQ,sBAAuB,CAC9B,aAAa,CAAE,GAAG,CAClB,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,QAAQ,CAAE,MACX,CAEA,oCAAQ,wBAAyB,CAChC,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAC1C,CAEA,mCAAQ,CACP,SAAS,CAAE,OAAO,EAAE,CACrB,CAEA,wCAAa,CACZ,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IACR,CAEA,qCAAU,CACT,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,IAAI,QAAQ,CAAC,CACrB,aAAa,CAAE,IAAI,WAAW,CAAC,CAC/B,UAAU,CAAE,IAAI,gBAAgB,CAAC,CACjC,OAAO,CAAE,IAAI,QAAQ,CAAC,CAAC,IAAI,QAAQ,CAAC,CACpC,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAChC,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CACrC,CACA,mBAAK,MAAM,CAAC,uBAAU,CACrB,OAAO,CAAE,CACV,CAEA,kCAAO,CACN,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,IAAI,QAAQ,CAAC,CAC5B,YAAY,CAAE,IAAI,QAAQ,CAAC,CAC3B,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,MAAM,CAAE,IAAI,WAAW,CACxB,CAEA,iCAAM,CACL,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,OAAO,CACf,KAAK,CAAE,IAAI,QAAQ,CAAC,CACpB,KAAK,CAAE,KACR,CAEA,iCAAM,CACL,WAAW,CAAE,CAAC,CACd,YAAY,CAAE,IAAI,QAAQ,CAAC,CAC3B,WAAW,CAAE,IAAI,QAAQ,CAAC,CAC1B,KAAK,CAAE,KAAK,CACZ,SAAS,CAAE,IAAI,SAAS,CAAC,CACzB,WAAW,CAAE,IAAI,WAAW,CAC7B,CACA,iCAAM,CACL,QAAQ,CAAE,QAAQ,CAClB,gBAAgB,CAAE,IAAI,2BAA2B,CAAC,CAClD,MAAM,CAAE,IAAI,WAAW,CAAC,CACxB,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,aAAa,CAAE,IAAI,WAAW,CAC/B,CACA,mBAAK,CAAS,KAAO,CACpB,MAAM,CAAE,IAAI,WAAW,CAAC,CACxB,KAAK,CAAE,IAAI,WAAW,CACvB"}'},Et=create_ssr_component((A,t,e,y)=>{let{root:n=""}=t,{src:s}=t,{subtitle:C=null}=t,{mirror:i}=t,{autoplay:c}=t,{loop:v}=t,{label:o="test"}=t,{interactive:l=!1}=t,{handle_change:r=()=>{}}=t,{handle_reset_value:u=()=>{}}=t,{upload:E}=t,{is_stream:g}=t,{i18n:w$1}=t,{show_download_button:_=!1}=t,{value:a=null}=t,{handle_clear:d=()=>{}}=t,{has_change_history:m=!1}=t;createEventDispatcher();let f=0,p,b=!0,k,x=!1;const G=async I=>{let L=new File([I],"video.mp4");const j=await fa([L]);let H=(await E(j,n))?.filter(Boolean)[0];r(H);};t.root===void 0&&e.root&&n!==void 0&&e.root(n),t.src===void 0&&e.src&&s!==void 0&&e.src(s),t.subtitle===void 0&&e.subtitle&&C!==void 0&&e.subtitle(C),t.mirror===void 0&&e.mirror&&i!==void 0&&e.mirror(i),t.autoplay===void 0&&e.autoplay&&c!==void 0&&e.autoplay(c),t.loop===void 0&&e.loop&&v!==void 0&&e.loop(v),t.label===void 0&&e.label&&o!==void 0&&e.label(o),t.interactive===void 0&&e.interactive&&l!==void 0&&e.interactive(l),t.handle_change===void 0&&e.handle_change&&r!==void 0&&e.handle_change(r),t.handle_reset_value===void 0&&e.handle_reset_value&&u!==void 0&&e.handle_reset_value(u),t.upload===void 0&&e.upload&&E!==void 0&&e.upload(E),t.is_stream===void 0&&e.is_stream&&g!==void 0&&e.is_stream(g),t.i18n===void 0&&e.i18n&&w$1!==void 0&&e.i18n(w$1),t.show_download_button===void 0&&e.show_download_button&&_!==void 0&&e.show_download_button(_),t.value===void 0&&e.value&&a!==void 0&&e.value(a),t.handle_clear===void 0&&e.handle_clear&&d!==void 0&&e.handle_clear(d),t.has_change_history===void 0&&e.has_change_history&&m!==void 0&&e.has_change_history(m),A.css.add(pt);let B,D,R=A.head;do B=!0,A.head=R,f=f||0,p=p||0,D=`<div class="wrap svelte-euo1cw"><div class="${["mirror-wrap svelte-euo1cw",i?"mirror":""].join(" ").trim()}">${validate_component(O$1,"Video").$$render(A,{src:s,preload:"auto",autoplay:c,loop:v,is_stream:g,"data-testid":`${o}-player`,processingVideo:x,currentTime:f,duration:p,paused:b,node:k},{currentTime:I=>{f=I,B=!1;},duration:I=>{p=I,B=!1;},paused:I=>{b=I,B=!1;},node:I=>{k=I,B=!1;}},{default:()=>`<track kind="captions"${add_attribute("src",C,0)} default>`})}</div> <div class="controls svelte-euo1cw"><div class="inner svelte-euo1cw"><span role="button" tabindex="0" class="icon svelte-euo1cw" aria-label="play-pause-replay-button">${f===p?`${validate_component(xe,"Undo").$$render(A,{},{},{})}`:`${b?`${validate_component(ce,"Play").$$render(A,{},{},{})}`:`${validate_component(de,"Pause").$$render(A,{},{},{})}`}`}</span> <span class="time svelte-euo1cw">${escape(w(f))} / ${escape(w(p))}</span>    <progress${add_attribute("value",f/p||0,0)} class="svelte-euo1cw"></progress> <div role="button" tabindex="0" class="icon svelte-euo1cw" aria-label="full-screen">${validate_component(dt,"Maximize").$$render(A,{},{},{})}</div></div></div></div> ${l?`${validate_component(wt,"VideoControls").$$render(A,{videoElement:k,showRedo:!0,handle_trim_video:G,handle_reset_value:u,value:a,i18n:w$1,show_download_button:_,handle_clear:d,has_change_history:m,processingVideo:x},{processingVideo:I=>{x=I,B=!1;}},{})}`:""}`;while(!B);return D}),bt=Et,yt=create_ssr_component((A,t,e,y)=>{let {value:n=null}=t,{subtitle:s=null}=t,{label:C=void 0}=t,{show_label:i=!0}=t,{autoplay:c}=t,{show_share_button:v=!0}=t,{show_download_button:o=!0}=t,{loop:l}=t,{i18n:r}=t,{upload:u}=t,{display_icon_button_wrapper_top_corner:E=!1}=t;const _$1=createEventDispatcher();return t.value===void 0&&e.value&&n!==void 0&&e.value(n),t.subtitle===void 0&&e.subtitle&&s!==void 0&&e.subtitle(s),t.label===void 0&&e.label&&C!==void 0&&e.label(C),t.show_label===void 0&&e.show_label&&i!==void 0&&e.show_label(i),t.autoplay===void 0&&e.autoplay&&c!==void 0&&e.autoplay(c),t.show_share_button===void 0&&e.show_share_button&&v!==void 0&&e.show_share_button(v),t.show_download_button===void 0&&e.show_download_button&&o!==void 0&&e.show_download_button(o),t.loop===void 0&&e.loop&&l!==void 0&&e.loop(l),t.i18n===void 0&&e.i18n&&r!==void 0&&e.i18n(r),t.upload===void 0&&e.upload&&u!==void 0&&e.upload(u),t.display_icon_button_wrapper_top_corner===void 0&&e.display_icon_button_wrapper_top_corner&&E!==void 0&&e.display_icon_button_wrapper_top_corner(E),n&&_$1("change",n),`${validate_component(Et$1,"BlockLabel").$$render(A,{show_label:i,Icon:be,label:C||"Video"},{},{})} ${!n||n.url===void 0?`${validate_component(_t,"Empty").$$render(A,{unpadded_box:!0,size:"large"},{},{default:()=>`${validate_component(be,"Video").$$render(A,{},{},{})}`})}`:`${validate_component(bt,"Player").$$render(A,{src:n.url,subtitle:s?.url,is_stream:n.is_stream,autoplay:c,mirror:!1,label:C,loop:l,interactive:!1,upload:u,i18n:r},{},{})} <div data-testid="download-div">${validate_component(Ue,"IconButtonWrapper").$$render(A,{display_top_corner:E},{},{default:()=>`${o?`${validate_component(Mt,"DownloadLink").$$render(A,{href:n.is_stream?n.url?.replace("playlist.m3u8","playlist-file"):n.url,download:n.orig_name||n.path},{},{default:()=>`${validate_component(O,"IconButton").$$render(A,{Icon:$t,label:"Download"},{},{})}`})}`:""} ${v?`${validate_component(Ge,"ShareButton").$$render(A,{i18n:r,value:n,formatter:async a=>a?await _(a.data):""},{},{})}`:""}`})}</div>`}`}),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));

export { bt as P, yt as V, zt as a, Qt as b, Wt as l, Kt as p };
//# sourceMappingURL=VideoPreview-DfldTtCx.js.map
