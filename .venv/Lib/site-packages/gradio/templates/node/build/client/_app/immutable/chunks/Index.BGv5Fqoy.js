import{SvelteComponent as ge,init as be,safe_not_equal as de,binding_callbacks as ne,bind as ke,create_component as N,claim_component as S,mount_component as V,add_flush_callback as we,transition_in as v,transition_out as I,destroy_component as q,assign as ve,space as F,element as T,claim_space as G,claim_element as j,children as J,detach as w,attr as k,insert_hydration as B,get_spread_update as Ie,get_spread_object as Be,group_outros as te,check_outros as ie,ensure_array_like as W,empty as A,src_url_equal as H,toggle_class as D,append_hydration as O,destroy_each as ae,text as Ee,claim_text as Me,set_style as Z,listen as L,set_data as De,run_all as Ne}from"../../../svelte/svelte.js";import"../../../svelte/svelte-submodules.js";import{B as Se,S as Ve,I as qe}from"./2.BPD7TSJN.js";import{B as ze}from"./BlockLabel.B6sjuoOP.js";import{E as Fe}from"./Empty.D5XVnMZ_.js";import{I as se}from"./Image.CTVzPhL7.js";import{F as Ge}from"./FullscreenButton.L5WHtCWr.js";function p(n,e,t){const l=n.slice();return l[32]=e[t],l[34]=t,l}function y(n,e,t){const l=n.slice();return l[32]=e[t],l[34]=t,l}function Te(n){var M;let e,t,l,s,o,i,f,c,b;t=new qe({props:{$$slots:{default:[Ce]},$$scope:{ctx:n}}});let m=W(n[15]?(M=n[15])==null?void 0:M.annotations:[]),_=[];for(let a=0;a<m.length;a+=1)_[a]=x(y(n,m,a));let h=n[6]&&n[15]&&ee(n);return{c(){e=T("div"),N(t.$$.fragment),l=F(),s=T("img"),i=F();for(let a=0;a<_.length;a+=1)_[a].c();f=F(),h&&h.c(),c=A(),this.h()},l(a){e=j(a,"DIV",{class:!0});var r=J(e);S(t.$$.fragment,r),l=G(r),s=j(r,"IMG",{class:!0,src:!0,alt:!0}),i=G(r);for(let d=0;d<_.length;d+=1)_[d].l(r);r.forEach(w),f=G(a),h&&h.l(a),c=A(),this.h()},h(){k(s,"class","base-image svelte-303fln"),H(s.src,o=n[15]?n[15].image.url:null)||k(s,"src",o),k(s,"alt","the base file that is annotated"),D(s,"fit-height",n[7]&&!n[18]),k(e,"class","image-container svelte-303fln")},m(a,r){B(a,e,r),V(t,e,null),O(e,l),O(e,s),O(e,i);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(e,null);n[25](e),B(a,f,r),h&&h.m(a,r),B(a,c,r),b=!0},p(a,r){var E;const d={};if(r[0]&278528|r[1]&32&&(d.$$scope={dirty:r,ctx:a}),t.$set(d),(!b||r[0]&32768&&!H(s.src,o=a[15]?a[15].image.url:null))&&k(s,"src",o),(!b||r[0]&262272)&&D(s,"fit-height",a[7]&&!a[18]),r[0]&360976){m=W(a[15]?(E=a[15])==null?void 0:E.annotations:[]);let g;for(g=0;g<m.length;g+=1){const z=y(a,m,g);_[g]?_[g].p(z,r):(_[g]=x(z),_[g].c(),_[g].m(e,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=m.length}a[6]&&a[15]?h?h.p(a,r):(h=ee(a),h.c(),h.m(c.parentNode,c)):h&&(h.d(1),h=null)},i(a){b||(v(t.$$.fragment,a),b=!0)},o(a){I(t.$$.fragment,a),b=!1},d(a){a&&(w(e),w(f),w(c)),q(t),ae(_,a),n[25](null),h&&h.d(a)}}}function je(n){let e,t;return e=new Fe({props:{size:"large",unpadded_box:!0,$$slots:{default:[Le]},$$scope:{ctx:n}}}),{c(){N(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,s){V(e,l,s),t=!0},p(l,s){const o={};s[1]&32&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function $(n){let e,t;return e=new Ge({props:{fullscreen:n[18]}}),e.$on("fullscreen",n[24]),{c(){N(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,s){V(e,l,s),t=!0},p(l,s){const o={};s[0]&262144&&(o.fullscreen=l[18]),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Ce(n){let e,t,l=n[14]&&$(n);return{c(){l&&l.c(),e=A()},l(s){l&&l.l(s),e=A()},m(s,o){l&&l.m(s,o),B(s,e,o),t=!0},p(s,o){s[14]?l?(l.p(s,o),o[0]&16384&&v(l,1)):(l=$(s),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(te(),I(l,1,1,()=>{l=null}),ie())},i(s){t||(v(l),t=!0)},o(s){I(l),t=!1},d(s){s&&w(e),l&&l.d(s)}}}function x(n){let e,t,l,s;return{c(){e=T("img"),this.h()},l(o){e=j(o,"IMG",{alt:!0,class:!0,src:!0,style:!0}),this.h()},h(){var o;k(e,"alt",t="segmentation mask identifying "+n[4]+" within the uploaded file"),k(e,"class","mask fit-height svelte-303fln"),H(e.src,l=n[32].image.url)||k(e,"src",l),k(e,"style",s=n[9]&&n[32].label in n[9]?null:`filter: hue-rotate(${Math.round(n[34]*360/((o=n[15])==null?void 0:o.annotations.length))}deg);`),D(e,"fit-height",!n[18]),D(e,"active",n[16]==n[32].label),D(e,"inactive",n[16]!=n[32].label&&n[16]!=null)},m(o,i){B(o,e,i)},p(o,i){var f;i[0]&16&&t!==(t="segmentation mask identifying "+o[4]+" within the uploaded file")&&k(e,"alt",t),i[0]&32768&&!H(e.src,l=o[32].image.url)&&k(e,"src",l),i[0]&33280&&s!==(s=o[9]&&o[32].label in o[9]?null:`filter: hue-rotate(${Math.round(o[34]*360/((f=o[15])==null?void 0:f.annotations.length))}deg);`)&&k(e,"style",s),i[0]&262144&&D(e,"fit-height",!o[18]),i[0]&98304&&D(e,"active",o[16]==o[32].label),i[0]&98304&&D(e,"inactive",o[16]!=o[32].label&&o[16]!=null)},d(o){o&&w(e)}}}function ee(n){let e,t=W(n[15].annotations),l=[];for(let s=0;s<t.length;s+=1)l[s]=le(p(n,t,s));return{c(){e=T("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=j(s,"DIV",{class:!0});var o=J(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(w),this.h()},h(){k(e,"class","legend svelte-303fln")},m(s,o){B(s,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,o){if(o[0]&3703296){t=W(s[15].annotations);let i;for(i=0;i<t.length;i+=1){const f=p(s,t,i);l[i]?l[i].p(f,o):(l[i]=le(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&w(e),ae(l,s)}}}function le(n){let e,t=n[32].label+"",l,s,o,i;function f(){return n[26](n[32])}function c(){return n[27](n[32])}function b(){return n[30](n[34],n[32])}return{c(){e=T("button"),l=Ee(t),s=F(),this.h()},l(m){e=j(m,"BUTTON",{class:!0,style:!0});var _=J(e);l=Me(_,t),s=G(_),_.forEach(w),this.h()},h(){k(e,"class","legend-item svelte-303fln"),Z(e,"background-color",n[9]&&n[32].label in n[9]?n[9][n[32].label]+"88":`hsla(${Math.round(n[34]*360/n[15].annotations.length)}, 100%, 50%, 0.3)`)},m(m,_){B(m,e,_),O(e,l),O(e,s),o||(i=[L(e,"mouseover",f),L(e,"focus",c),L(e,"mouseout",n[28]),L(e,"blur",n[29]),L(e,"click",b)],o=!0)},p(m,_){n=m,_[0]&32768&&t!==(t=n[32].label+"")&&De(l,t),_[0]&33280&&Z(e,"background-color",n[9]&&n[32].label in n[9]?n[9][n[32].label]+"88":`hsla(${Math.round(n[34]*360/n[15].annotations.length)}, 100%, 50%, 0.3)`)},d(m){m&&w(e),o=!1,Ne(i)}}}function Le(n){let e,t;return e=new se({}),{c(){N(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,s){V(e,l,s),t=!0},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Oe(n){let e,t,l,s,o,i,f,c;const b=[{autoscroll:n[3].autoscroll},{i18n:n[3].i18n},n[13]];let m={};for(let a=0;a<b.length;a+=1)m=ve(m,b[a]);e=new Ve({props:m}),l=new ze({props:{show_label:n[5],Icon:se,label:n[4]||n[3].i18n("image.image")}});const _=[je,Te],h=[];function M(a,r){return a[15]==null?0:1}return i=M(n),f=h[i]=_[i](n),{c(){N(e.$$.fragment),t=F(),N(l.$$.fragment),s=F(),o=T("div"),f.c(),this.h()},l(a){S(e.$$.fragment,a),t=G(a),S(l.$$.fragment,a),s=G(a),o=j(a,"DIV",{class:!0});var r=J(o);f.l(r),r.forEach(w),this.h()},h(){k(o,"class","container svelte-303fln")},m(a,r){V(e,a,r),B(a,t,r),V(l,a,r),B(a,s,r),B(a,o,r),h[i].m(o,null),c=!0},p(a,r){const d=r[0]&8200?Ie(b,[r[0]&8&&{autoscroll:a[3].autoscroll},r[0]&8&&{i18n:a[3].i18n},r[0]&8192&&Be(a[13])]):{};e.$set(d);const E={};r[0]&32&&(E.show_label=a[5]),r[0]&24&&(E.label=a[4]||a[3].i18n("image.image")),l.$set(E);let g=i;i=M(a),i===g?h[i].p(a,r):(te(),I(h[g],1,1,()=>{h[g]=null}),ie(),f=h[i],f?f.p(a,r):(f=h[i]=_[i](a),f.c()),v(f,1),f.m(o,null))},i(a){c||(v(e.$$.fragment,a),v(l.$$.fragment,a),v(f),c=!0)},o(a){I(e.$$.fragment,a),I(l.$$.fragment,a),I(f),c=!1},d(a){a&&(w(t),w(s),w(o)),q(e,a),q(l,a),h[i].d()}}}function Ue(n){let e,t,l;function s(i){n[31](i)}let o={visible:n[2],elem_id:n[0],elem_classes:n[1],padding:!1,height:n[7],width:n[8],allow_overflow:!1,container:n[10],scale:n[11],min_width:n[12],$$slots:{default:[Oe]},$$scope:{ctx:n}};return n[18]!==void 0&&(o.fullscreen=n[18]),e=new Se({props:o}),ne.push(()=>ke(e,"fullscreen",s)),{c(){N(e.$$.fragment)},l(i){S(e.$$.fragment,i)},m(i,f){V(e,i,f),l=!0},p(i,f){const c={};f[0]&4&&(c.visible=i[2]),f[0]&1&&(c.elem_id=i[0]),f[0]&2&&(c.elem_classes=i[1]),f[0]&128&&(c.height=i[7]),f[0]&256&&(c.width=i[8]),f[0]&1024&&(c.container=i[10]),f[0]&2048&&(c.scale=i[11]),f[0]&4096&&(c.min_width=i[12]),f[0]&516856|f[1]&32&&(c.$$scope={dirty:f,ctx:i}),!t&&f[0]&262144&&(t=!0,c.fullscreen=i[18],we(()=>t=!1)),e.$set(c)},i(i){l||(v(e.$$.fragment,i),l=!0)},o(i){I(e.$$.fragment,i),l=!1},d(i){q(e,i)}}}function We(n,e,t){let{elem_id:l=""}=e,{elem_classes:s=[]}=e,{visible:o=!0}=e,{value:i=null}=e,f=null,c=null,{gradio:b}=e,{label:m=b.i18n("annotated_image.annotated_image")}=e,{show_label:_=!0}=e,{show_legend:h=!0}=e,{height:M}=e,{width:a}=e,{color_map:r}=e,{container:d=!0}=e,{scale:E=null}=e,{min_width:g=void 0}=e,z=null,{loading_status:R}=e,{show_fullscreen_button:X=!0}=e,K,U=!1;function P(u){t(16,z=u)}function Q(){t(16,z=null)}function Y(u,C){b.dispatch("select",{value:m,index:u})}const oe=({detail:u})=>{t(18,U=u)};function ue(u){ne[u?"unshift":"push"](()=>{K=u,t(17,K)})}const fe=u=>P(u.label),re=u=>P(u.label),_e=()=>Q(),ce=()=>Q(),he=(u,C)=>Y(u,C.label);function me(u){U=u,t(18,U)}return n.$$set=u=>{"elem_id"in u&&t(0,l=u.elem_id),"elem_classes"in u&&t(1,s=u.elem_classes),"visible"in u&&t(2,o=u.visible),"value"in u&&t(22,i=u.value),"gradio"in u&&t(3,b=u.gradio),"label"in u&&t(4,m=u.label),"show_label"in u&&t(5,_=u.show_label),"show_legend"in u&&t(6,h=u.show_legend),"height"in u&&t(7,M=u.height),"width"in u&&t(8,a=u.width),"color_map"in u&&t(9,r=u.color_map),"container"in u&&t(10,d=u.container),"scale"in u&&t(11,E=u.scale),"min_width"in u&&t(12,g=u.min_width),"loading_status"in u&&t(13,R=u.loading_status),"show_fullscreen_button"in u&&t(14,X=u.show_fullscreen_button)},n.$$.update=()=>{if(n.$$.dirty[0]&12582920)if(i!==f&&(t(23,f=i),b.dispatch("change")),i){const u={image:i.image,annotations:i.annotations.map(C=>({image:C.image,label:C.label}))};t(15,c=u)}else t(15,c=null)},[l,s,o,b,m,_,h,M,a,r,d,E,g,R,X,c,z,K,U,P,Q,Y,i,f,oe,ue,fe,re,_e,ce,he,me]}class Xe extends ge{constructor(e){super(),be(this,e,We,Ue,de,{elem_id:0,elem_classes:1,visible:2,value:22,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,loading_status:13,show_fullscreen_button:14},null,[-1,-1])}}export{Xe as default};
//# sourceMappingURL=Index.BGv5Fqoy.js.map
