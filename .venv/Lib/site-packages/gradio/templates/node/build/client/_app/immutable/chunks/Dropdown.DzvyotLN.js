import{SvelteComponent as de,init as me,safe_not_equal as be,add_render_callback as we,element as U,space as G,empty as te,claim_element as L,children as P,detach as I,claim_space as K,attr as k,insert_hydration as R,listen as z,transition_in as B,group_outros as ge,transition_out as j,check_outros as pe,run_all as oe,createEventDispatcher as ke,ensure_array_like as se,set_style as q,prevent_default as Ie,create_bidirectional_transition as fe,destroy_each as Te,text as ye,get_svelte_dataset as Ce,claim_text as De,toggle_class as O,append_hydration as N,set_data as Ae,binding_callbacks as x,create_component as $,claim_component as ee,mount_component as le,set_input_value as ue,destroy_component as ne,afterUpdate as Ee}from"../../../svelte/svelte.js";import{fly as ie}from"../../../svelte/svelte-submodules.js";import{x as Ne}from"./2.BPD7TSJN.js";import{D as Se}from"./DropdownArrow.Dsz0Zcs8.js";function re(n,l,e){const _=n.slice();return _[30]=l[e],_}function _e(n){let l,e,_,c,f,u=se(n[1]),o=[];for(let t=0;t<u.length;t+=1)o[t]=ce(re(n,u,t));return{c(){l=U("ul");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){l=L(t,"UL",{class:!0,role:!0});var p=P(l);for(let m=0;m<o.length;m+=1)o[m].l(p);p.forEach(I),this.h()},h(){k(l,"class","options svelte-y6qw75"),k(l,"role","listbox"),q(l,"top",n[9]),q(l,"bottom",n[10]),q(l,"max-height",`calc(${n[11]}px - var(--window-padding))`),q(l,"width",n[8]+"px")},m(t,p){R(t,l,p);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(l,null);n[26](l),_=!0,c||(f=[z(l,"mousedown",Ie(n[24])),z(l,"scroll",n[25])],c=!0)},p(t,p){if(p[0]&307){u=se(t[1]);let m;for(m=0;m<u.length;m+=1){const r=re(t,u,m);o[m]?o[m].p(r,p):(o[m]=ce(r),o[m].c(),o[m].m(l,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=u.length}p[0]&512&&q(l,"top",t[9]),p[0]&1024&&q(l,"bottom",t[10]),p[0]&2048&&q(l,"max-height",`calc(${t[11]}px - var(--window-padding))`),p[0]&256&&q(l,"width",t[8]+"px")},i(t){_||(t&&we(()=>{_&&(e||(e=fe(l,ie,{duration:200,y:5},!0)),e.run(1))}),_=!0)},o(t){t&&(e||(e=fe(l,ie,{duration:200,y:5},!1)),e.run(0)),_=!1},d(t){t&&I(l),Te(o,t),n[26](null),t&&e&&e.end(),c=!1,oe(f)}}}function ce(n){let l,e,_="âœ“",c,f=n[0][n[30]][0]+"",u,o,t,p,m;return{c(){l=U("li"),e=U("span"),e.textContent=_,c=G(),u=ye(f),o=G(),this.h()},l(r){l=L(r,"LI",{class:!0,"data-index":!0,"aria-label":!0,"data-testid":!0,role:!0,"aria-selected":!0});var h=P(l);e=L(h,"SPAN",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-1id9b8g"&&(e.textContent=_),c=K(h),u=De(h,f),o=K(h),h.forEach(I),this.h()},h(){k(e,"class","inner-item svelte-y6qw75"),O(e,"hide",!n[4].includes(n[30])),k(l,"class","item svelte-y6qw75"),k(l,"data-index",t=n[30]),k(l,"aria-label",p=n[0][n[30]][0]),k(l,"data-testid","dropdown-option"),k(l,"role","option"),k(l,"aria-selected",m=n[4].includes(n[30])),O(l,"selected",n[4].includes(n[30])),O(l,"active",n[30]===n[5]),O(l,"bg-gray-100",n[30]===n[5]),O(l,"dark:bg-gray-600",n[30]===n[5]),q(l,"width",n[8]+"px")},m(r,h){R(r,l,h),N(l,e),N(l,c),N(l,u),N(l,o)},p(r,h){h[0]&18&&O(e,"hide",!r[4].includes(r[30])),h[0]&3&&f!==(f=r[0][r[30]][0]+"")&&Ae(u,f),h[0]&2&&t!==(t=r[30])&&k(l,"data-index",t),h[0]&3&&p!==(p=r[0][r[30]][0])&&k(l,"aria-label",p),h[0]&18&&m!==(m=r[4].includes(r[30]))&&k(l,"aria-selected",m),h[0]&18&&O(l,"selected",r[4].includes(r[30])),h[0]&34&&O(l,"active",r[30]===r[5]),h[0]&34&&O(l,"bg-gray-100",r[30]===r[5]),h[0]&34&&O(l,"dark:bg-gray-600",r[30]===r[5]),h[0]&256&&q(l,"width",r[8]+"px")},d(r){r&&I(l)}}}function Ve(n){let l,e,_,c,f;we(n[22]);let u=n[2]&&!n[3]&&_e(n);return{c(){l=U("div"),e=G(),u&&u.c(),_=te(),this.h()},l(o){l=L(o,"DIV",{class:!0}),P(l).forEach(I),e=K(o),u&&u.l(o),_=te(),this.h()},h(){k(l,"class","reference")},m(o,t){R(o,l,t),n[23](l),R(o,e,t),u&&u.m(o,t),R(o,_,t),c||(f=[z(window,"scroll",n[14]),z(window,"resize",n[22])],c=!0)},p(o,t){o[2]&&!o[3]?u?(u.p(o,t),t[0]&12&&B(u,1)):(u=_e(o),u.c(),B(u,1),u.m(_.parentNode,_)):u&&(ge(),j(u,1,1,()=>{u=null}),pe())},i(o){B(u)},o(o){j(u)},d(o){o&&(I(l),I(e),I(_)),n[23](null),u&&u.d(o),c=!1,oe(f)}}}function qe(n,l,e){let{choices:_}=l,{filtered_indices:c}=l,{show_options:f=!1}=l,{disabled:u=!1}=l,{selected_indices:o=[]}=l,{active_index:t=null}=l,{remember_scroll:p=!1}=l,{offset_from_top:m=0}=l,{from_top:r=!1}=l,h,D,S,w,s,i,y,b,T,V,C=0;function A(){const{top:d,bottom:F}=s.getBoundingClientRect();r?e(19,h=m):e(19,h=d),e(20,D=V-F)}let g=null;function E(){f&&(g!==null&&clearTimeout(g),g=setTimeout(()=>{A(),g=null},10))}function H(){var d;(d=i==null?void 0:i.scrollTo)==null||d.call(i,0,C)}const M=ke();function W(){e(12,V=window.innerHeight)}function Q(d){x[d?"unshift":"push"](()=>{s=d,e(6,s)})}const X=d=>M("change",d),Y=d=>e(13,C=d.currentTarget.scrollTop);function Z(d){x[d?"unshift":"push"](()=>{i=d,e(7,i)})}return n.$$set=d=>{"choices"in d&&e(0,_=d.choices),"filtered_indices"in d&&e(1,c=d.filtered_indices),"show_options"in d&&e(2,f=d.show_options),"disabled"in d&&e(3,u=d.disabled),"selected_indices"in d&&e(4,o=d.selected_indices),"active_index"in d&&e(5,t=d.active_index),"remember_scroll"in d&&e(16,p=d.remember_scroll),"offset_from_top"in d&&e(17,m=d.offset_from_top),"from_top"in d&&e(18,r=d.from_top)},n.$$.update=()=>{var d,F;if(n.$$.dirty[0]&3997908){if(f&&s){if(p)H();else if(i&&o.length>0){let v=i.querySelectorAll("li");for(const a of Array.from(v))if(a.getAttribute("data-index")===o[0].toString()){(d=i==null?void 0:i.scrollTo)==null||d.call(i,0,a.offsetTop);break}}A();const J=(F=s.parentElement)==null?void 0:F.getBoundingClientRect();e(21,S=(J==null?void 0:J.height)||0),e(8,w=(J==null?void 0:J.width)||0)}D>h||r?(e(9,y=`${h}px`),e(11,T=D),e(10,b=null)):(e(10,b=`${D+S}px`),e(11,T=h-S),e(9,y=null))}},[_,c,f,u,o,t,s,i,w,y,b,T,V,C,E,M,p,m,r,h,D,S,W,Q,X,Y,Z]}class Ue extends de{constructor(l){super(),me(this,l,qe,Ve,be,{choices:0,filtered_indices:1,show_options:2,disabled:3,selected_indices:4,active_index:5,remember_scroll:16,offset_from_top:17,from_top:18},null,[-1,-1])}}function Le(n,l){return(n%l+l)%l}function he(n,l){return n.reduce((e,_,c)=>((!l||_[0].toLowerCase().includes(l.toLowerCase()))&&e.push(c),e),[])}function ze(n,l,e){n("change",l),e||n("input")}function Be(n,l,e){if(n.key==="Escape")return[!1,l];if((n.key==="ArrowDown"||n.key==="ArrowUp")&&e.length>0)if(l===null)l=n.key==="ArrowDown"?e[0]:e[e.length-1];else{const _=e.indexOf(l),c=n.key==="ArrowUp"?-1:1;l=e[Le(_+c,e.length)]}return[!0,l]}function He(n){let l;return{c(){l=ye(n[0])},l(e){l=De(e,n[0])},m(e,_){R(e,l,_)},p(e,_){_[0]&1&&Ae(l,e[0])},d(e){e&&I(l)}}}function ae(n){let l,e,_;return e=new Se({}),{c(){l=U("div"),$(e.$$.fragment),this.h()},l(c){l=L(c,"DIV",{class:!0});var f=P(l);ee(e.$$.fragment,f),f.forEach(I),this.h()},h(){k(l,"class","icon-wrap svelte-1hfxrpf")},m(c,f){R(c,l,f),le(e,l,null),_=!0},i(c){_||(B(e.$$.fragment,c),_=!0)},o(c){j(e.$$.fragment,c),_=!1},d(c){c&&I(l),ne(e)}}}function Je(n){let l,e,_,c,f,u,o,t,p,m,r,h,D,S;e=new Ne({props:{show_label:n[4],info:n[1],$$slots:{default:[He]},$$scope:{ctx:n}}});let w=!n[3]&&ae();return r=new Ue({props:{show_options:n[12],choices:n[2],filtered_indices:n[10],disabled:n[3],selected_indices:n[11]===null?[]:[n[11]],active_index:n[14]}}),r.$on("change",n[16]),{c(){l=U("div"),$(e.$$.fragment),_=G(),c=U("div"),f=U("div"),u=U("div"),o=U("input"),p=G(),w&&w.c(),m=G(),$(r.$$.fragment),this.h()},l(s){l=L(s,"DIV",{class:!0});var i=P(l);ee(e.$$.fragment,i),_=K(i),c=L(i,"DIV",{class:!0});var y=P(c);f=L(y,"DIV",{class:!0});var b=P(f);u=L(b,"DIV",{class:!0});var T=P(u);o=L(T,"INPUT",{role:!0,"aria-controls":!0,"aria-expanded":!0,"aria-label":!0,class:!0,autocomplete:!0}),p=K(T),w&&w.l(T),T.forEach(I),b.forEach(I),m=K(y),ee(r.$$.fragment,y),y.forEach(I),i.forEach(I),this.h()},h(){k(o,"role","listbox"),k(o,"aria-controls","dropdown-options"),k(o,"aria-expanded",n[12]),k(o,"aria-label",n[0]),k(o,"class","border-none svelte-1hfxrpf"),o.disabled=n[3],k(o,"autocomplete","off"),o.readOnly=t=!n[7],O(o,"subdued",!n[13].includes(n[9])&&!n[6]),k(u,"class","secondary-wrap svelte-1hfxrpf"),k(f,"class","wrap-inner svelte-1hfxrpf"),O(f,"show_options",n[12]),k(c,"class","wrap svelte-1hfxrpf"),k(l,"class","svelte-1hfxrpf"),O(l,"container",n[5])},m(s,i){R(s,l,i),le(e,l,null),N(l,_),N(l,c),N(c,f),N(f,u),N(u,o),ue(o,n[9]),n[29](o),N(u,p),w&&w.m(u,null),N(c,m),le(r,c,null),h=!0,D||(S=[z(o,"input",n[28]),z(o,"keydown",n[19]),z(o,"keyup",n[30]),z(o,"blur",n[18]),z(o,"focus",n[17])],D=!0)},p(s,i){const y={};i[0]&16&&(y.show_label=s[4]),i[0]&2&&(y.info=s[1]),i[0]&1|i[1]&8&&(y.$$scope={dirty:i,ctx:s}),e.$set(y),(!h||i[0]&4096)&&k(o,"aria-expanded",s[12]),(!h||i[0]&1)&&k(o,"aria-label",s[0]),(!h||i[0]&8)&&(o.disabled=s[3]),(!h||i[0]&128&&t!==(t=!s[7]))&&(o.readOnly=t),i[0]&512&&o.value!==s[9]&&ue(o,s[9]),(!h||i[0]&8768)&&O(o,"subdued",!s[13].includes(s[9])&&!s[6]),s[3]?w&&(ge(),j(w,1,1,()=>{w=null}),pe()):w?i[0]&8&&B(w,1):(w=ae(),w.c(),B(w,1),w.m(u,null)),(!h||i[0]&4096)&&O(f,"show_options",s[12]);const b={};i[0]&4096&&(b.show_options=s[12]),i[0]&4&&(b.choices=s[2]),i[0]&1024&&(b.filtered_indices=s[10]),i[0]&8&&(b.disabled=s[3]),i[0]&2048&&(b.selected_indices=s[11]===null?[]:[s[11]]),i[0]&16384&&(b.active_index=s[14]),r.$set(b),(!h||i[0]&32)&&O(l,"container",s[5])},i(s){h||(B(e.$$.fragment,s),B(w),B(r.$$.fragment,s),h=!0)},o(s){j(e.$$.fragment,s),j(w),j(r.$$.fragment,s),h=!1},d(s){s&&I(l),ne(e),n[29](null),w&&w.d(),ne(r),D=!1,oe(S)}}}function Pe(n,l,e){let{label:_}=l,{info:c=void 0}=l,{value:f=void 0}=l,u,{value_is_output:o=!1}=l,{choices:t}=l,p,{disabled:m=!1}=l,{show_label:r}=l,{container:h=!0}=l,{allow_custom_value:D=!1}=l,{filterable:S=!0}=l,w,s=!1,i,y,b="",T="",V=!1,C=[],A=null,g=null,E;const H=ke();f&&(E=t.map(a=>a[1]).indexOf(f),g=E,g===-1?(u=f,g=null):([b,u]=t[g],T=b),Q());function M(){e(13,i=t.map(a=>a[0])),e(24,y=t.map(a=>a[1]))}const W=typeof window<"u";function Q(){M(),f===void 0||Array.isArray(f)&&f.length===0?(e(9,b=""),e(11,g=null)):y.includes(f)?(e(9,b=i[y.indexOf(f)]),e(11,g=y.indexOf(f))):D?(e(9,b=f),e(11,g=null)):(e(9,b=""),e(11,g=null)),e(27,E=g)}function X(a){if(e(11,g=parseInt(a.detail.target.dataset.index)),isNaN(g)){e(11,g=null);return}e(12,s=!1),e(14,A=null),w.blur()}function Y(a){e(10,C=t.map((Re,Oe)=>Oe)),e(12,s=!0),H("focus")}function Z(){D?e(20,f=b):e(9,b=i[y.indexOf(f)]),e(12,s=!1),e(14,A=null),H("blur")}function d(a){e(12,[s,A]=Be(a,A,C),s,(e(14,A),e(2,t),e(23,p),e(6,D),e(9,b),e(10,C),e(8,w),e(25,T),e(11,g),e(27,E),e(26,V),e(24,y))),a.key==="Enter"&&(A!==null?(e(11,g=A),e(12,s=!1),w.blur(),e(14,A=null)):i.includes(b)?(e(11,g=i.indexOf(b)),e(12,s=!1),e(14,A=null),w.blur()):D&&(e(20,f=b),e(11,g=null),e(12,s=!1),e(14,A=null),w.blur()))}Ee(()=>{e(21,o=!1),e(26,V=!0)});function F(){b=this.value,e(9,b),e(11,g),e(27,E),e(26,V),e(2,t),e(24,y)}function J(a){x[a?"unshift":"push"](()=>{w=a,e(8,w)})}const v=a=>H("key_up",{key:a.key,input_value:b});return n.$$set=a=>{"label"in a&&e(0,_=a.label),"info"in a&&e(1,c=a.info),"value"in a&&e(20,f=a.value),"value_is_output"in a&&e(21,o=a.value_is_output),"choices"in a&&e(2,t=a.choices),"disabled"in a&&e(3,m=a.disabled),"show_label"in a&&e(4,r=a.show_label),"container"in a&&e(5,h=a.container),"allow_custom_value"in a&&e(6,D=a.allow_custom_value),"filterable"in a&&e(7,S=a.filterable)},n.$$.update=()=>{n.$$.dirty[0]&218105860&&g!==E&&g!==null&&V&&(e(9,[b,f]=t[g],b,(e(20,f),e(11,g),e(27,E),e(26,V),e(2,t),e(24,y))),e(27,E=g),H("select",{index:g,value:y[g],selected:!0})),n.$$.dirty[0]&7340032&&JSON.stringify(u??"")!==JSON.stringify(f??"")&&(Q(),ze(H,f,o),e(22,u=f)),n.$$.dirty[0]&4&&M(),n.$$.dirty[0]&8390468&&t!==p&&(D||Q(),e(23,p=t),e(10,C=he(t,b)),!D&&C.length>0&&e(14,A=C[0]),W&&w===document.activeElement&&e(12,s=!0)),n.$$.dirty[0]&33556036&&b!==T&&(e(10,C=he(t,b)),e(25,T=b),!D&&C.length>0&&e(14,A=C[0]))},[_,c,t,m,r,h,D,S,w,b,C,g,s,i,A,H,X,Y,Z,d,f,o,u,p,y,T,V,E,F,J,v]}class Me extends de{constructor(l){super(),me(this,l,Pe,Je,be,{label:0,info:1,value:20,value_is_output:21,choices:2,disabled:3,show_label:4,container:5,allow_custom_value:6,filterable:7},null,[-1,-1])}}export{Ue as D,ze as a,Be as b,Me as c,he as h};
//# sourceMappingURL=Dropdown.DzvyotLN.js.map
