import{SvelteComponent as te,init as ne,safe_not_equal as ie,svg_element as $,claim_svg_element as ee,children as D,detach as d,attr as h,insert_hydration as C,append_hydration as N,noop as J,space as Y,empty as G,claim_space as Q,transition_in as g,group_outros as O,transition_out as w,check_outros as W,create_component as M,claim_component as Z,mount_component as B,destroy_component as T,ensure_array_like as be,element as A,claim_element as j,destroy_each as We,text as se,claim_text as re,set_style as ge,listen as je,set_data as Ee,createEventDispatcher as fl,onDestroy as bt,bubble as Oe,construct_svelte_component as he,get_spread_update as fe,get_spread_object as ae,assign as _e,is_function as Mt,toggle_class as X,stop_propagation as Bt,run_all as wt,add_render_callback as Tt,create_bidirectional_transition as cl,binding_callbacks as Qe,null_to_empty as Ke,set_input_value as hl,get_svelte_dataset as kt,src_url_equal as Xe,onMount as il,action_destroyer as At,bind as jt,add_flush_callback as St,tick as qt}from"../../../svelte/svelte.js";import{slide as ml}from"../../../svelte/svelte-submodules.js";import{u as dl,j as we,D as Re,F as Ye,I as vt,C as Ft,M as _l,q as Je,k as Zt,H as Pt,B as Ut,S as Ot}from"./2.BPD7TSJN.js";import{E as Wt}from"./Edit.jvyxqbov.js";import{U as Rt}from"./Undo.LhwFM5M8.js";import{F as ul}from"./File.Dl9hvYLG.js";import{d as Jt}from"./index.CnqicUFC.js";import{C as Gt}from"./Community.i_uzCNAp.js";import{T as Kt}from"./Trash.D4IfxcH_.js";import{M as pt}from"./Music.BVFRDHso.js";import{B as Xt}from"./BlockLabel.B6sjuoOP.js";function Yt(n){let e,l,t;return{c(){e=$("svg"),l=$("path"),t=$("path"),this.h()},l(i){e=ee(i,"svg",{xmlns:!0,"xmlns:xlink":!0,"aria-hidden":!0,role:!0,class:!0,width:!0,height:!0,preserveAspectRatio:!0,viewBox:!0});var a=D(e);l=ee(a,"path",{fill:!0,d:!0}),D(l).forEach(d),t=ee(a,"path",{fill:!0,d:!0}),D(t).forEach(d),a.forEach(d),this.h()},h(){h(l,"fill","currentColor"),h(l,"d","M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z"),h(t,"fill","currentColor"),h(t,"d","M8 10h16v2H8zm0 6h10v2H8z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),h(e,"aria-hidden","true"),h(e,"role","img"),h(e,"class","iconify iconify--carbon"),h(e,"width","100%"),h(e,"height","100%"),h(e,"preserveAspectRatio","xMidYMid meet"),h(e,"viewBox","0 0 32 32")},m(i,a){C(i,e,a),N(e,l),N(e,t)},p:J,i:J,o:J,d(i){i&&d(e)}}}class Qt extends te{constructor(e){super(),ne(this,e,null,Yt,ie,{})}}function yt(n){let e,l,t;return{c(){e=$("svg"),l=$("circle"),t=$("path"),this.h()},l(i){e=ee(i,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var a=D(e);l=ee(a,"circle",{cx:!0,cy:!0,r:!0,class:!0}),D(l).forEach(d),t=ee(a,"path",{d:!0}),D(t).forEach(d),a.forEach(d),this.h()},h(){h(l,"cx","9"),h(l,"cy","9"),h(l,"r","8"),h(l,"class","circle svelte-1m886t3"),h(t,"d","M5 8l4 4 4-4z"),h(e,"class","dropdown-arrow svelte-1m886t3"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 18 18")},m(i,a){C(i,e,a),N(e,l),N(e,t)},p:J,i:J,o:J,d(i){i&&d(e)}}}class xt extends te{constructor(e){super(),ne(this,e,null,yt,ie,{})}}function $t(n){let e,l,t,i,a;return{c(){e=$("svg"),l=$("path"),t=$("path"),i=$("path"),a=$("path"),this.h()},l(r){e=ee(r,"svg",{width:!0,height:!0,"stroke-width":!0,viewBox:!0,fill:!0,xmlns:!0,color:!0});var o=D(e);l=ee(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(l).forEach(d),t=ee(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(t).forEach(d),i=ee(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(i).forEach(d),a=ee(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(a).forEach(d),o.forEach(d),this.h()},h(){h(l,"d","M19.1679 9C18.0247 6.46819 15.3006 4.5 11.9999 4.5C8.31459 4.5 5.05104 7.44668 4.54932 11"),h(l,"stroke","currentColor"),h(l,"stroke-width","1.5"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(t,"d","M16 9H19.4C19.7314 9 20 8.73137 20 8.4V5"),h(t,"stroke","currentColor"),h(t,"stroke-width","1.5"),h(t,"stroke-linecap","round"),h(t,"stroke-linejoin","round"),h(i,"d","M4.88146 15C5.92458 17.5318 8.64874 19.5 12.0494 19.5C15.7347 19.5 18.9983 16.5533 19.5 13"),h(i,"stroke","currentColor"),h(i,"stroke-width","1.5"),h(i,"stroke-linecap","round"),h(i,"stroke-linejoin","round"),h(a,"d","M8.04932 15H4.64932C4.31795 15 4.04932 15.2686 4.04932 15.6V19"),h(a,"stroke","currentColor"),h(a,"stroke-width","1.5"),h(a,"stroke-linecap","round"),h(a,"stroke-linejoin","round"),h(e,"width","100%"),h(e,"height","100%"),h(e,"stroke-width","1.5"),h(e,"viewBox","0 0 24 24"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"color","currentColor")},m(r,o){C(r,e,o),N(e,l),N(e,t),N(e,i),N(e,a)},p:J,i:J,o:J,d(r){r&&d(e)}}}class en extends te{constructor(e){super(),ne(this,e,null,$t,ie,{})}}function ln(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=ee(i,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M12 20L12 4M12 20L7 15M12 20L17 15"),h(l,"stroke","currentColor"),h(l,"stroke-width","2"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 24 24"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class tn extends te{constructor(e){super(),ne(this,e,null,ln,ie,{})}}const nn=async(n,e=1800)=>{let l=[...n],t=await al(l);if(t.length>e&&l.length>2){const i=l[0],a=l[l.length-1];l=[i,a],t=await al(l)}return t.length>e&&l.length>0&&(l=l.map(a=>{if(a.type==="text"){const r=Math.floor(e/l.length)-20;if(a.content.length>r)return{...a,content:a.content.substring(0,r)+"..."}}return a}),t=await al(l)),t},al=async n=>(await Promise.all(n.map(async l=>{var a;if(l.role==="system")return"";let t=l.role==="user"?"ðŸ˜ƒ":"ðŸ¤–",i="";if(l.type==="text"){const r={audio:/<audio.*?src="(\/file=.*?)"/g,video:/<video.*?src="(\/file=.*?)"/g,image:/<img.*?src="(\/file=.*?)".*?\/>|!\[.*?\]\((\/file=.*?)\)/g};i=l.content;for(let[o,s]of Object.entries(r)){let f;for(;(f=s.exec(l.content))!==null;){const u=f[1]||f[2],c=await dl(u);i=i.replace(u,c)}}}else{if(!l.content.value)return"";const r=l.content.component==="video"?(a=l.content.value)==null?void 0:a.video.path:l.content.value,o=await dl(r);l.content.component==="audio"?i=`<audio controls src="${o}"></audio>`:l.content.component==="video"?i=o:l.content.component==="image"&&(i=`<img src="${o}" />`)}return`${t}: ${i}`}))).filter(l=>l!=="").join(`
`),Et=(n,e)=>n.replace('src="/file',`src="${e}file`);function an(n,e){if(!n){const l=e==null?void 0:e.path;if(l){const t=l.toLowerCase();if(t.endsWith(".glb")||t.endsWith(".gltf")||t.endsWith(".obj")||t.endsWith(".stl")||t.endsWith(".splat")||t.endsWith(".ply"))return"model3d"}return"file"}return n.includes("audio")?"audio":n.includes("video")?"video":n.includes("image")?"image":n.includes("model")?"model3d":"file"}function Ct(n){const e=Array.isArray(n.file)?n.file[0]:n.file;return{component:an(e==null?void 0:e.mime_type,e),value:n.file,alt_text:n.alt_text,constructor_args:{},props:{}}}function on(n,e){if(n===null)return n;const l=new Map;return n.map((t,i)=>{let a=typeof t.content=="string"?{role:t.role,metadata:t.metadata,content:Et(t.content,e),type:"text",index:i,options:t.options}:"file"in t.content?{content:Ct(t.content),metadata:t.metadata,role:t.role,type:"component",index:i,options:t.options}:{type:"component",...t};const{id:r,title:o,parent_id:s}=t.metadata||{};if(s){const f=l.get(String(s));if(f){const u={...a,children:[]};return f.children.push(u),r&&o&&l.set(String(r),u),null}}if(r&&o){const f={...a,children:[]};return l.set(String(r),f),f}return a}).filter(t=>t!==null)}function sn(n,e){return n===null?n:n.flatMap((t,i)=>t.map((a,r)=>{if(a==null)return null;const o=r==0?"user":"assistant";return typeof a=="string"?{role:o,type:"text",content:Et(a,e),metadata:{title:null},index:[i,r]}:"file"in a?{content:Ct(a),role:o,type:"component",index:[i,r]}:{role:o,content:a,type:"component",index:[i,r]}})).filter(t=>t!=null)}function gl(n){return n.type==="component"}function Ge(n,e){const l=n[n.length-1].role==="assistant",t=n[n.length-1].index;return JSON.stringify(t)===JSON.stringify(e[e.length-1].index)&&l}function rn(n,e,l=!0){const t=[];let i=[],a=null;for(const r of n)if(r.role==="assistant"||r.role==="user"){if(!l){t.push([r]);continue}r.role===a?i.push(r):(i.length>0&&t.push(i),i=[r],a=r.role)}return i.length>0&&t.push(i),t}async function fn(n,e,l){let t=[],i=[];return n.forEach(o=>{if(e[o]||o==="file")return;const s=o==="dataframe"||o==="model3d"?"component":"base",{name:f,component:u}=l(o,s);t.push(f),i.push(u)}),(await Promise.allSettled(i)).map((o,s)=>o.status==="fulfilled"?[s,o.value]:null).filter(o=>o!==null).forEach(([o,s])=>{e[t[o]]=s.default}),e}function _n(n){if(!n)return[];let e=new Set;return n.forEach(l=>{l.type==="component"&&e.add(l.content.component)}),Array.from(e)}function rl(n,e=0){var a,r;let l="";const t="  ".repeat(e);(a=n.metadata)!=null&&a.title&&(l+=`${t}${e>0?"- ":""}${n.metadata.title}
`),typeof n.content=="string"&&(l+=`${t}  ${n.content}
`);const i=n;return((r=i.children)==null?void 0:r.length)>0&&(l+=i.children.map(o=>rl(o,e+1)).join("")),l}function un(n){var e;return Array.isArray(n)?n.map(l=>{var t;return(t=l.metadata)!=null&&t.title?rl(l):l.content}).join(`
`):(e=n.metadata)!=null&&e.title?rl(n):n.content}function bl(n){return Array.isArray(n)&&n.every(e=>typeof e.content=="string")||!Array.isArray(n)&&typeof n.content=="string"}function cn(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=ee(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M11.25 6.61523H9.375V1.36523H11.25V6.61523ZM3.375 1.36523H8.625V6.91636L7.48425 8.62748L7.16737 10.8464C7.14108 11.0248 7.05166 11.1879 6.91535 11.3061C6.77904 11.4242 6.60488 11.4896 6.4245 11.4902H6.375C6.07672 11.4899 5.79075 11.3713 5.57983 11.1604C5.36892 10.9495 5.2503 10.6635 5.25 10.3652V8.11523H2.25C1.85233 8.11474 1.47109 7.95654 1.18989 7.67535C0.908691 7.39415 0.750496 7.01291 0.75 6.61523V3.99023C0.750992 3.29435 1.02787 2.62724 1.51994 2.13517C2.01201 1.64311 2.67911 1.36623 3.375 1.36523Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class wl extends te{constructor(e){super(),ne(this,e,null,cn,ie,{})}}function hn(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=ee(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M2.25 8.11523H4.5V10.3652C4.5003 10.6635 4.61892 10.9495 4.82983 11.1604C5.04075 11.3713 5.32672 11.4899 5.625 11.4902H6.42488C6.60519 11.4895 6.77926 11.4241 6.91549 11.3059C7.05172 11.1878 7.14109 11.0248 7.16737 10.8464L7.48425 8.62748L8.82562 6.61523H11.25V1.36523H3.375C2.67911 1.36623 2.01201 1.64311 1.51994 2.13517C1.02787 2.62724 0.750992 3.29435 0.75 3.99023V6.61523C0.750496 7.01291 0.908691 7.39415 1.18989 7.67535C1.47109 7.95654 1.85233 8.11474 2.25 8.11523ZM9 2.11523H10.5V5.86523H9V2.11523ZM1.5 3.99023C1.5006 3.49314 1.69833 3.01657 2.04983 2.66507C2.40133 2.31356 2.8779 2.11583 3.375 2.11523H8.25V6.12661L6.76575 8.35298L6.4245 10.7402H5.625C5.52554 10.7402 5.43016 10.7007 5.35983 10.6304C5.28951 10.5601 5.25 10.4647 5.25 10.3652V7.36523H2.25C2.05118 7.36494 1.86059 7.28582 1.72 7.14524C1.57941 7.00465 1.5003 6.81406 1.5 6.61523V3.99023Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class kl extends te{constructor(e){super(),ne(this,e,null,hn,ie,{})}}function mn(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=ee(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M0.75 6.24023H2.625V11.4902H0.75V6.24023ZM8.625 11.4902H3.375V5.93911L4.51575 4.22798L4.83263 2.00911C4.85892 1.83065 4.94834 1.66754 5.08465 1.5494C5.22096 1.43125 5.39512 1.36591 5.5755 1.36523H5.625C5.92328 1.36553 6.20925 1.48415 6.42017 1.69507C6.63108 1.90598 6.7497 2.19196 6.75 2.49023V4.74023H9.75C10.1477 4.74073 10.5289 4.89893 10.8101 5.18012C11.0913 5.46132 11.2495 5.84256 11.25 6.24023V8.86523C11.249 9.56112 10.9721 10.2282 10.4801 10.7203C9.98799 11.2124 9.32089 11.4892 8.625 11.4902Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class vl extends te{constructor(e){super(),ne(this,e,null,mn,ie,{})}}function dn(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=ee(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M9.75 4.74023H7.5V2.49023C7.4997 2.19196 7.38108 1.90598 7.17017 1.69507C6.95925 1.48415 6.67328 1.36553 6.375 1.36523H5.57512C5.39481 1.366 5.22074 1.43138 5.08451 1.54952C4.94828 1.66766 4.85891 1.83072 4.83262 2.00911L4.51575 4.22798L3.17438 6.24023H0.75V11.4902H8.625C9.32089 11.4892 9.98799 11.2124 10.4801 10.7203C10.9721 10.2282 11.249 9.56112 11.25 8.86523V6.24023C11.2495 5.84256 11.0913 5.46132 10.8101 5.18012C10.5289 4.89893 10.1477 4.74073 9.75 4.74023ZM3 10.7402H1.5V6.99023H3V10.7402ZM10.5 8.86523C10.4994 9.36233 10.3017 9.8389 9.95017 10.1904C9.59867 10.5419 9.1221 10.7396 8.625 10.7402H3.75V6.72886L5.23425 4.50248L5.5755 2.11523H6.375C6.47446 2.11523 6.56984 2.15474 6.64017 2.22507C6.71049 2.2954 6.75 2.39078 6.75 2.49023V5.49023H9.75C9.94882 5.49053 10.1394 5.56965 10.28 5.71023C10.4206 5.85082 10.4997 6.04141 10.5 6.24023V8.86523Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class pl extends te{constructor(e){super(),ne(this,e,null,dn,ie,{})}}function gn(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{id:!0,xmlns:!0,viewBox:!0,fill:!0});var i=D(e);l=ee(i,"path",{fill:!0,d:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"fill","currentColor"),h(l,"d","M6,30H4V2H28l-5.8,9L28,20H6ZM6,18H24.33L19.8,11l4.53-7H6Z"),h(e,"id","icon"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 32 32"),h(e,"fill","none")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class El extends te{constructor(e){super(),ne(this,e,null,gn,ie,{})}}function bn(n){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(t){e=ee(t,"svg",{id:!0,xmlns:!0,viewBox:!0,fill:!0});var i=D(e);l=ee(i,"path",{fill:!0,d:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"fill","currentColor"),h(l,"d","M4,2H28l-5.8,9L28,20H6v10H4V2z"),h(e,"id","icon"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 32 32"),h(e,"fill","none")},m(t,i){C(t,e,i),N(e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}class Cl extends te{constructor(e){super(),ne(this,e,null,bn,ie,{})}}function Vl(n,e,l){const t=n.slice();return t[9]=e[l],t}function Il(n){let e=n[3].includes("Dislike"),l,t=n[3].includes("Like"),i,a,r=e&&Dl(n),o=t&&zl(n);return{c(){r&&r.c(),l=Y(),o&&o.c(),i=G()},l(s){r&&r.l(s),l=Q(s),o&&o.l(s),i=G()},m(s,f){r&&r.m(s,f),C(s,l,f),o&&o.m(s,f),C(s,i,f),a=!0},p(s,f){f&8&&(e=s[3].includes("Dislike")),e?r?(r.p(s,f),f&8&&g(r,1)):(r=Dl(s),r.c(),g(r,1),r.m(l.parentNode,l)):r&&(O(),w(r,1,1,()=>{r=null}),W()),f&8&&(t=s[3].includes("Like")),t?o?(o.p(s,f),f&8&&g(o,1)):(o=zl(s),o.c(),g(o,1),o.m(i.parentNode,i)):o&&(O(),w(o,1,1,()=>{o=null}),W())},i(s){a||(g(r),g(o),a=!0)},o(s){w(r),w(o),a=!1},d(s){s&&(d(l),d(i)),r&&r.d(s),o&&o.d(s)}}}function Dl(n){let e,l;return e=new we({props:{Icon:n[0]==="Dislike"?wl:kl,label:n[0]==="Dislike"?"clicked dislike":n[1]("chatbot.dislike"),color:n[0]==="Dislike"?"var(--color-accent)":"var(--block-label-text-color)"}}),e.$on("click",n[6]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&1&&(a.Icon=t[0]==="Dislike"?wl:kl),i&3&&(a.label=t[0]==="Dislike"?"clicked dislike":t[1]("chatbot.dislike")),i&1&&(a.color=t[0]==="Dislike"?"var(--color-accent)":"var(--block-label-text-color)"),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function zl(n){let e,l;return e=new we({props:{Icon:n[0]==="Like"?vl:pl,label:n[0]==="Like"?"clicked like":n[1]("chatbot.like"),color:n[0]==="Like"?"var(--color-accent)":"var(--block-label-text-color)"}}),e.$on("click",n[7]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&1&&(a.Icon=t[0]==="Like"?vl:pl),i&3&&(a.label=t[0]==="Like"?"clicked like":t[1]("chatbot.like")),i&1&&(a.color=t[0]==="Like"?"var(--color-accent)":"var(--block-label-text-color)"),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Hl(n){let e,l,t,i,a;l=new we({props:{Icon:n[0]&&n[4].includes(n[0])?Cl:El,label:"Feedback",color:n[0]&&n[4].includes(n[0])?"var(--color-accent)":"var(--block-label-text-color)"}});let r=be(n[4]),o=[];for(let s=0;s<r.length;s+=1)o[s]=Ll(Vl(n,r,s));return{c(){e=A("div"),M(l.$$.fragment),t=Y(),i=A("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=j(s,"DIV",{class:!0});var f=D(e);Z(l.$$.fragment,f),t=Q(f),i=j(f,"DIV",{class:!0});var u=D(i);for(let c=0;c<o.length;c+=1)o[c].l(u);u.forEach(d),f.forEach(d),this.h()},h(){h(i,"class","extra-feedback-options svelte-14rmxes"),h(e,"class","extra-feedback no-border svelte-14rmxes")},m(s,f){C(s,e,f),B(l,e,null),N(e,t),N(e,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,null);a=!0},p(s,f){const u={};if(f&17&&(u.Icon=s[0]&&s[4].includes(s[0])?Cl:El),f&17&&(u.color=s[0]&&s[4].includes(s[0])?"var(--color-accent)":"var(--block-label-text-color)"),l.$set(u),f&53){r=be(s[4]);let c;for(c=0;c<r.length;c+=1){const _=Vl(s,r,c);o[c]?o[c].p(_,f):(o[c]=Ll(_),o[c].c(),o[c].m(i,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},i(s){a||(g(l.$$.fragment,s),a=!0)},o(s){w(l.$$.fragment,s),a=!1},d(s){s&&d(e),T(l),We(o,s)}}}function Ll(n){let e,l=n[9]+"",t,i,a;function r(){return n[8](n[9])}return{c(){e=A("button"),t=se(l),this.h()},l(o){e=j(o,"BUTTON",{class:!0});var s=D(e);t=re(s,l),s.forEach(d),this.h()},h(){h(e,"class","extra-feedback-option svelte-14rmxes"),ge(e,"font-weight",n[0]===n[9]?"bold":"normal")},m(o,s){C(o,e,s),N(e,t),i||(a=je(e,"click",r),i=!0)},p(o,s){n=o,s&16&&l!==(l=n[9]+"")&&Ee(t,l),s&17&&ge(e,"font-weight",n[0]===n[9]?"bold":"normal")},d(o){o&&d(e),i=!1,a()}}}function wn(n){let e=n[3].includes("Like")||n[3].includes("Dislike"),l,t,i,a=e&&Il(n),r=n[4].length>0&&Hl(n);return{c(){a&&a.c(),l=Y(),r&&r.c(),t=G()},l(o){a&&a.l(o),l=Q(o),r&&r.l(o),t=G()},m(o,s){a&&a.m(o,s),C(o,l,s),r&&r.m(o,s),C(o,t,s),i=!0},p(o,[s]){s&8&&(e=o[3].includes("Like")||o[3].includes("Dislike")),e?a?(a.p(o,s),s&8&&g(a,1)):(a=Il(o),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(O(),w(a,1,1,()=>{a=null}),W()),o[4].length>0?r?(r.p(o,s),s&16&&g(r,1)):(r=Hl(o),r.c(),g(r,1),r.m(t.parentNode,t)):r&&(O(),w(r,1,1,()=>{r=null}),W())},i(o){i||(g(a),g(r),i=!0)},o(o){w(a),w(r),i=!1},d(o){o&&(d(l),d(t)),a&&a.d(o),r&&r.d(o)}}}function kn(n,e,l){let t,{i18n:i}=e,{handle_action:a}=e,{feedback_options:r}=e,{selected:o=null}=e;function s(_){l(0,o=o===_?null:_),a(o)}const f=()=>s("Dislike"),u=()=>s("Like"),c=_=>{s(_),a(o||null)};return n.$$set=_=>{"i18n"in _&&l(1,i=_.i18n),"handle_action"in _&&l(2,a=_.handle_action),"feedback_options"in _&&l(3,r=_.feedback_options),"selected"in _&&l(0,o=_.selected)},n.$$.update=()=>{n.$$.dirty&8&&l(4,t=r.filter(_=>_!=="Like"&&_!=="Dislike"))},[o,i,a,r,t,s,f,u,c]}class vn extends te{constructor(e){super(),ne(this,e,kn,wn,ie,{i18n:1,handle_action:2,feedback_options:3,selected:0})}}function pn(n){let e,l;return e=new we({props:{label:n[0]?"Copied message":"Copy message",Icon:n[0]?Re:Ye}}),e.$on("click",n[1]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,[i]){const a={};i&1&&(a.label=t[0]?"Copied message":"Copy message"),i&1&&(a.Icon=t[0]?Re:Ye),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function En(n,e,l){const t=fl();let i=!1,{value:a}=e,{watermark:r=null}=e,o;function s(){l(0,i=!0),o&&clearTimeout(o),o=setTimeout(()=>{l(0,i=!1)},2e3)}async function f(){if("clipboard"in navigator){t("copy",{value:a});const u=r?`${a}

${r}`:a;await navigator.clipboard.writeText(u),s()}else{const u=document.createElement("textarea"),c=r?`${a}

${r}`:a;u.value=c,u.style.position="absolute",u.style.left="-999999px",document.body.prepend(u),u.select();try{document.execCommand("copy"),s()}catch(_){console.error(_)}finally{u.remove()}}}return bt(()=>{o&&clearTimeout(o)}),n.$$set=u=>{"value"in u&&l(2,a=u.value),"watermark"in u&&l(3,r=u.watermark)},[i,f,a,r]}class Cn extends te{constructor(e){super(),ne(this,e,En,pn,ie,{value:2,watermark:3})}}function Nl(n){let e,l,t,i;return l=new vt({props:{top_panel:!1,$$slots:{default:[Dn]},$$scope:{ctx:n}}}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(a){e=j(a,"DIV",{class:!0});var r=D(e);Z(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class",t="message-buttons-"+n[8]+" "+n[13]+" message-buttons "+(n[9]!==null&&"with-avatar")+" svelte-j7nkv7")},m(a,r){C(a,e,r),B(l,e,null),i=!0},p(a,r){const o={};r&33676543&&(o.$$scope={dirty:r,ctx:a}),l.$set(o),(!i||r&8960&&t!==(t="message-buttons-"+a[8]+" "+a[13]+" message-buttons "+(a[9]!==null&&"with-avatar")+" svelte-j7nkv7"))&&h(e,"class",t)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){w(l.$$.fragment,a),i=!1},d(a){a&&d(e),T(l)}}}function Vn(n){let e,l,t,i,a,r,o=n[15]&&Ml(n),s=n[3]&&Bl(n),f=n[4]&&Tl(n),u=n[5]&&Al(n),c=n[1]&&jl(n);return{c(){o&&o.c(),e=Y(),s&&s.c(),l=Y(),f&&f.c(),t=Y(),u&&u.c(),i=Y(),c&&c.c(),a=G()},l(_){o&&o.l(_),e=Q(_),s&&s.l(_),l=Q(_),f&&f.l(_),t=Q(_),u&&u.l(_),i=Q(_),c&&c.l(_),a=G()},m(_,m){o&&o.m(_,m),C(_,e,m),s&&s.m(_,m),C(_,l,m),f&&f.m(_,m),C(_,t,m),u&&u.m(_,m),C(_,i,m),c&&c.m(_,m),C(_,a,m),r=!0},p(_,m){_[15]?o?(o.p(_,m),m&32768&&g(o,1)):(o=Ml(_),o.c(),g(o,1),o.m(e.parentNode,e)):o&&(O(),w(o,1,1,()=>{o=null}),W()),_[3]?s?(s.p(_,m),m&8&&g(s,1)):(s=Bl(_),s.c(),g(s,1),s.m(l.parentNode,l)):s&&(O(),w(s,1,1,()=>{s=null}),W()),_[4]?f?(f.p(_,m),m&16&&g(f,1)):(f=Tl(_),f.c(),g(f,1),f.m(t.parentNode,t)):f&&(O(),w(f,1,1,()=>{f=null}),W()),_[5]?u?(u.p(_,m),m&32&&g(u,1)):(u=Al(_),u.c(),g(u,1),u.m(i.parentNode,i)):u&&(O(),w(u,1,1,()=>{u=null}),W()),_[1]?c?(c.p(_,m),m&2&&g(c,1)):(c=jl(_),c.c(),g(c,1),c.m(a.parentNode,a)):c&&(O(),w(c,1,1,()=>{c=null}),W())},i(_){r||(g(o),g(s),g(f),g(u),g(c),r=!0)},o(_){w(o),w(s),w(f),w(u),w(c),r=!1},d(_){_&&(d(e),d(l),d(t),d(i),d(a)),o&&o.d(_),s&&s.d(_),f&&f.d(_),u&&u.d(_),c&&c.d(_)}}}function In(n){let e,l,t,i;return e=new we({props:{label:n[0]("chatbot.submit"),Icon:Re,disabled:n[10]}}),e.$on("click",n[19]),t=new we({props:{label:n[0]("chatbot.cancel"),Icon:Ft,disabled:n[10]}}),t.$on("click",n[20]),{c(){M(e.$$.fragment),l=Y(),M(t.$$.fragment)},l(a){Z(e.$$.fragment,a),l=Q(a),Z(t.$$.fragment,a)},m(a,r){B(e,a,r),C(a,l,r),B(t,a,r),i=!0},p(a,r){const o={};r&1&&(o.label=a[0]("chatbot.submit")),r&1024&&(o.disabled=a[10]),e.$set(o);const s={};r&1&&(s.label=a[0]("chatbot.cancel")),r&1024&&(s.disabled=a[10]),t.$set(s)},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),i=!0)},o(a){w(e.$$.fragment,a),w(t.$$.fragment,a),i=!1},d(a){a&&d(l),T(e,a),T(t,a)}}}function Ml(n){let e,l;return e=new Cn({props:{value:n[16],watermark:n[7]}}),e.$on("copy",n[21]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&65536&&(a.value=t[16]),i&128&&(a.watermark=t[7]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Bl(n){let e,l;return e=new we({props:{Icon:en,label:n[0]("chatbot.retry"),disabled:n[10]}}),e.$on("click",n[22]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&1&&(a.label=t[0]("chatbot.retry")),i&1024&&(a.disabled=t[10]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Tl(n){let e,l;return e=new we({props:{label:n[0]("chatbot.undo"),Icon:Rt,disabled:n[10]}}),e.$on("click",n[23]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&1&&(a.label=t[0]("chatbot.undo")),i&1024&&(a.disabled=t[10]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Al(n){let e,l;return e=new we({props:{label:n[0]("chatbot.edit"),Icon:Wt,disabled:n[10]}}),e.$on("click",n[24]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&1&&(a.label=t[0]("chatbot.edit")),i&1024&&(a.disabled=t[10]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function jl(n){let e,l;return e=new vn({props:{handle_action:n[12],feedback_options:n[2],selected:n[11],i18n:n[0]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&4096&&(a.handle_action=t[12]),i&4&&(a.feedback_options=t[2]),i&2048&&(a.selected=t[11]),i&1&&(a.i18n=t[0]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Dn(n){let e,l,t,i;const a=[In,Vn],r=[];function o(s,f){return s[6]?0:1}return e=o(n),l=r[e]=a[e](n),{c(){l.c(),t=G()},l(s){l.l(s),t=G()},m(s,f){r[e].m(s,f),C(s,t,f),i=!0},p(s,f){let u=e;e=o(s),e===u?r[e].p(s,f):(O(),w(r[u],1,1,()=>{r[u]=null}),W(),l=r[e],l?l.p(s,f):(l=r[e]=a[e](s),l.c()),g(l,1),l.m(t.parentNode,t))},i(s){i||(g(l),i=!0)},o(s){w(l),i=!1},d(s){s&&d(t),r[e].d(s)}}}function zn(n){let e,l,t=(n[15]||n[3]||n[4]||n[5]||n[1])&&Nl(n);return{c(){t&&t.c(),e=G()},l(i){t&&t.l(i),e=G()},m(i,a){t&&t.m(i,a),C(i,e,a),l=!0},p(i,[a]){i[15]||i[3]||i[4]||i[5]||i[1]?t?(t.p(i,a),a&32826&&g(t,1)):(t=Nl(i),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(O(),w(t,1,1,()=>{t=null}),W())},i(i){l||(g(t),l=!0)},o(i){w(t),l=!1},d(i){i&&d(e),t&&t.d(i)}}}function Hn(n,e,l){let t,i,{i18n:a}=e,{likeable:r}=e,{feedback_options:o}=e,{show_retry:s}=e,{show_undo:f}=e,{show_edit:u}=e,{in_edit_mode:c}=e,{show_copy_button:_}=e,{watermark:m=null}=e,{message:b}=e,{position:k}=e,{avatar:p}=e,{generating:I}=e,{current_feedback:U}=e,{handle_action:q}=e,{layout:H}=e,{dispatch:F}=e;const z=()=>q("edit_submit"),L=()=>q("edit_cancel"),R=P=>F("copy",P.detail),K=()=>q("retry"),x=()=>q("undo"),le=()=>q("edit");return n.$$set=P=>{"i18n"in P&&l(0,a=P.i18n),"likeable"in P&&l(1,r=P.likeable),"feedback_options"in P&&l(2,o=P.feedback_options),"show_retry"in P&&l(3,s=P.show_retry),"show_undo"in P&&l(4,f=P.show_undo),"show_edit"in P&&l(5,u=P.show_edit),"in_edit_mode"in P&&l(6,c=P.in_edit_mode),"show_copy_button"in P&&l(17,_=P.show_copy_button),"watermark"in P&&l(7,m=P.watermark),"message"in P&&l(18,b=P.message),"position"in P&&l(8,k=P.position),"avatar"in P&&l(9,p=P.avatar),"generating"in P&&l(10,I=P.generating),"current_feedback"in P&&l(11,U=P.current_feedback),"handle_action"in P&&l(12,q=P.handle_action),"layout"in P&&l(13,H=P.layout),"dispatch"in P&&l(14,F=P.dispatch)},n.$$.update=()=>{n.$$.dirty&262144&&l(16,t=bl(b)?un(b):""),n.$$.dirty&393216&&l(15,i=_&&b&&bl(b))},[a,r,o,s,f,u,c,m,k,p,I,U,q,H,F,i,t,_,b,z,L,R,K,x,le]}class Vt extends te{constructor(e){super(),ne(this,e,Hn,zn,ie,{i18n:0,likeable:1,feedback_options:2,show_retry:3,show_undo:4,show_edit:5,in_edit_mode:6,show_copy_button:17,watermark:7,message:18,position:8,avatar:9,generating:10,current_feedback:11,handle_action:12,layout:13,dispatch:14})}}function Ln(n){let e,l,t;const i=[n[5],{value:n[2]},{clear_color:n[5].clear_color},{display_mode:n[5].display_mode},{zoom_speed:n[5].zoom_speed},{pan_speed:n[5].pan_speed},n[5].camera_position!==void 0&&{camera_position:n[5].camera_position},{has_change_history:!0},{show_label:!!n[5].label},{root:""},{interactive:!1},{show_share_button:!0},{gradio:{dispatch:sl,i18n:n[6]}}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&100&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{clear_color:o[5].clear_color},s&32&&{display_mode:o[5].display_mode},s&32&&{zoom_speed:o[5].zoom_speed},s&32&&{pan_speed:o[5].pan_speed},s&32&&ae(o[5].camera_position!==void 0&&{camera_position:o[5].camera_position}),i[7],s&32&&{show_label:!!o[5].label},i[9],i[10],i[11],s&64&&{gradio:{dispatch:sl,i18n:o[6]}}]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[18])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[18]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&100?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{clear_color:o[5].clear_color},s&32&&{display_mode:o[5].display_mode},s&32&&{zoom_speed:o[5].zoom_speed},s&32&&{pan_speed:o[5].pan_speed},s&32&&ae(o[5].camera_position!==void 0&&{camera_position:o[5].camera_position}),i[7],s&32&&{show_label:!!o[5].label},i[9],i[10],i[11],s&64&&{gradio:{dispatch:sl,i18n:o[6]}}]):{};e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function Nn(n){let e,l,t;const i=[n[5],{value:n[2]},{show_label:!1},{show_share_button:!0},{i18n:n[6]},{gradio:{dispatch:Zn}}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&100&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},i[2],i[3],s&64&&{i18n:o[6]},i[5]]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[17])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[17]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&100?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},i[2],i[3],s&64&&{i18n:o[6]},i[5]]):{};e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function Mn(n){let e,l,t;const i=[n[5],{value:n[2]},{show_label:!!n[5].label},{show_download_button:n[9]},{display_icon_button_wrapper_top_corner:n[10]},{i18n:n[6]}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&1636&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&64&&{i18n:o[6]}]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[16])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[16]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&1636?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&64&&{i18n:o[6]}]):{};e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function Bn(n){let e,l,t;const i=[n[5],{autoplay:n[5].autoplay},{value:n[2].video||n[2]},{show_label:!!n[5].label},{show_share_button:!0},{i18n:n[6]},{upload:n[7]},{display_icon_button_wrapper_top_corner:n[10]},{show_download_button:n[9]}];var a=n[1][n[0]];function r(o,s){let f={$$slots:{default:[qn]},$$scope:{ctx:o}};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&1764&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&32&&{autoplay:o[5].autoplay},s&4&&{value:o[2].video||o[2]},s&32&&{show_label:!!o[5].label},i[4],s&64&&{i18n:o[6]},s&128&&{upload:o[7]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&512&&{show_download_button:o[9]}]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[15])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[15]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&1764?fe(i,[s&32&&ae(o[5]),s&32&&{autoplay:o[5].autoplay},s&4&&{value:o[2].video||o[2]},s&32&&{show_label:!!o[5].label},i[4],s&64&&{i18n:o[6]},s&128&&{upload:o[7]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&512&&{show_download_button:o[9]}]):{};s&524288&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function Tn(n){let e,l,t;const i=[n[5],{value:n[2]},{show_label:!!n[5].label},{show_share_button:!0},{i18n:n[6]},{waveform_settings:{...n[5].waveform_settings,autoplay:n[5].autoplay}},{show_download_button:n[9]},{display_icon_button_wrapper_top_corner:n[10]}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&1636&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},i[3],s&64&&{i18n:o[6]},s&32&&{waveform_settings:{...o[5].waveform_settings,autoplay:o[5].autoplay}},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]}]))),{props:f}}return a&&(l=he(a,r(n)),l.$on("load",n[14])),{c(){e=A("div"),l&&M(l.$$.fragment),this.h()},l(o){e=j(o,"DIV",{style:!0});var s=D(e);l&&Z(l.$$.fragment,s),s.forEach(d),this.h()},h(){ge(e,"position","relative")},m(o,s){C(o,e,s),l&&B(l,e,null),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(l){O();const f=l;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(l=he(a,r(o,s)),l.$on("load",o[14]),M(l.$$.fragment),g(l.$$.fragment,1),B(l,e,null)):l=null}else if(a){const f=s&1636?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},i[3],s&64&&{i18n:o[6]},s&32&&{waveform_settings:{...o[5].waveform_settings,autoplay:o[5].autoplay}},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]}]):{};l.$set(f)}},i(o){t||(l&&g(l.$$.fragment,o),t=!0)},o(o){l&&w(l.$$.fragment,o),t=!1},d(o){o&&d(e),l&&T(l)}}}function An(n){let e,l,t;const i=[n[5],{value:n[2]},{target:n[3]},{theme_mode:n[4]},{bokeh_version:n[5].bokeh_version},{caption:n[5].caption||""},{show_actions_button:!0}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&60&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&8&&{target:o[3]},s&16&&{theme_mode:o[4]},s&32&&{bokeh_version:o[5].bokeh_version},s&32&&{caption:o[5].caption||""},i[6]]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[13])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[13]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&60?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&8&&{target:o[3]},s&16&&{theme_mode:o[4]},s&32&&{bokeh_version:o[5].bokeh_version},s&32&&{caption:o[5].caption||""},i[6]]):{};e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function jn(n){let e,l,t;const i=[n[5],{value:n[2]},{show_label:!!n[5].label},{i18n:n[6]},{interactive:!1},{line_breaks:n[5].line_breaks},{wrap:!0},{root:""},{gradio:{dispatch:ol,i18n:n[6]}},{datatype:n[5].datatype},{latex_delimiters:n[5].latex_delimiters},{col_count:n[5].col_count},{row_count:n[5].row_count}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&100&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},i[4],s&32&&{line_breaks:o[5].line_breaks},i[6],i[7],s&64&&{gradio:{dispatch:ol,i18n:o[6]}},s&32&&{datatype:o[5].datatype},s&32&&{latex_delimiters:o[5].latex_delimiters},s&32&&{col_count:o[5].col_count},s&32&&{row_count:o[5].row_count}]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[12])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[12]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&100?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},i[4],s&32&&{line_breaks:o[5].line_breaks},i[6],i[7],s&64&&{gradio:{dispatch:ol,i18n:o[6]}},s&32&&{datatype:o[5].datatype},s&32&&{latex_delimiters:o[5].latex_delimiters},s&32&&{col_count:o[5].col_count},s&32&&{row_count:o[5].row_count}]):{};e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function Sn(n){let e,l,t;const i=[n[5],{value:n[2]},{display_icon_button_wrapper_top_corner:n[10]},{show_label:!!n[5].label},{i18n:n[6]},{_fetch:n[8]},{allow_preview:!1},{interactive:!1},{mode:"minimal"},{fixed_height:1}];var a=n[1][n[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=_e(f,i[u]);return s!==void 0&&s&1380&&(f=_e(f,fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},s&256&&{_fetch:o[8]},i[6],i[7],i[8],i[9]]))),{props:f}}return a&&(e=he(a,r(n)),e.$on("load",n[11])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&Z(e.$$.fragment,o),l=G()},m(o,s){e&&B(e,o,s),C(o,l,s),t=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{T(f,1)}),W()}a?(e=he(a,r(o,s)),e.$on("load",o[11]),M(e.$$.fragment),g(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else if(a){const f=s&1380?fe(i,[s&32&&ae(o[5]),s&4&&{value:o[2]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},s&256&&{_fetch:o[8]},i[6],i[7],i[8],i[9]]):{};e.$set(f)}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&w(e.$$.fragment,o),t=!1},d(o){o&&d(l),e&&T(e,o)}}}function qn(n){let e;return{c(){e=A("track"),this.h()},l(l){e=j(l,"TRACK",{kind:!0}),this.h()},h(){h(e,"kind","captions")},m(l,t){C(l,e,t)},p:J,d(l){l&&d(e)}}}function Fn(n){let e,l,t,i;const a=[Sn,jn,An,Tn,Bn,Mn,Nn,Ln],r=[];function o(s,f){return s[0]==="gallery"?0:s[0]==="dataframe"?1:s[0]==="plot"?2:s[0]==="audio"?3:s[0]==="video"?4:s[0]==="image"?5:s[0]==="html"?6:s[0]==="model3d"?7:-1}return~(e=o(n))&&(l=r[e]=a[e](n)),{c(){l&&l.c(),t=G()},l(s){l&&l.l(s),t=G()},m(s,f){~e&&r[e].m(s,f),C(s,t,f),i=!0},p(s,[f]){let u=e;e=o(s),e===u?~e&&r[e].p(s,f):(l&&(O(),w(r[u],1,1,()=>{r[u]=null}),W()),~e?(l=r[e],l?l.p(s,f):(l=r[e]=a[e](s),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(s){i||(g(l),i=!0)},o(s){w(l),i=!1},d(s){s&&d(t),~e&&r[e].d(s)}}}const ol=()=>{},Zn=()=>{},sl=()=>{};function Pn(n,e,l){let{type:t}=e,{components:i}=e,{value:a}=e,{target:r}=e,{theme_mode:o}=e,{props:s}=e,{i18n:f}=e,{upload:u}=e,{_fetch:c}=e,{allow_file_downloads:_}=e,{display_icon_button_wrapper_top_corner:m=!1}=e;function b(z){Oe.call(this,n,z)}function k(z){Oe.call(this,n,z)}function p(z){Oe.call(this,n,z)}function I(z){Oe.call(this,n,z)}function U(z){Oe.call(this,n,z)}function q(z){Oe.call(this,n,z)}function H(z){Oe.call(this,n,z)}function F(z){Oe.call(this,n,z)}return n.$$set=z=>{"type"in z&&l(0,t=z.type),"components"in z&&l(1,i=z.components),"value"in z&&l(2,a=z.value),"target"in z&&l(3,r=z.target),"theme_mode"in z&&l(4,o=z.theme_mode),"props"in z&&l(5,s=z.props),"i18n"in z&&l(6,f=z.i18n),"upload"in z&&l(7,u=z.upload),"_fetch"in z&&l(8,c=z._fetch),"allow_file_downloads"in z&&l(9,_=z.allow_file_downloads),"display_icon_button_wrapper_top_corner"in z&&l(10,m=z.display_icon_button_wrapper_top_corner)},n.$$.update=()=>{n.$$.dirty&32&&console.log("props.label",s.label)},[t,i,a,r,o,s,f,u,c,_,m,b,k,p,I,U,q,H,F]}class Un extends te{constructor(e){super(),ne(this,e,Pn,Fn,ie,{type:0,components:1,value:2,target:3,theme_mode:4,props:5,i18n:6,upload:7,_fetch:8,allow_file_downloads:9,display_icon_button_wrapper_top_corner:10})}}function On(n){var I,U,q,H;let e,l,t,i,a,r,o,s=(((I=n[15].content.value)==null?void 0:I.orig_name)||((U=n[15].content.value)==null?void 0:U.path.split("/").pop())||"file")+"",f,u,c,_,m,b=(((q=n[15].content.value)==null?void 0:q.orig_name)||((H=n[15].content.value)==null?void 0:H.path)||"").split(".").pop().toUpperCase()+"",k,p;return t=new ul({}),{c(){e=A("div"),l=A("div"),M(t.$$.fragment),i=Y(),a=A("div"),r=A("a"),o=A("span"),f=se(s),_=Y(),m=A("span"),k=se(b),this.h()},l(F){e=j(F,"DIV",{class:!0});var z=D(e);l=j(z,"DIV",{class:!0});var L=D(l);Z(t.$$.fragment,L),L.forEach(d),i=Q(z),a=j(z,"DIV",{class:!0});var R=D(a);r=j(R,"A",{"data-testid":!0,class:!0,href:!0,target:!0,download:!0});var K=D(r);o=j(K,"SPAN",{class:!0});var x=D(o);f=re(x,s),x.forEach(d),K.forEach(d),_=Q(R),m=j(R,"SPAN",{class:!0});var le=D(m);k=re(le,b),le.forEach(d),R.forEach(d),z.forEach(d),this.h()},h(){var F,z;h(l,"class","file-icon svelte-ulpe0d"),h(o,"class","file-name svelte-ulpe0d"),h(r,"data-testid","chatbot-file"),h(r,"class","file-link svelte-ulpe0d"),h(r,"href",u=n[15].content.value.url),h(r,"target","_blank"),h(r,"download",c=window.__is_colab__?null:((F=n[15].content.value)==null?void 0:F.orig_name)||((z=n[15].content.value)==null?void 0:z.path.split("/").pop())||"file"),h(m,"class","file-type svelte-ulpe0d"),h(a,"class","file-info svelte-ulpe0d"),h(e,"class","file-container svelte-ulpe0d")},m(F,z){C(F,e,z),N(e,l),B(t,l,null),N(e,i),N(e,a),N(a,r),N(r,o),N(o,f),N(a,_),N(a,m),N(m,k),p=!0},p(F,z){var L,R,K,x,le,P;(!p||z&32768)&&s!==(s=(((L=F[15].content.value)==null?void 0:L.orig_name)||((R=F[15].content.value)==null?void 0:R.path.split("/").pop())||"file")+"")&&Ee(f,s),(!p||z&32768&&u!==(u=F[15].content.value.url))&&h(r,"href",u),(!p||z&32768&&c!==(c=window.__is_colab__?null:((K=F[15].content.value)==null?void 0:K.orig_name)||((x=F[15].content.value)==null?void 0:x.path.split("/").pop())||"file"))&&h(r,"download",c),(!p||z&32768)&&b!==(b=(((le=F[15].content.value)==null?void 0:le.orig_name)||((P=F[15].content.value)==null?void 0:P.path)||"").split(".").pop().toUpperCase()+"")&&Ee(k,b)},i(F){p||(g(t.$$.fragment,F),p=!0)},o(F){w(t.$$.fragment,F),p=!1},d(F){F&&d(e),T(t)}}}function Wn(n){let e,l;return e=new Un({props:{target:n[6],theme_mode:n[7],props:n[15].content.props,type:n[15].content.component,components:n[8],value:n[15].content.value,display_icon_button_wrapper_top_corner:n[13]>0&&n[12],i18n:n[3],upload:n[5],_fetch:n[2],allow_file_downloads:n[11]}}),e.$on("load",n[16]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&64&&(a.target=t[6]),i&128&&(a.theme_mode=t[7]),i&32768&&(a.props=t[15].content.props),i&32768&&(a.type=t[15].content.component),i&256&&(a.components=t[8]),i&32768&&(a.value=t[15].content.value),i&12288&&(a.display_icon_button_wrapper_top_corner=t[13]>0&&t[12]),i&8&&(a.i18n=t[3]),i&32&&(a.upload=t[5]),i&4&&(a._fetch=t[2]),i&2048&&(a.allow_file_downloads=t[11]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Rn(n){let e,l,t;return l=new _l({props:{message:n[15].content,latex_delimiters:n[0],sanitize_html:n[1],render_markdown:n[9],line_breaks:n[4],allow_tags:n[14],theme_mode:n[7]}}),l.$on("load",function(){Mt(n[10])&&n[10].apply(this,arguments)}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);Z(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","message-content")},m(i,a){C(i,e,a),B(l,e,null),t=!0},p(i,a){n=i;const r={};a&32768&&(r.message=n[15].content),a&1&&(r.latex_delimiters=n[0]),a&2&&(r.sanitize_html=n[1]),a&512&&(r.render_markdown=n[9]),a&16&&(r.line_breaks=n[4]),a&16384&&(r.allow_tags=n[14]),a&128&&(r.theme_mode=n[7]),l.$set(r)},i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){w(l.$$.fragment,i),t=!1},d(i){i&&d(e),T(l)}}}function Jn(n){let e,l,t,i;const a=[Rn,Wn,On],r=[];function o(s,f){return s[15].type==="text"?0:s[15].type==="component"&&s[15].content.component in s[8]?1:s[15].type==="component"&&s[15].content.component==="file"?2:-1}return~(e=o(n))&&(l=r[e]=a[e](n)),{c(){l&&l.c(),t=G()},l(s){l&&l.l(s),t=G()},m(s,f){~e&&r[e].m(s,f),C(s,t,f),i=!0},p(s,[f]){let u=e;e=o(s),e===u?~e&&r[e].p(s,f):(l&&(O(),w(r[u],1,1,()=>{r[u]=null}),W()),~e?(l=r[e],l?l.p(s,f):(l=r[e]=a[e](s),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(s){i||(g(l),i=!0)},o(s){w(l),i=!1},d(s){s&&d(t),~e&&r[e].d(s)}}}function Gn(n,e,l){let{latex_delimiters:t}=e,{sanitize_html:i}=e,{_fetch:a}=e,{i18n:r}=e,{line_breaks:o}=e,{upload:s}=e,{target:f}=e,{theme_mode:u}=e,{_components:c}=e,{render_markdown:_}=e,{scroll:m}=e,{allow_file_downloads:b}=e,{display_consecutive_in_same_bubble:k}=e,{thought_index:p}=e,{allow_tags:I=!1}=e,{message:U}=e;const q=()=>m();return n.$$set=H=>{"latex_delimiters"in H&&l(0,t=H.latex_delimiters),"sanitize_html"in H&&l(1,i=H.sanitize_html),"_fetch"in H&&l(2,a=H._fetch),"i18n"in H&&l(3,r=H.i18n),"line_breaks"in H&&l(4,o=H.line_breaks),"upload"in H&&l(5,s=H.upload),"target"in H&&l(6,f=H.target),"theme_mode"in H&&l(7,u=H.theme_mode),"_components"in H&&l(8,c=H._components),"render_markdown"in H&&l(9,_=H.render_markdown),"scroll"in H&&l(10,m=H.scroll),"allow_file_downloads"in H&&l(11,b=H.allow_file_downloads),"display_consecutive_in_same_bubble"in H&&l(12,k=H.display_consecutive_in_same_bubble),"thought_index"in H&&l(13,p=H.thought_index),"allow_tags"in H&&l(14,I=H.allow_tags),"message"in H&&l(15,U=H.message)},[t,i,a,r,o,s,f,u,c,_,m,b,k,p,I,U,q]}class It extends te{constructor(e){super(),ne(this,e,Gn,Jn,ie,{latex_delimiters:0,sanitize_html:1,_fetch:2,i18n:3,line_breaks:4,upload:5,target:6,theme_mode:7,_components:8,render_markdown:9,scroll:10,allow_file_downloads:11,display_consecutive_in_same_bubble:12,thought_index:13,allow_tags:14,message:15})}}function Sl(n,e,l){const t=n.slice();return t[27]=e[l],t[29]=l,t}function ql(n){let e;return{c(){e=A("span"),this.h()},l(l){e=j(l,"SPAN",{class:!0}),D(e).forEach(d),this.h()},h(){h(e,"class","loading-spinner svelte-1qn6r4f")},m(l,t){C(l,e,t)},d(l){l&&d(e)}}}function Fl(n){let e,l,t=n[16].metadata.log&&Zl(n),i=n[16].metadata.duration!==void 0&&Pl(n);return{c(){e=A("span"),t&&t.c(),l=Y(),i&&i.c(),this.h()},l(a){e=j(a,"SPAN",{class:!0});var r=D(e);t&&t.l(r),l=Q(r),i&&i.l(r),r.forEach(d),this.h()},h(){h(e,"class","duration svelte-1qn6r4f")},m(a,r){C(a,e,r),t&&t.m(e,null),N(e,l),i&&i.m(e,null)},p(a,r){a[16].metadata.log?t?t.p(a,r):(t=Zl(a),t.c(),t.m(e,l)):t&&(t.d(1),t=null),a[16].metadata.duration!==void 0?i?i.p(a,r):(i=Pl(a),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(a){a&&d(e),t&&t.d(),i&&i.d()}}}function Zl(n){let e=n[16].metadata.log+"",l;return{c(){l=se(e)},l(t){l=re(t,e)},m(t,i){C(t,l,i)},p(t,i){i&65536&&e!==(e=t[16].metadata.log+"")&&Ee(l,e)},d(t){t&&d(l)}}}function Pl(n){let e,l,t;function i(o,s){return s&65536&&(l=null),l==null&&(l=!!Number.isInteger(o[16].metadata.duration)),l?Yn:o[16].metadata.duration>=.1?Xn:Kn}let a=i(n,-1),r=a(n);return{c(){e=se("("),r.c(),t=se(")")},l(o){e=re(o,"("),r.l(o),t=re(o,")")},m(o,s){C(o,e,s),r.m(o,s),C(o,t,s)},p(o,s){a===(a=i(o,s))&&r?r.p(o,s):(r.d(1),r=a(o),r&&(r.c(),r.m(t.parentNode,t)))},d(o){o&&(d(e),d(t)),r.d(o)}}}function Kn(n){let e=(n[16].metadata.duration*1e3).toFixed(1)+"",l,t;return{c(){l=se(e),t=se("ms")},l(i){l=re(i,e),t=re(i,"ms")},m(i,a){C(i,l,a),C(i,t,a)},p(i,a){a&65536&&e!==(e=(i[16].metadata.duration*1e3).toFixed(1)+"")&&Ee(l,e)},d(i){i&&(d(l),d(t))}}}function Xn(n){let e=n[16].metadata.duration.toFixed(1)+"",l,t;return{c(){l=se(e),t=se("s")},l(i){l=re(i,e),t=re(i,"s")},m(i,a){C(i,l,a),C(i,t,a)},p(i,a){a&65536&&e!==(e=i[16].metadata.duration.toFixed(1)+"")&&Ee(l,e)},d(i){i&&(d(l),d(t))}}}function Yn(n){let e=n[16].metadata.duration+"",l,t;return{c(){l=se(e),t=se("s")},l(i){l=re(i,e),t=re(i,"s")},m(i,a){C(i,l,a),C(i,t,a)},p(i,a){a&65536&&e!==(e=i[16].metadata.duration+"")&&Ee(l,e)},d(i){i&&(d(l),d(t))}}}function Ul(n){var f;let e,l,t,i,a,r,o;l=new It({props:{message:n[16],sanitize_html:n[1],allow_tags:n[15],latex_delimiters:n[2],render_markdown:n[3],_components:n[4],upload:n[5],thought_index:n[6],target:n[7],theme_mode:n[8],_fetch:n[9],scroll:n[10],allow_file_downloads:n[11],display_consecutive_in_same_bubble:n[12],i18n:n[13],line_breaks:n[14]}});let s=((f=n[16].children)==null?void 0:f.length)>0&&Ol(n);return{c(){e=A("div"),M(l.$$.fragment),t=Y(),s&&s.c(),this.h()},l(u){e=j(u,"DIV",{class:!0});var c=D(e);Z(l.$$.fragment,c),t=Q(c),s&&s.l(c),c.forEach(d),this.h()},h(){var u;h(e,"class","svelte-1qn6r4f"),X(e,"content",n[18]),X(e,"content-preview",!n[18]&&((u=n[16].metadata)==null?void 0:u.status)!=="done")},m(u,c){C(u,e,c),B(l,e,null),N(e,t),s&&s.m(e,null),n[24](e),a=!0,r||(o=je(e,"scroll",n[20]),r=!0)},p(u,c){var m,b;const _={};c&65536&&(_.message=u[16]),c&2&&(_.sanitize_html=u[1]),c&32768&&(_.allow_tags=u[15]),c&4&&(_.latex_delimiters=u[2]),c&8&&(_.render_markdown=u[3]),c&16&&(_._components=u[4]),c&32&&(_.upload=u[5]),c&64&&(_.thought_index=u[6]),c&128&&(_.target=u[7]),c&256&&(_.theme_mode=u[8]),c&512&&(_._fetch=u[9]),c&1024&&(_.scroll=u[10]),c&2048&&(_.allow_file_downloads=u[11]),c&4096&&(_.display_consecutive_in_same_bubble=u[12]),c&8192&&(_.i18n=u[13]),c&16384&&(_.line_breaks=u[14]),l.$set(_),((m=u[16].children)==null?void 0:m.length)>0?s?(s.p(u,c),c&65536&&g(s,1)):(s=Ol(u),s.c(),g(s,1),s.m(e,null)):s&&(O(),w(s,1,1,()=>{s=null}),W()),(!a||c&262144)&&X(e,"content",u[18]),(!a||c&327680)&&X(e,"content-preview",!u[18]&&((b=u[16].metadata)==null?void 0:b.status)!=="done")},i(u){a||(g(l.$$.fragment,u),g(s),u&&Tt(()=>{a&&(i||(i=cl(e,ml,{},!0)),i.run(1))}),a=!0)},o(u){w(l.$$.fragment,u),w(s),u&&(i||(i=cl(e,ml,{},!1)),i.run(0)),a=!1},d(u){u&&d(e),T(l),s&&s.d(),n[24](null),u&&i&&i.end(),r=!1,o()}}}function Ol(n){let e,l,t=be(n[16].children),i=[];for(let r=0;r<t.length;r+=1)i[r]=Wl(Sl(n,t,r));const a=r=>w(i[r],1,1,()=>{i[r]=null});return{c(){e=A("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=j(r,"DIV",{class:!0});var o=D(e);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(d),this.h()},h(){h(e,"class","children svelte-1qn6r4f")},m(r,o){C(r,e,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);l=!0},p(r,o){if(o&98303){t=be(r[16].children);let s;for(s=0;s<t.length;s+=1){const f=Sl(r,t,s);i[s]?(i[s].p(f,o),g(i[s],1)):(i[s]=Wl(f),i[s].c(),g(i[s],1),i[s].m(e,null))}for(O(),s=t.length;s<i.length;s+=1)a(s);W()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)g(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);l=!1},d(r){r&&d(e),We(i,r)}}}function Wl(n){let e,l;return e=new Dt({props:{thought:n[27],rtl:n[0],sanitize_html:n[1],latex_delimiters:n[2],render_markdown:n[3],_components:n[4],upload:n[5],thought_index:n[6]+1,target:n[7],theme_mode:n[8],_fetch:n[9],scroll:n[10],allow_file_downloads:n[11],display_consecutive_in_same_bubble:n[12],i18n:n[13],line_breaks:n[14]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i&65536&&(a.thought=t[27]),i&1&&(a.rtl=t[0]),i&2&&(a.sanitize_html=t[1]),i&4&&(a.latex_delimiters=t[2]),i&8&&(a.render_markdown=t[3]),i&16&&(a._components=t[4]),i&32&&(a.upload=t[5]),i&64&&(a.thought_index=t[6]+1),i&128&&(a.target=t[7]),i&256&&(a.theme_mode=t[8]),i&512&&(a._fetch=t[9]),i&1024&&(a.scroll=t[10]),i&2048&&(a.allow_file_downloads=t[11]),i&4096&&(a.display_consecutive_in_same_bubble=t[12]),i&8192&&(a.i18n=t[13]),i&16384&&(a.line_breaks=t[14]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Qn(n){var I,U,q,H,F,z;let e,l,t,i,a,r,o,s,f,u,c,_,m;i=new we({props:{Icon:xt}}),r=new _l({props:{message:((I=n[16].metadata)==null?void 0:I.title)||"",render_markdown:n[3],latex_delimiters:n[2],sanitize_html:n[1],allow_tags:n[15]}});let b=((U=n[16].metadata)==null?void 0:U.status)==="pending"&&ql(),k=(((H=(q=n[16])==null?void 0:q.metadata)==null?void 0:H.log)||((z=(F=n[16])==null?void 0:F.metadata)==null?void 0:z.duration))&&Fl(n),p=n[18]&&Ul(n);return{c(){e=A("div"),l=A("div"),t=A("span"),M(i.$$.fragment),a=Y(),M(r.$$.fragment),o=Y(),b&&b.c(),s=Y(),k&&k.c(),u=Y(),p&&p.c(),this.h()},l(L){e=j(L,"DIV",{class:!0});var R=D(e);l=j(R,"DIV",{class:!0,"aria-busy":!0,role:!0,tabindex:!0});var K=D(l);t=j(K,"SPAN",{class:!0});var x=D(t);Z(i.$$.fragment,x),x.forEach(d),a=Q(K),Z(r.$$.fragment,K),o=Q(K),b&&b.l(K),s=Q(K),k&&k.l(K),K.forEach(d),u=Q(R),p&&p.l(R),R.forEach(d),this.h()},h(){h(t,"class","arrow svelte-1qn6r4f"),ge(t,"transform",n[18]?"rotate(180deg)":"rotate(0deg)"),h(l,"class","title svelte-1qn6r4f"),h(l,"aria-busy",f=n[16].content===""||n[16].content===null),h(l,"role","button"),h(l,"tabindex","0"),X(l,"expanded",n[18]),h(e,"class","thought-group svelte-1qn6r4f")},m(L,R){C(L,e,R),N(e,l),N(l,t),B(i,t,null),N(l,a),B(r,l,null),N(l,o),b&&b.m(l,null),N(l,s),k&&k.m(l,null),N(e,u),p&&p.m(e,null),c=!0,_||(m=[je(l,"click",Bt(n[19])),je(l,"keydown",n[23])],_=!0)},p(L,[R]){var x,le,P,de,S,y;R&262144&&ge(t,"transform",L[18]?"rotate(180deg)":"rotate(0deg)");const K={};R&65536&&(K.message=((x=L[16].metadata)==null?void 0:x.title)||""),R&8&&(K.render_markdown=L[3]),R&4&&(K.latex_delimiters=L[2]),R&2&&(K.sanitize_html=L[1]),R&32768&&(K.allow_tags=L[15]),r.$set(K),((le=L[16].metadata)==null?void 0:le.status)==="pending"?b||(b=ql(),b.c(),b.m(l,s)):b&&(b.d(1),b=null),(de=(P=L[16])==null?void 0:P.metadata)!=null&&de.log||(y=(S=L[16])==null?void 0:S.metadata)!=null&&y.duration?k?k.p(L,R):(k=Fl(L),k.c(),k.m(l,null)):k&&(k.d(1),k=null),(!c||R&65536&&f!==(f=L[16].content===""||L[16].content===null))&&h(l,"aria-busy",f),(!c||R&262144)&&X(l,"expanded",L[18]),L[18]?p?(p.p(L,R),R&262144&&g(p,1)):(p=Ul(L),p.c(),g(p,1),p.m(e,null)):p&&(O(),w(p,1,1,()=>{p=null}),W())},i(L){c||(g(i.$$.fragment,L),g(r.$$.fragment,L),g(p),c=!0)},o(L){w(i.$$.fragment,L),w(r.$$.fragment,L),w(p),c=!1},d(L){L&&d(e),T(i),T(r),b&&b.d(),k&&k.d(),p&&p.d(),_=!1,wt(m)}}}function yn(n){return"children"in n}function xn(n,e,l){let{thought:t}=e,{rtl:i=!1}=e,{sanitize_html:a}=e,{latex_delimiters:r}=e,{render_markdown:o}=e,{_components:s}=e,{upload:f}=e,{thought_index:u}=e,{target:c}=e,{theme_mode:_}=e,{_fetch:m}=e,{scroll:b}=e,{allow_file_downloads:k}=e,{display_consecutive_in_same_bubble:p}=e,{i18n:I}=e,{line_breaks:U}=e,{allow_tags:q=!1}=e,H,F=!1,z=!1,L,R=!1;function K(){l(18,F=!F),l(22,z=!0)}function x(){L&&!R&&l(17,L.scrollTop=L.scrollHeight,L)}function le(){L&&(L.scrollHeight-L.scrollTop<=L.clientHeight+10||(R=!0))}const P=S=>S.key==="Enter"&&K();function de(S){Qe[S?"unshift":"push"](()=>{L=S,l(17,L)})}return n.$$set=S=>{"thought"in S&&l(21,t=S.thought),"rtl"in S&&l(0,i=S.rtl),"sanitize_html"in S&&l(1,a=S.sanitize_html),"latex_delimiters"in S&&l(2,r=S.latex_delimiters),"render_markdown"in S&&l(3,o=S.render_markdown),"_components"in S&&l(4,s=S._components),"upload"in S&&l(5,f=S.upload),"thought_index"in S&&l(6,u=S.thought_index),"target"in S&&l(7,c=S.target),"theme_mode"in S&&l(8,_=S.theme_mode),"_fetch"in S&&l(9,m=S._fetch),"scroll"in S&&l(10,b=S.scroll),"allow_file_downloads"in S&&l(11,k=S.allow_file_downloads),"display_consecutive_in_same_bubble"in S&&l(12,p=S.display_consecutive_in_same_bubble),"i18n"in S&&l(13,I=S.i18n),"line_breaks"in S&&l(14,U=S.line_breaks),"allow_tags"in S&&l(15,q=S.allow_tags)},n.$$.update=()=>{var S,y;n.$$.dirty&2097152&&l(16,H={...t,children:yn(t)?t.children:[]}),n.$$.dirty&4259840&&(z||l(18,F=((S=H==null?void 0:H.metadata)==null?void 0:S.status)!=="done")),n.$$.dirty&196608&&H.content&&L&&((y=H.metadata)==null?void 0:y.status)!=="done"&&setTimeout(x,0)},[i,a,r,o,s,f,u,c,_,m,b,k,p,I,U,q,H,L,F,K,le,t,z,P,de]}class Dt extends te{constructor(e){super(),ne(this,e,xn,Qn,ie,{thought:21,rtl:0,sanitize_html:1,latex_delimiters:2,render_markdown:3,_components:4,upload:5,thought_index:6,target:7,theme_mode:8,_fetch:9,scroll:10,allow_file_downloads:11,display_consecutive_in_same_bubble:12,i18n:13,line_breaks:14,allow_tags:15})}}function Rl(n,e,l){const t=n.slice();return t[47]=e[l],t[48]=e,t[49]=l,t}function Jl(n){var i;let e,l,t;return l=new Je({props:{class:"avatar-image",src:(i=n[2])==null?void 0:i.url,alt:n[4]+" avatar"}}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(a){e=j(a,"DIV",{class:!0});var r=D(e);Z(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class","avatar-container svelte-1csv61q")},m(a,r){C(a,e,r),B(l,e,null),t=!0},p(a,r){var s;const o={};r[0]&4&&(o.src=(s=a[2])==null?void 0:s.url),r[0]&16&&(o.alt=a[4]+" avatar"),l.$set(o)},i(a){t||(g(l.$$.fragment,a),t=!0)},o(a){w(l.$$.fragment,a),t=!1},d(a){a&&d(e),T(l)}}}function $n(n){let e,l,t,i,a,r=n[49],o,s,f;const u=[ti,li],c=[];function _(I,U){var q,H;return(H=(q=I[47])==null?void 0:q.metadata)!=null&&H.title?0:1}l=_(n),t=c[l]=u[l](n);const m=()=>n[43](e,r),b=()=>n[43](null,r);function k(){return n[44](n[47])}function p(...I){return n[45](n[47],...I)}return{c(){e=A("div"),t.c(),this.h()},l(I){e=j(I,"DIV",{"data-testid":!0,dir:!0,"aria-label":!0,class:!0});var U=D(e);t.l(U),U.forEach(d),this.h()},h(){h(e,"data-testid",n[4]),h(e,"dir",i=n[12]?"rtl":"ltr"),h(e,"aria-label",a=n[4]+"'s message: "+Yl(n[47])),h(e,"class","svelte-1csv61q"),X(e,"latest",n[20]===n[1].length-1),X(e,"message-markdown-disabled",!n[7]),X(e,"selectable",n[10]),ge(e,"user-select","text"),ge(e,"cursor",n[10]?"pointer":"auto"),ge(e,"text-align",n[12]?"right":"left")},m(I,U){C(I,e,U),c[l].m(e,null),m(),o=!0,s||(f=[je(e,"click",k),je(e,"keydown",p)],s=!0)},p(I,U){n=I;let q=l;l=_(n),l===q?c[l].p(n,U):(O(),w(c[q],1,1,()=>{c[q]=null}),W(),t=c[l],t?t.p(n,U):(t=c[l]=u[l](n),t.c()),g(t,1),t.m(e,null)),(!o||U[0]&16)&&h(e,"data-testid",n[4]),(!o||U[0]&4096&&i!==(i=n[12]?"rtl":"ltr"))&&h(e,"dir",i),(!o||U[0]&48&&a!==(a=n[4]+"'s message: "+Yl(n[47])))&&h(e,"aria-label",a),r!==n[49]&&(b(),r=n[49],m()),(!o||U[0]&1048578)&&X(e,"latest",n[20]===n[1].length-1),(!o||U[0]&128)&&X(e,"message-markdown-disabled",!n[7]),(!o||U[0]&1024)&&X(e,"selectable",n[10]),U[0]&1024&&ge(e,"cursor",n[10]?"pointer":"auto"),U[0]&4096&&ge(e,"text-align",n[12]?"right":"left")},i(I){o||(g(t),o=!0)},o(I){w(t),o=!1},d(I){I&&d(e),c[l].d(),b(),s=!1,wt(f)}}}function ei(n){let e,l,t;function i(){n[42].call(e,n[49])}return{c(){e=A("textarea"),this.h()},l(a){e=j(a,"TEXTAREA",{class:!0}),D(e).forEach(d),this.h()},h(){h(e,"class","edit-textarea svelte-1csv61q"),e.autofocus=!0,ge(e,"width",`max(${n[29][n[49]]}px, 160px)`),ge(e,"min-height",`${n[30][n[49]]}px`)},m(a,r){C(a,e,r),hl(e,n[0][n[49]]),e.focus(),l||(t=je(e,"input",i),l=!0)},p(a,r){n=a,r[0]&1&&hl(e,n[0][n[49]]),r[0]&536870912&&ge(e,"width",`max(${n[29][n[49]]}px, 160px)`),r[0]&1073741824&&ge(e,"min-height",`${n[30][n[49]]}px`)},i:J,o:J,d(a){a&&d(e),l=!1,t()}}}function li(n){let e,l;return e=new It({props:{message:n[47],sanitize_html:n[9],allow_tags:n[26],latex_delimiters:n[8],render_markdown:n[7],_components:n[19],upload:n[16],thought_index:n[49],target:n[17],theme_mode:n[18],_fetch:n[11],scroll:n[21],allow_file_downloads:n[22],display_consecutive_in_same_bubble:n[24],i18n:n[14],line_breaks:n[15]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&32&&(a.message=t[47]),i[0]&512&&(a.sanitize_html=t[9]),i[0]&67108864&&(a.allow_tags=t[26]),i[0]&256&&(a.latex_delimiters=t[8]),i[0]&128&&(a.render_markdown=t[7]),i[0]&524288&&(a._components=t[19]),i[0]&65536&&(a.upload=t[16]),i[0]&131072&&(a.target=t[17]),i[0]&262144&&(a.theme_mode=t[18]),i[0]&2048&&(a._fetch=t[11]),i[0]&2097152&&(a.scroll=t[21]),i[0]&4194304&&(a.allow_file_downloads=t[22]),i[0]&16777216&&(a.display_consecutive_in_same_bubble=t[24]),i[0]&16384&&(a.i18n=t[14]),i[0]&32768&&(a.line_breaks=t[15]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ti(n){let e,l;return e=new Dt({props:{thought:n[47],rtl:n[12],sanitize_html:n[9],allow_tags:n[26],latex_delimiters:n[8],render_markdown:n[7],_components:n[19],upload:n[16],thought_index:n[49],target:n[17],theme_mode:n[18],_fetch:n[11],scroll:n[21],allow_file_downloads:n[22],display_consecutive_in_same_bubble:n[24],i18n:n[14],line_breaks:n[15]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&32&&(a.thought=t[47]),i[0]&4096&&(a.rtl=t[12]),i[0]&512&&(a.sanitize_html=t[9]),i[0]&67108864&&(a.allow_tags=t[26]),i[0]&256&&(a.latex_delimiters=t[8]),i[0]&128&&(a.render_markdown=t[7]),i[0]&524288&&(a._components=t[19]),i[0]&65536&&(a.upload=t[16]),i[0]&131072&&(a.target=t[17]),i[0]&262144&&(a.theme_mode=t[18]),i[0]&2048&&(a._fetch=t[11]),i[0]&2097152&&(a.scroll=t[21]),i[0]&4194304&&(a.allow_file_downloads=t[22]),i[0]&16777216&&(a.display_consecutive_in_same_bubble=t[24]),i[0]&16384&&(a.i18n=t[14]),i[0]&32768&&(a.line_breaks=t[15]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Gl(n){let e,l;const t=[n[31],{current_feedback:n[25]},{watermark:n[27]},{i18n:n[14]}];let i={};for(let a=0;a<t.length;a+=1)i=_e(i,t[a]);return e=new Vt({props:i}),e.$on("copy",n[46]),{c(){M(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){B(e,a,r),l=!0},p(a,r){const o=r[0]&167788544|r[1]&1?fe(t,[r[1]&1&&ae(a[31]),r[0]&33554432&&{current_feedback:a[25]},r[0]&134217728&&{watermark:a[27]},r[0]&16384&&{i18n:a[14]}]):{};e.$set(o)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){T(e,a)}}}function Kl(n){let e,l,t,i,a,r,o;const s=[ei,$n],f=[];function u(_,m){return _[23]&&_[47].type==="text"?0:1}l=u(n),t=f[l]=s[l](n);let c=n[6]==="panel"&&Gl(n);return{c(){e=A("div"),t.c(),a=Y(),c&&c.c(),r=G(),this.h()},l(_){e=j(_,"DIV",{class:!0});var m=D(e);t.l(m),m.forEach(d),a=Q(_),c&&c.l(_),r=G(),this.h()},h(){h(e,"class",i="message "+(n[24]?"":n[4])+" svelte-1csv61q"),X(e,"panel-full-width",!0),X(e,"message-markdown-disabled",!n[7]),X(e,"component",n[47].type==="component"),X(e,"html",gl(n[47])&&n[47].content.component==="html"),X(e,"thought",n[49]>0)},m(_,m){C(_,e,m),f[l].m(e,null),C(_,a,m),c&&c.m(_,m),C(_,r,m),o=!0},p(_,m){let b=l;l=u(_),l===b?f[l].p(_,m):(O(),w(f[b],1,1,()=>{f[b]=null}),W(),t=f[l],t?t.p(_,m):(t=f[l]=s[l](_),t.c()),g(t,1),t.m(e,null)),(!o||m[0]&16777232&&i!==(i="message "+(_[24]?"":_[4])+" svelte-1csv61q"))&&h(e,"class",i),(!o||m[0]&16777232)&&X(e,"panel-full-width",!0),(!o||m[0]&16777360)&&X(e,"message-markdown-disabled",!_[7]),(!o||m[0]&16777264)&&X(e,"component",_[47].type==="component"),(!o||m[0]&16777264)&&X(e,"html",gl(_[47])&&_[47].content.component==="html"),(!o||m[0]&16777232)&&X(e,"thought",_[49]>0),_[6]==="panel"?c?(c.p(_,m),m[0]&64&&g(c,1)):(c=Gl(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(O(),w(c,1,1,()=>{c=null}),W())},i(_){o||(g(t),g(c),o=!0)},o(_){w(t),w(c),o=!1},d(_){_&&(d(e),d(a),d(r)),f[l].d(),c&&c.d(_)}}}function Xl(n){let e,l;const t=[n[31],{i18n:n[14]}];let i={};for(let a=0;a<t.length;a+=1)i=_e(i,t[a]);return e=new Vt({props:i}),{c(){M(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){B(e,a,r),l=!0},p(a,r){const o=r[0]&16384|r[1]&1?fe(t,[r[1]&1&&ae(a[31]),r[0]&16384&&{i18n:a[14]}]):{};e.$set(o)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){T(e,a)}}}function ni(n){let e,l,t,i,a,r,o,s,f,u=n[2]!==null&&Jl(n),c=be(n[5]),_=[];for(let k=0;k<c.length;k+=1)_[k]=Kl(Rl(n,c,k));const m=k=>w(_[k],1,1,()=>{_[k]=null});let b=n[6]==="bubble"&&Xl(n);return{c(){e=A("div"),u&&u.c(),l=Y(),t=A("div"),i=A("div");for(let k=0;k<_.length;k+=1)_[k].c();o=Y(),b&&b.c(),s=G(),this.h()},l(k){e=j(k,"DIV",{class:!0});var p=D(e);u&&u.l(p),l=Q(p),t=j(p,"DIV",{class:!0});var I=D(t);i=j(I,"DIV",{class:!0});var U=D(i);for(let q=0;q<_.length;q+=1)_[q].l(U);U.forEach(d),I.forEach(d),p.forEach(d),o=Q(k),b&&b.l(k),s=G(),this.h()},h(){h(i,"class",a=Ke(n[24]?n[4]:"")+" svelte-1csv61q"),X(i,"message",n[24]),h(t,"class","flex-wrap svelte-1csv61q"),X(t,"role",n[4]),X(t,"component-wrap",n[5][0].type==="component"),h(e,"class",r="message-row "+n[6]+" "+n[4]+"-row svelte-1csv61q"),X(e,"with_avatar",n[2]!==null),X(e,"with_opposite_avatar",n[3]!==null)},m(k,p){C(k,e,p),u&&u.m(e,null),N(e,l),N(e,t),N(t,i);for(let I=0;I<_.length;I+=1)_[I]&&_[I].m(i,null);C(k,o,p),b&&b.m(k,p),C(k,s,p),f=!0},p(k,p){if(k[2]!==null?u?(u.p(k,p),p[0]&4&&g(u,1)):(u=Jl(k),u.c(),g(u,1),u.m(e,l)):u&&(O(),w(u,1,1,()=>{u=null}),W()),p[0]&2147483635|p[1]&3){c=be(k[5]);let I;for(I=0;I<c.length;I+=1){const U=Rl(k,c,I);_[I]?(_[I].p(U,p),g(_[I],1)):(_[I]=Kl(U),_[I].c(),g(_[I],1),_[I].m(i,null))}for(O(),I=c.length;I<_.length;I+=1)m(I);W()}(!f||p[0]&16777232&&a!==(a=Ke(k[24]?k[4]:"")+" svelte-1csv61q"))&&h(i,"class",a),(!f||p[0]&16777232)&&X(i,"message",k[24]),(!f||p[0]&16)&&X(t,"role",k[4]),(!f||p[0]&32)&&X(t,"component-wrap",k[5][0].type==="component"),(!f||p[0]&80&&r!==(r="message-row "+k[6]+" "+k[4]+"-row svelte-1csv61q"))&&h(e,"class",r),(!f||p[0]&84)&&X(e,"with_avatar",k[2]!==null),(!f||p[0]&88)&&X(e,"with_opposite_avatar",k[3]!==null),k[6]==="bubble"?b?(b.p(k,p),p[0]&64&&g(b,1)):(b=Xl(k),b.c(),g(b,1),b.m(s.parentNode,s)):b&&(O(),w(b,1,1,()=>{b=null}),W())},i(k){if(!f){g(u);for(let p=0;p<c.length;p+=1)g(_[p]);g(b),f=!0}},o(k){w(u),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)w(_[p]);w(b),f=!1},d(k){k&&(d(e),d(o),d(s)),u&&u.d(),We(_,k),b&&b.d(k)}}}let ii=!1;function Yl(n){var e,l,t,i;return n.type==="text"?n.content:n.type==="component"&&n.content.component==="file"?Array.isArray(n.content.value)?`file of extension type: ${(e=n.content.value[0].orig_name)==null?void 0:e.split(".").pop()}`:`file of extension type: ${(t=(l=n.content.value)==null?void 0:l.orig_name)==null?void 0:t.split(".").pop()}`+(((i=n.content.value)==null?void 0:i.orig_name)??""):`a component of type ${n.content.component??"unknown"}`}function ai(n,e,l){let{value:t}=e,{avatar_img:i}=e,{opposite_avatar_img:a=null}=e,{role:r="user"}=e,{messages:o=[]}=e,{layout:s}=e,{render_markdown:f}=e,{latex_delimiters:u}=e,{sanitize_html:c}=e,{selectable:_}=e,{_fetch:m}=e,{rtl:b}=e,{dispatch:k}=e,{i18n:p}=e,{line_breaks:I}=e,{upload:U}=e,{target:q}=e,{theme_mode:H}=e,{_components:F}=e,{i:z}=e,{show_copy_button:L}=e,{generating:R}=e,{feedback_options:K}=e,{show_like:x}=e,{show_edit:le}=e,{show_retry:P}=e,{show_undo:de}=e,{msg_format:S}=e,{handle_action:y}=e,{scroll:Se}=e,{allow_file_downloads:qe}=e,{in_edit_mode:De}=e,{edit_messages:Ce}=e,{display_consecutive_in_same_bubble:ze}=e,{current_feedback:He=null}=e,{allow_tags:Fe=!1}=e,{watermark:Le=null}=e,ke=[],Ne=Array(o.length).fill(160),Me=Array(o.length).fill(0);function Be(V,me){k("select",{index:me.index,value:me.content})}let Ze;function Te(V){Ce[V]=this.value,l(0,Ce)}function Ve(V,me){Qe[V?"unshift":"push"](()=>{ke[me]=V,l(28,ke)})}const oe=V=>Be(z,V),Pe=(V,me)=>{me.key==="Enter"&&Be(z,V)},ue=V=>k("copy",V.detail);return n.$$set=V=>{"value"in V&&l(1,t=V.value),"avatar_img"in V&&l(2,i=V.avatar_img),"opposite_avatar_img"in V&&l(3,a=V.opposite_avatar_img),"role"in V&&l(4,r=V.role),"messages"in V&&l(5,o=V.messages),"layout"in V&&l(6,s=V.layout),"render_markdown"in V&&l(7,f=V.render_markdown),"latex_delimiters"in V&&l(8,u=V.latex_delimiters),"sanitize_html"in V&&l(9,c=V.sanitize_html),"selectable"in V&&l(10,_=V.selectable),"_fetch"in V&&l(11,m=V._fetch),"rtl"in V&&l(12,b=V.rtl),"dispatch"in V&&l(13,k=V.dispatch),"i18n"in V&&l(14,p=V.i18n),"line_breaks"in V&&l(15,I=V.line_breaks),"upload"in V&&l(16,U=V.upload),"target"in V&&l(17,q=V.target),"theme_mode"in V&&l(18,H=V.theme_mode),"_components"in V&&l(19,F=V._components),"i"in V&&l(20,z=V.i),"show_copy_button"in V&&l(33,L=V.show_copy_button),"generating"in V&&l(34,R=V.generating),"feedback_options"in V&&l(35,K=V.feedback_options),"show_like"in V&&l(36,x=V.show_like),"show_edit"in V&&l(37,le=V.show_edit),"show_retry"in V&&l(38,P=V.show_retry),"show_undo"in V&&l(39,de=V.show_undo),"msg_format"in V&&l(40,S=V.msg_format),"handle_action"in V&&l(41,y=V.handle_action),"scroll"in V&&l(21,Se=V.scroll),"allow_file_downloads"in V&&l(22,qe=V.allow_file_downloads),"in_edit_mode"in V&&l(23,De=V.in_edit_mode),"edit_messages"in V&&l(0,Ce=V.edit_messages),"display_consecutive_in_same_bubble"in V&&l(24,ze=V.display_consecutive_in_same_bubble),"current_feedback"in V&&l(25,He=V.current_feedback),"allow_tags"in V&&l(26,Fe=V.allow_tags),"watermark"in V&&l(27,Le=V.watermark)},n.$$.update=()=>{var V,me;if(n.$$.dirty[0]&276824096&&De&&!ii){const Ue=ke.length-o.length;for(let ve=Ue;ve<ke.length;ve++)ve>=0&&(l(29,Ne[ve-Ue]=(V=ke[ve])==null?void 0:V.clientWidth,Ne),l(30,Me[ve-Ue]=(me=ke[ve])==null?void 0:me.clientHeight,Me))}n.$$.dirty[0]&176169076|n.$$.dirty[1]&2044&&l(31,Ze={handle_action:y,likeable:x,feedback_options:K,show_retry:P,show_undo:de,show_edit:le,in_edit_mode:De,generating:R,show_copy_button:L,message:S==="tuples"?o[0]:o,position:r==="user"?"right":"left",avatar:i,layout:s,dispatch:k,current_feedback:He,watermark:Le})},[Ce,t,i,a,r,o,s,f,u,c,_,m,b,k,p,I,U,q,H,F,z,Se,qe,De,ze,He,Fe,Le,ke,Ne,Me,Ze,Be,L,R,K,x,le,P,de,S,y,Te,Ve,oe,Pe,ue]}class oi extends te{constructor(e){super(),ne(this,e,ai,ni,ie,{value:1,avatar_img:2,opposite_avatar_img:3,role:4,messages:5,layout:6,render_markdown:7,latex_delimiters:8,sanitize_html:9,selectable:10,_fetch:11,rtl:12,dispatch:13,i18n:14,line_breaks:15,upload:16,target:17,theme_mode:18,_components:19,i:20,show_copy_button:33,generating:34,feedback_options:35,show_like:36,show_edit:37,show_retry:38,show_undo:39,msg_format:40,handle_action:41,scroll:21,allow_file_downloads:22,in_edit_mode:23,edit_messages:0,display_consecutive_in_same_bubble:24,current_feedback:25,allow_tags:26,watermark:27},null,[-1,-1])}}function Ql(n){let e,l,t;return l=new Je({props:{class:"avatar-image",src:n[1][1].url,alt:"bot avatar"}}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);Z(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","avatar-container svelte-134ihlx")},m(i,a){C(i,e,a),B(l,e,null),t=!0},p(i,a){const r={};a&2&&(r.src=i[1][1].url),l.$set(r)},i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){w(l.$$.fragment,i),t=!1},d(i){i&&d(e),T(l)}}}function si(n){let e,l,t,i,a='<span class="sr-only">Loading content</span> <div class="dots svelte-134ihlx"><div class="dot svelte-134ihlx"></div> <div class="dot svelte-134ihlx"></div> <div class="dot svelte-134ihlx"></div></div>',r,o,s=n[1][1]!==null&&Ql(n);return{c(){e=A("div"),s&&s.c(),l=Y(),t=A("div"),i=A("div"),i.innerHTML=a,this.h()},l(f){e=j(f,"DIV",{class:!0});var u=D(e);s&&s.l(u),l=Q(u),t=j(u,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-live":!0});var c=D(t);i=j(c,"DIV",{class:!0,"data-svelte-h":!0}),kt(i)!=="svelte-1vfby8"&&(i.innerHTML=a),c.forEach(d),u.forEach(d),this.h()},h(){h(i,"class","message-content svelte-134ihlx"),h(t,"class",r="message bot pending "+n[0]+" svelte-134ihlx"),h(t,"role","status"),h(t,"aria-label","Loading response"),h(t,"aria-live","polite"),X(t,"with_avatar",n[1][1]!==null),X(t,"with_opposite_avatar",n[1][0]!==null),h(e,"class","container svelte-134ihlx")},m(f,u){C(f,e,u),s&&s.m(e,null),N(e,l),N(e,t),N(t,i),o=!0},p(f,[u]){f[1][1]!==null?s?(s.p(f,u),u&2&&g(s,1)):(s=Ql(f),s.c(),g(s,1),s.m(e,l)):s&&(O(),w(s,1,1,()=>{s=null}),W()),(!o||u&1&&r!==(r="message bot pending "+f[0]+" svelte-134ihlx"))&&h(t,"class",r),(!o||u&3)&&X(t,"with_avatar",f[1][1]!==null),(!o||u&3)&&X(t,"with_opposite_avatar",f[1][0]!==null)},i(f){o||(g(s),o=!0)},o(f){w(s),o=!1},d(f){f&&d(e),s&&s.d()}}}function ri(n,e,l){let{layout:t="bubble"}=e,{avatar_images:i=[null,null]}=e;return n.$$set=a=>{"layout"in a&&l(0,t=a.layout),"avatar_images"in a&&l(1,i=a.avatar_images)},[t,i]}class zt extends te{constructor(e){super(),ne(this,e,ri,si,ie,{layout:0,avatar_images:1})}}function yl(n,e,l){const t=n.slice();return t[6]=e[l],t[8]=l,t}function xl(n,e,l){const t=n.slice();return t[9]=e[l],t[8]=l,t}function $l(n){let e,l,t;return l=new _l({props:{message:n[1],latex_delimiters:n[2]}}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);Z(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","placeholder svelte-rodltw")},m(i,a){C(i,e,a),B(l,e,null),t=!0},p(i,a){const r={};a&2&&(r.message=i[1]),a&4&&(r.latex_delimiters=i[2]),l.$set(r)},i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){w(l.$$.fragment,i),t=!1},d(i){i&&d(e),T(l)}}}function et(n){let e,l,t=be(n[0]),i=[];for(let r=0;r<t.length;r+=1)i[r]=at(yl(n,t,r));const a=r=>w(i[r],1,1,()=>{i[r]=null});return{c(){e=A("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=j(r,"DIV",{class:!0,role:!0});var o=D(e);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(d),this.h()},h(){h(e,"class","examples svelte-rodltw"),h(e,"role","list")},m(r,o){C(r,e,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);l=!0},p(r,o){if(o&9){t=be(r[0]);let s;for(s=0;s<t.length;s+=1){const f=yl(r,t,s);i[s]?(i[s].p(f,o),g(i[s],1)):(i[s]=at(f),i[s].c(),g(i[s],1),i[s].m(e,null))}for(O(),s=t.length;s<i.length;s+=1)a(s);W()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)g(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);l=!1},d(r){r&&d(e),We(i,r)}}}function fi(n){let e,l,t,i,a,r,o;const s=[gi,di,mi,hi,ci],f=[];function u(c,_){var m,b,k;return _&1&&(e=null),_&1&&(l=null),_&1&&(t=null),c[6].files.length>1?0:(e==null&&(e=!!((m=c[6].files[0].mime_type)!=null&&m.includes("image"))),e?1:(l==null&&(l=!!((b=c[6].files[0].mime_type)!=null&&b.includes("video"))),l?2:(t==null&&(t=!!((k=c[6].files[0].mime_type)!=null&&k.includes("audio"))),t?3:4)))}return i=u(n,-1),a=f[i]=s[i](n),{c(){a.c(),r=G()},l(c){a.l(c),r=G()},m(c,_){f[i].m(c,_),C(c,r,_),o=!0},p(c,_){let m=i;i=u(c,_),i===m?f[i].p(c,_):(O(),w(f[m],1,1,()=>{f[m]=null}),W(),a=f[i],a?a.p(c,_):(a=f[i]=s[i](c),a.c()),g(a,1),a.m(r.parentNode,r))},i(c){o||(g(a),o=!0)},o(c){w(a),o=!1},d(c){c&&d(r),f[i].d(c)}}}function _i(n){let e,l='<span class="text-icon-aa svelte-rodltw">Aa</span>';return{c(){e=A("div"),e.innerHTML=l,this.h()},l(t){e=j(t,"DIV",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),kt(e)!=="svelte-15cq9iz"&&(e.innerHTML=l),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-hidden","true")},m(t,i){C(t,e,i)},p:J,i:J,o:J,d(t){t&&d(e)}}}function ui(n){let e,l,t;return l=new Je({props:{class:"example-image",src:n[6].icon.url,alt:"Example icon"}}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);Z(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","example-image-container svelte-rodltw")},m(i,a){C(i,e,a),B(l,e,null),t=!0},p(i,a){const r={};a&1&&(r.src=i[6].icon.url),l.$set(r)},i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){w(l.$$.fragment,i),t=!1},d(i){i&&d(e),T(l)}}}function ci(n){let e,l,t,i;return l=new ul({}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(a){e=j(a,"DIV",{class:!0,"aria-label":!0});var r=D(e);Z(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-label",t=`File: ${n[6].files[0].orig_name}`)},m(a,r){C(a,e,r),B(l,e,null),i=!0},p(a,r){(!i||r&1&&t!==(t=`File: ${a[6].files[0].orig_name}`))&&h(e,"aria-label",t)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){w(l.$$.fragment,a),i=!1},d(a){a&&d(e),T(l)}}}function hi(n){let e,l,t,i;return l=new pt({}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(a){e=j(a,"DIV",{class:!0,"aria-label":!0});var r=D(e);Z(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-label",t=`File: ${n[6].files[0].orig_name}`)},m(a,r){C(a,e,r),B(l,e,null),i=!0},p(a,r){(!i||r&1&&t!==(t=`File: ${a[6].files[0].orig_name}`))&&h(e,"aria-label",t)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){w(l.$$.fragment,a),i=!1},d(a){a&&d(e),T(l)}}}function mi(n){let e,l,t;return{c(){e=A("div"),l=A("video"),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);l=j(a,"VIDEO",{class:!0,src:!0,"aria-hidden":!0}),D(l).forEach(d),a.forEach(d),this.h()},h(){h(l,"class","example-image"),Xe(l.src,t=n[6].files[0].url)||h(l,"src",t),h(l,"aria-hidden","true"),h(e,"class","example-image-container svelte-rodltw")},m(i,a){C(i,e,a),N(e,l)},p(i,a){a&1&&!Xe(l.src,t=i[6].files[0].url)&&h(l,"src",t)},i:J,o:J,d(i){i&&d(e)}}}function di(n){let e,l,t;return l=new Je({props:{class:"example-image",src:n[6].files[0].url,alt:n[6].files[0].orig_name||"Example image"}}),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);Z(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","example-image-container svelte-rodltw")},m(i,a){C(i,e,a),B(l,e,null),t=!0},p(i,a){const r={};a&1&&(r.src=i[6].files[0].url),a&1&&(r.alt=i[6].files[0].orig_name||"Example image"),l.$set(r)},i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){w(l.$$.fragment,i),t=!1},d(i){i&&d(e),T(l)}}}function gi(n){let e,l,t,i=be(n[6].files.slice(0,4)),a=[];for(let s=0;s<i.length;s+=1)a[s]=nt(xl(n,i,s));const r=s=>w(a[s],1,1,()=>{a[s]=null});let o=n[6].files.length>4&&it(n);return{c(){e=A("div");for(let s=0;s<a.length;s+=1)a[s].c();l=Y(),o&&o.c(),this.h()},l(s){e=j(s,"DIV",{class:!0,role:!0,"aria-label":!0});var f=D(e);for(let u=0;u<a.length;u+=1)a[u].l(f);l=Q(f),o&&o.l(f),f.forEach(d),this.h()},h(){h(e,"class","example-icons-grid svelte-rodltw"),h(e,"role","group"),h(e,"aria-label","Example attachments")},m(s,f){C(s,e,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);N(e,l),o&&o.m(e,null),t=!0},p(s,f){if(f&1){i=be(s[6].files.slice(0,4));let u;for(u=0;u<i.length;u+=1){const c=xl(s,i,u);a[u]?(a[u].p(c,f),g(a[u],1)):(a[u]=nt(c),a[u].c(),g(a[u],1),a[u].m(e,l))}for(O(),u=i.length;u<a.length;u+=1)r(u);W()}s[6].files.length>4?o?o.p(s,f):(o=it(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(s){if(!t){for(let f=0;f<i.length;f+=1)g(a[f]);t=!0}},o(s){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);t=!1},d(s){s&&d(e),We(a,s),o&&o.d()}}}function bi(n){let e,l,t,i,a,r;const o=[pi,vi],s=[];function f(u,c){var _;return c&1&&(l=null),l==null&&(l=!!((_=u[9].mime_type)!=null&&_.includes("audio"))),l?0:1}return t=f(n,-1),i=s[t]=o[t](n),{c(){e=A("div"),i.c(),this.h()},l(u){e=j(u,"DIV",{class:!0,"aria-label":!0});var c=D(e);i.l(c),c.forEach(d),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-label",a=`File: ${n[9].orig_name}`)},m(u,c){C(u,e,c),s[t].m(e,null),r=!0},p(u,c){let _=t;t=f(u,c),t!==_&&(O(),w(s[_],1,1,()=>{s[_]=null}),W(),i=s[t],i||(i=s[t]=o[t](u),i.c()),g(i,1),i.m(e,null)),(!r||c&1&&a!==(a=`File: ${u[9].orig_name}`))&&h(e,"aria-label",a)},i(u){r||(g(i),r=!0)},o(u){w(i),r=!1},d(u){u&&d(e),s[t].d()}}}function wi(n){let e,l,t,i,a=n[8]===3&&n[6].files.length>4&&lt(n);return{c(){e=A("div"),l=A("video"),i=Y(),a&&a.c(),this.h()},l(r){e=j(r,"DIV",{class:!0});var o=D(e);l=j(o,"VIDEO",{class:!0,src:!0,"aria-hidden":!0}),D(l).forEach(d),i=Q(o),a&&a.l(o),o.forEach(d),this.h()},h(){h(l,"class","example-image"),Xe(l.src,t=n[9].url)||h(l,"src",t),h(l,"aria-hidden","true"),h(e,"class","example-image-container svelte-rodltw")},m(r,o){C(r,e,o),N(e,l),N(e,i),a&&a.m(e,null)},p(r,o){o&1&&!Xe(l.src,t=r[9].url)&&h(l,"src",t),r[8]===3&&r[6].files.length>4?a?a.p(r,o):(a=lt(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:J,o:J,d(r){r&&d(e),a&&a.d()}}}function ki(n){let e,l,t,i;l=new Je({props:{class:"example-image",src:n[9].url,alt:n[9].orig_name||`Example image ${n[8]+1}`}});let a=n[8]===3&&n[6].files.length>4&&tt(n);return{c(){e=A("div"),M(l.$$.fragment),t=Y(),a&&a.c(),this.h()},l(r){e=j(r,"DIV",{class:!0});var o=D(e);Z(l.$$.fragment,o),t=Q(o),a&&a.l(o),o.forEach(d),this.h()},h(){h(e,"class","example-image-container svelte-rodltw")},m(r,o){C(r,e,o),B(l,e,null),N(e,t),a&&a.m(e,null),i=!0},p(r,o){const s={};o&1&&(s.src=r[9].url),o&1&&(s.alt=r[9].orig_name||`Example image ${r[8]+1}`),l.$set(s),r[8]===3&&r[6].files.length>4?a?a.p(r,o):(a=tt(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(r){i||(g(l.$$.fragment,r),i=!0)},o(r){w(l.$$.fragment,r),i=!1},d(r){r&&d(e),T(l),a&&a.d()}}}function vi(n){let e,l;return e=new ul({}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function pi(n){let e,l;return e=new pt({}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function lt(n){let e,l,t=n[6].files.length-4+"",i,a;return{c(){e=A("div"),l=se("+"),i=se(t),this.h()},l(r){e=j(r,"DIV",{class:!0,role:!0,"aria-label":!0});var o=D(e);l=re(o,"+"),i=re(o,t),o.forEach(d),this.h()},h(){h(e,"class","image-overlay svelte-rodltw"),h(e,"role","status"),h(e,"aria-label",a=`${n[6].files.length-4} more files`)},m(r,o){C(r,e,o),N(e,l),N(e,i)},p(r,o){o&1&&t!==(t=r[6].files.length-4+"")&&Ee(i,t),o&1&&a!==(a=`${r[6].files.length-4} more files`)&&h(e,"aria-label",a)},d(r){r&&d(e)}}}function tt(n){let e,l,t=n[6].files.length-4+"",i,a;return{c(){e=A("div"),l=se("+"),i=se(t),this.h()},l(r){e=j(r,"DIV",{class:!0,role:!0,"aria-label":!0});var o=D(e);l=re(o,"+"),i=re(o,t),o.forEach(d),this.h()},h(){h(e,"class","image-overlay svelte-rodltw"),h(e,"role","status"),h(e,"aria-label",a=`${n[6].files.length-4} more files`)},m(r,o){C(r,e,o),N(e,l),N(e,i)},p(r,o){o&1&&t!==(t=r[6].files.length-4+"")&&Ee(i,t),o&1&&a!==(a=`${r[6].files.length-4} more files`)&&h(e,"aria-label",a)},d(r){r&&d(e)}}}function nt(n){let e,l,t,i,a,r;const o=[ki,wi,bi],s=[];function f(u,c){var _,m;return c&1&&(e=null),c&1&&(l=null),e==null&&(e=!!((_=u[9].mime_type)!=null&&_.includes("image"))),e?0:(l==null&&(l=!!((m=u[9].mime_type)!=null&&m.includes("video"))),l?1:2)}return t=f(n,-1),i=s[t]=o[t](n),{c(){i.c(),a=G()},l(u){i.l(u),a=G()},m(u,c){s[t].m(u,c),C(u,a,c),r=!0},p(u,c){let _=t;t=f(u,c),t===_?s[t].p(u,c):(O(),w(s[_],1,1,()=>{s[_]=null}),W(),i=s[t],i?i.p(u,c):(i=s[t]=o[t](u),i.c()),g(i,1),i.m(a.parentNode,a))},i(u){r||(g(i),r=!0)},o(u){w(i),r=!1},d(u){u&&d(a),s[t].d(u)}}}function it(n){let e,l,t,i=n[6].files.length-4+"",a,r;return{c(){e=A("div"),l=A("div"),t=se("+"),a=se(i),this.h()},l(o){e=j(o,"DIV",{class:!0});var s=D(e);l=j(s,"DIV",{class:!0,role:!0,"aria-label":!0});var f=D(l);t=re(f,"+"),a=re(f,i),f.forEach(d),s.forEach(d),this.h()},h(){h(l,"class","file-overlay svelte-rodltw"),h(l,"role","status"),h(l,"aria-label",r=`${n[6].files.length-4} more files`),h(e,"class","example-icon svelte-rodltw")},m(o,s){C(o,e,s),N(e,l),N(l,t),N(l,a)},p(o,s){s&1&&i!==(i=o[6].files.length-4+"")&&Ee(a,i),s&1&&r!==(r=`${o[6].files.length-4} more files`)&&h(l,"aria-label",r)},d(o){o&&d(e)}}}function at(n){let e,l,t,i,a,r,o,s=(n[6].display_text||n[6].text)+"",f,u,c,_,m,b;const k=[ui,_i,fi],p=[];function I(q,H){var F,z,L,R;return(z=(F=q[6])==null?void 0:F.icon)!=null&&z.url?0:((R=(L=q[6])==null?void 0:L.icon)==null?void 0:R.mime_type)==="text"?1:q[6].files!==void 0&&q[6].files.length>0?2:-1}~(t=I(n))&&(i=p[t]=k[t](n));function U(){return n[4](n[8],n[6])}return{c(){e=A("button"),l=A("div"),i&&i.c(),a=Y(),r=A("div"),o=A("span"),f=se(s),u=Y(),this.h()},l(q){e=j(q,"BUTTON",{class:!0,"aria-label":!0});var H=D(e);l=j(H,"DIV",{class:!0});var F=D(l);i&&i.l(F),a=Q(F),r=j(F,"DIV",{class:!0});var z=D(r);o=j(z,"SPAN",{class:!0});var L=D(o);f=re(L,s),L.forEach(d),z.forEach(d),F.forEach(d),u=Q(H),H.forEach(d),this.h()},h(){h(o,"class","example-text svelte-rodltw"),h(r,"class","example-text-content svelte-rodltw"),h(l,"class","example-content svelte-rodltw"),h(e,"class","example svelte-rodltw"),h(e,"aria-label",c=`Select example ${n[8]+1}: ${n[6].display_text||n[6].text}`)},m(q,H){C(q,e,H),N(e,l),~t&&p[t].m(l,null),N(l,a),N(l,r),N(r,o),N(o,f),N(e,u),_=!0,m||(b=je(e,"click",U),m=!0)},p(q,H){n=q;let F=t;t=I(n),t===F?~t&&p[t].p(n,H):(i&&(O(),w(p[F],1,1,()=>{p[F]=null}),W()),~t?(i=p[t],i?i.p(n,H):(i=p[t]=k[t](n),i.c()),g(i,1),i.m(l,a)):i=null),(!_||H&1)&&s!==(s=(n[6].display_text||n[6].text)+"")&&Ee(f,s),(!_||H&1&&c!==(c=`Select example ${n[8]+1}: ${n[6].display_text||n[6].text}`))&&h(e,"aria-label",c)},i(q){_||(g(i),_=!0)},o(q){w(i),_=!1},d(q){q&&d(e),~t&&p[t].d(),m=!1,b()}}}function Ei(n){let e,l,t,i=n[1]!==null&&$l(n),a=n[0]!==null&&et(n);return{c(){e=A("div"),i&&i.c(),l=Y(),a&&a.c(),this.h()},l(r){e=j(r,"DIV",{class:!0,role:!0});var o=D(e);i&&i.l(o),l=Q(o),a&&a.l(o),o.forEach(d),this.h()},h(){h(e,"class","placeholder-content svelte-rodltw"),h(e,"role","complementary")},m(r,o){C(r,e,o),i&&i.m(e,null),N(e,l),a&&a.m(e,null),t=!0},p(r,[o]){r[1]!==null?i?(i.p(r,o),o&2&&g(i,1)):(i=$l(r),i.c(),g(i,1),i.m(e,l)):i&&(O(),w(i,1,1,()=>{i=null}),W()),r[0]!==null?a?(a.p(r,o),o&1&&g(a,1)):(a=et(r),a.c(),g(a,1),a.m(e,null)):a&&(O(),w(a,1,1,()=>{a=null}),W())},i(r){t||(g(i),g(a),t=!0)},o(r){w(i),w(a),t=!1},d(r){r&&d(e),i&&i.d(),a&&a.d()}}}function Ci(n,e,l){let{examples:t=null}=e,{placeholder:i=null}=e,{latex_delimiters:a}=e;const r=fl();function o(f,u){const c=typeof u=="string"?{text:u}:u;r("example_select",{index:f,value:{text:c.text,files:c.files}})}const s=(f,u)=>o(f,typeof u=="string"?{text:u}:u);return n.$$set=f=>{"examples"in f&&l(0,t=f.examples),"placeholder"in f&&l(1,i=f.placeholder),"latex_delimiters"in f&&l(2,a=f.latex_delimiters)},[t,i,a,o,s]}class Vi extends te{constructor(e){super(),ne(this,e,Ci,Ei,ie,{examples:0,placeholder:1,latex_delimiters:2})}}function Ii(n){let e,l;return e=new we({props:{Icon:n[0]?Re:Ye,label:n[0]?"Copied conversation":"Copy conversation"}}),e.$on("click",n[1]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,[i]){const a={};i&1&&(a.Icon=t[0]?Re:Ye),i&1&&(a.label=t[0]?"Copied conversation":"Copy conversation"),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Di(n,e,l){let t=!1,{value:i}=e,{watermark:a=null}=e,r;function o(){l(0,t=!0),r&&clearTimeout(r),r=setTimeout(()=>{l(0,t=!1)},1e3)}const s=()=>{if(i){const u=i.map(_=>_.type==="text"?`${_.role}: ${_.content}`:`${_.role}: ${_.content.value.url}`).join(`

`),c=a?`${u}

${a}`:u;navigator.clipboard.writeText(c).catch(_=>{console.error("Failed to copy conversation: ",_)})}};async function f(){"clipboard"in navigator&&(s(),o())}return bt(()=>{r&&clearTimeout(r)}),n.$$set=u=>{"value"in u&&l(2,i=u.value),"watermark"in u&&l(3,a=u.watermark)},[t,f,i,a]}class zi extends te{constructor(e){super(),ne(this,e,Di,Ii,ie,{value:2,watermark:3})}}function ot(n,e,l){const t=n.slice();return t[61]=e[l],t[63]=l,t}function st(n,e,l){const t=n.slice();t[64]=e[l],t[71]=l;const i=t[64][0].role==="user"?"user":"bot";t[65]=i;const a=t[16][t[65]==="user"?0:1];t[66]=a;const r=t[16][t[65]==="user"?0:1];t[67]=r;const o=t[39].slice(0,t[71]).filter(f=>f[0].role==="assistant").length;t[68]=o;const s=t[65]==="bot"&&t[10]&&t[10][t[68]]?t[10][t[68]]:null;return t[69]=s,t}function rt(n){let e,l;return e=new vt({props:{$$slots:{default:[Hi]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&2109441|i[1]&1|i[2]&1024&&(a.$$scope={dirty:i,ctx:t}),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ft(n){let e,l;return e=new we({props:{Icon:Gt}}),e.$on("click",n[48]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p:J,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function _t(n){let e,l;return e=new zi({props:{value:n[0],watermark:n[31]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&1&&(a.value=t[0]),i[1]&1&&(a.watermark=t[31]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Hi(n){let e,l,t,i,a,r=n[12]&&ft(n);l=new we({props:{Icon:Kt,label:n[21]("chatbot.clear")}}),l.$on("click",n[49]);let o=n[13]&&_t(n);return{c(){r&&r.c(),e=Y(),M(l.$$.fragment),t=Y(),o&&o.c(),i=G()},l(s){r&&r.l(s),e=Q(s),Z(l.$$.fragment,s),t=Q(s),o&&o.l(s),i=G()},m(s,f){r&&r.m(s,f),C(s,e,f),B(l,s,f),C(s,t,f),o&&o.m(s,f),C(s,i,f),a=!0},p(s,f){s[12]?r?(r.p(s,f),f[0]&4096&&g(r,1)):(r=ft(s),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(O(),w(r,1,1,()=>{r=null}),W());const u={};f[0]&2097152&&(u.label=s[21]("chatbot.clear")),l.$set(u),s[13]?o?(o.p(s,f),f[0]&8192&&g(o,1)):(o=_t(s),o.c(),g(o,1),o.m(i.parentNode,i)):o&&(O(),w(o,1,1,()=>{o=null}),W())},i(s){a||(g(r),g(l.$$.fragment,s),g(o),a=!0)},o(s){w(r),w(l.$$.fragment,s),w(o),a=!1},d(s){s&&(d(e),d(t),d(i)),r&&r.d(s),T(l,s),o&&o.d(s)}}}function Li(n){let e,l;return e=new Vi({props:{examples:n[26],placeholder:n[23],latex_delimiters:n[4]}}),e.$on("example_select",n[54]),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&67108864&&(a.examples=t[26]),i[0]&8388608&&(a.placeholder=t[23]),i[0]&16&&(a.latex_delimiters=t[4]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Ni(n){let e,l,t,i,a,r,o,s=be(n[39]),f=[];for(let b=0;b<s.length;b+=1)f[b]=ct(st(n,s,b));const u=b=>w(f[b],1,1,()=>{f[b]=null}),c=[Bi,Mi],_=[];function m(b,k){return b[32]!=="hidden"&&b[5]?0:b[40]?1:-1}return~(t=m(n))&&(i=_[t]=c[t](n)),{c(){e=A("div");for(let b=0;b<f.length;b+=1)f[b].c();l=Y(),i&&i.c(),this.h()},l(b){e=j(b,"DIV",{class:!0});var k=D(e);for(let p=0;p<f.length;p+=1)f[p].l(k);l=Q(k),i&&i.l(k),k.forEach(d),this.h()},h(){h(e,"class","message-wrap svelte-gjtrl6")},m(b,k){C(b,e,k);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(e,null);N(e,l),~t&&_[t].m(e,null),a=!0,r||(o=At(Pt.call(null,e)),r=!0)},p(b,k){if(k[0]&2071973855|k[1]&11583){s=be(b[39]);let I;for(I=0;I<s.length;I+=1){const U=st(b,s,I);f[I]?(f[I].p(U,k),g(f[I],1)):(f[I]=ct(U),f[I].c(),g(f[I],1),f[I].m(e,l))}for(O(),I=s.length;I<f.length;I+=1)u(I);W()}let p=t;t=m(b),t===p?~t&&_[t].p(b,k):(i&&(O(),w(_[p],1,1,()=>{_[p]=null}),W()),~t?(i=_[t],i?i.p(b,k):(i=_[t]=c[t](b),i.c()),g(i,1),i.m(e,null)):i=null)},i(b){if(!a){for(let k=0;k<s.length;k+=1)g(f[k]);g(i),a=!0}},o(b){f=f.filter(Boolean);for(let k=0;k<f.length;k+=1)w(f[k]);w(i),a=!1},d(b){b&&d(e),We(f,b),~t&&_[t].d(),r=!1,o()}}}function ut(n){let e,l;return e=new zt({props:{layout:n[22],avatar_images:n[16]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&4194304&&(a.layout=t[22]),i[0]&65536&&(a.avatar_images=t[16]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ct(n){var u;let e,l,t,i,a;function r(...c){return n[50](n[64],n[71],...c)}function o(c){n[51](c)}let s={messages:n[64],display_consecutive_in_same_bubble:n[3],opposite_avatar_img:n[67],avatar_img:n[66],role:n[65],layout:n[22],dispatch:n[42],i18n:n[21],_fetch:n[1],line_breaks:n[19],theme_mode:n[20],target:n[34],upload:n[24],selectable:n[7],sanitize_html:n[17],render_markdown:n[18],rtl:n[14],i:n[71],value:n[0],latex_delimiters:n[4],_components:n[33],generating:n[6],msg_format:n[25],feedback_options:n[9],current_feedback:n[69],allow_tags:n[30],watermark:n[31],show_like:n[65]==="user"?n[8]&&n[29]:n[8],show_retry:n[27]&&Ge(n[64],n[0]),show_undo:n[28]&&Ge(n[64],n[0]),show_edit:n[11]==="all"||n[11]=="user"&&n[65]==="user"&&n[64].length>0&&n[64][n[64].length-1].type=="text",in_edit_mode:n[35]===n[71],show_copy_button:n[15],handle_action:r,scroll:n[41]?scroll:Ai,allow_file_downloads:n[2]};n[36]!==void 0&&(s.edit_messages=n[36]),e=new oi({props:s}),Qe.push(()=>jt(e,"edit_messages",o)),e.$on("copy",n[52]);let f=n[32]!=="hidden"&&n[6]&&n[64][n[64].length-1].role==="assistant"&&((u=n[64][n[64].length-1].metadata)==null?void 0:u.status)==="done"&&ut(n);return{c(){M(e.$$.fragment),t=Y(),f&&f.c(),i=G()},l(c){Z(e.$$.fragment,c),t=Q(c),f&&f.l(c),i=G()},m(c,_){B(e,c,_),C(c,t,_),f&&f.m(c,_),C(c,i,_),a=!0},p(c,_){var b;n=c;const m={};_[1]&256&&(m.messages=n[64]),_[0]&8&&(m.display_consecutive_in_same_bubble=n[3]),_[0]&65536|_[1]&256&&(m.opposite_avatar_img=n[67]),_[0]&65536|_[1]&256&&(m.avatar_img=n[66]),_[1]&256&&(m.role=n[65]),_[0]&4194304&&(m.layout=n[22]),_[0]&2097152&&(m.i18n=n[21]),_[0]&2&&(m._fetch=n[1]),_[0]&524288&&(m.line_breaks=n[19]),_[0]&1048576&&(m.theme_mode=n[20]),_[1]&8&&(m.target=n[34]),_[0]&16777216&&(m.upload=n[24]),_[0]&128&&(m.selectable=n[7]),_[0]&131072&&(m.sanitize_html=n[17]),_[0]&262144&&(m.render_markdown=n[18]),_[0]&16384&&(m.rtl=n[14]),_[0]&1&&(m.value=n[0]),_[0]&16&&(m.latex_delimiters=n[4]),_[1]&4&&(m._components=n[33]),_[0]&64&&(m.generating=n[6]),_[0]&33554432&&(m.msg_format=n[25]),_[0]&512&&(m.feedback_options=n[9]),_[0]&1024|_[1]&256&&(m.current_feedback=n[69]),_[0]&1073741824&&(m.allow_tags=n[30]),_[1]&1&&(m.watermark=n[31]),_[0]&536871168|_[1]&256&&(m.show_like=n[65]==="user"?n[8]&&n[29]:n[8]),_[0]&134217729|_[1]&256&&(m.show_retry=n[27]&&Ge(n[64],n[0])),_[0]&268435457|_[1]&256&&(m.show_undo=n[28]&&Ge(n[64],n[0])),_[0]&2048|_[1]&256&&(m.show_edit=n[11]==="all"||n[11]=="user"&&n[65]==="user"&&n[64].length>0&&n[64][n[64].length-1].type=="text"),_[1]&16&&(m.in_edit_mode=n[35]===n[71]),_[0]&32768&&(m.show_copy_button=n[15]),_[1]&288&&(m.handle_action=r),_[0]&4&&(m.allow_file_downloads=n[2]),!l&&_[1]&32&&(l=!0,m.edit_messages=n[36],St(()=>l=!1)),e.$set(m),n[32]!=="hidden"&&n[6]&&n[64][n[64].length-1].role==="assistant"&&((b=n[64][n[64].length-1].metadata)==null?void 0:b.status)==="done"?f?(f.p(n,_),_[0]&64|_[1]&258&&g(f,1)):(f=ut(n),f.c(),g(f,1),f.m(i.parentNode,i)):f&&(O(),w(f,1,1,()=>{f=null}),W())},i(c){a||(g(e.$$.fragment,c),g(f),a=!0)},o(c){w(e.$$.fragment,c),w(f),a=!1},d(c){c&&(d(t),d(i)),T(e,c),f&&f.d(c)}}}function Mi(n){let e,l=be(n[40]),t=[];for(let i=0;i<l.length;i+=1)t[i]=ht(ot(n,l,i));return{c(){e=A("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(d),this.h()},h(){h(e,"class","options svelte-gjtrl6")},m(i,a){C(i,e,a);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(i,a){if(a[1]&2560){l=be(i[40]);let r;for(r=0;r<l.length;r+=1){const o=ot(i,l,r);t[r]?t[r].p(o,a):(t[r]=ht(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:J,o:J,d(i){i&&d(e),We(t,i)}}}function Bi(n){let e,l;return e=new zt({props:{layout:n[22],avatar_images:n[16]}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&4194304&&(a.layout=t[22]),i[0]&65536&&(a.avatar_images=t[16]),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ht(n){let e,l=(n[61].label||n[61].value)+"",t,i,a,r;function o(){return n[53](n[63],n[61])}return{c(){e=A("button"),t=se(l),i=Y(),this.h()},l(s){e=j(s,"BUTTON",{class:!0});var f=D(e);t=re(f,l),i=Q(f),f.forEach(d),this.h()},h(){h(e,"class","option svelte-gjtrl6")},m(s,f){C(s,e,f),N(e,t),N(e,i),a||(r=je(e,"click",o),a=!0)},p(s,f){n=s,f[1]&512&&l!==(l=(n[61].label||n[61].value)+"")&&Ee(t,l)},d(s){s&&d(e),a=!1,r()}}}function mt(n){let e,l,t;return l=new we({props:{Icon:tn,label:"Scroll down",size:"large"}}),l.$on("click",n[43]),{c(){e=A("div"),M(l.$$.fragment),this.h()},l(i){e=j(i,"DIV",{class:!0});var a=D(e);Z(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","scroll-down-button-container svelte-gjtrl6")},m(i,a){C(i,e,a),B(l,e,null),t=!0},p:J,i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){w(l.$$.fragment,i),t=!1},d(i){i&&d(e),T(l)}}}function Ti(n){let e,l,t,i,a,r,o,s,f=n[0]!==null&&n[0].length>0&&rt(n);const u=[Ni,Li],c=[];function _(b,k){return b[0]!==null&&b[0].length>0&&b[39]!==null?0:1}t=_(n),i=c[t]=u[t](n);let m=n[38]&&mt(n);return{c(){f&&f.c(),e=Y(),l=A("div"),i.c(),r=Y(),m&&m.c(),o=G(),this.h()},l(b){f&&f.l(b),e=Q(b),l=j(b,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-live":!0});var k=D(l);i.l(k),k.forEach(d),r=Q(b),m&&m.l(b),o=G(),this.h()},h(){h(l,"class",a=Ke(n[22]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-gjtrl6"),h(l,"role","log"),h(l,"aria-label","chatbot conversation"),h(l,"aria-live","polite")},m(b,k){f&&f.m(b,k),C(b,e,k),C(b,l,k),c[t].m(l,null),n[55](l),C(b,r,k),m&&m.m(b,k),C(b,o,k),s=!0},p(b,k){b[0]!==null&&b[0].length>0?f?(f.p(b,k),k[0]&1&&g(f,1)):(f=rt(b),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(O(),w(f,1,1,()=>{f=null}),W());let p=t;t=_(b),t===p?c[t].p(b,k):(O(),w(c[p],1,1,()=>{c[p]=null}),W(),i=c[t],i?i.p(b,k):(i=c[t]=u[t](b),i.c()),g(i,1),i.m(l,null)),(!s||k[0]&4194304&&a!==(a=Ke(b[22]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-gjtrl6"))&&h(l,"class",a),b[38]?m?(m.p(b,k),k[1]&128&&g(m,1)):(m=mt(b),m.c(),g(m,1),m.m(o.parentNode,o)):m&&(O(),w(m,1,1,()=>{m=null}),W())},i(b){s||(g(f),g(i),g(m),s=!0)},o(b){w(f),w(i),w(m),s=!1},d(b){b&&(d(e),d(l),d(r),d(o)),f&&f.d(b),c[t].d(),n[55](null),m&&m.d(b)}}}const Ai=()=>{};function ji(n,e,l){let t,i,{value:a=[]}=e,r=null,{_fetch:o}=e,{load_component:s}=e,{allow_file_downloads:f}=e,{display_consecutive_in_same_bubble:u}=e,c={};const _=typeof window<"u";async function m(){l(33,c=await fn(_n(a),c,s))}let{latex_delimiters:b}=e,{pending_message:k=!1}=e,{generating:p=!1}=e,{selectable:I=!1}=e,{likeable:U=!1}=e,{feedback_options:q}=e,{feedback_value:H=null}=e,{editable:F=null}=e,{show_share_button:z=!1}=e,{show_copy_all_button:L=!1}=e,{rtl:R=!1}=e,{show_copy_button:K=!1}=e,{avatar_images:x=[null,null]}=e,{sanitize_html:le=!0}=e,{render_markdown:P=!0}=e,{line_breaks:de=!0}=e,{autoscroll:S=!0}=e,{theme_mode:y}=e,{i18n:Se}=e,{layout:qe="bubble"}=e,{placeholder:De=null}=e,{upload:Ce}=e,{msg_format:ze="tuples"}=e,{examples:He=null}=e,{_retryable:Fe=!1}=e,{_undoable:Le=!1}=e,{like_user_message:ke=!1}=e,{allow_tags:Ne=!1}=e,{watermark:Me=null}=e,{show_progress:Be="full"}=e,Ze=null,Te=null,Ve=[];il(()=>{l(34,Ze=document.querySelector("div.gradio-container"))});let oe,Pe=!1;const ue=fl();function V(){return oe&&oe.offsetHeight+oe.scrollTop>oe.scrollHeight-100}function me(){oe&&(oe.scrollTo(0,oe.scrollHeight),l(38,Pe=!1))}async function Ue(){S&&V()&&(await qt(),await new Promise(E=>setTimeout(E,300)),me())}il(()=>{S&&me(),Ue()}),il(()=>{function E(){V()?l(38,Pe=!1):l(38,Pe=!0)}return oe==null||oe.addEventListener("scroll",E),()=>{oe==null||oe.removeEventListener("scroll",E)}});function ve(E,pe,ce){if(ce==="undo"||ce==="retry"){const Ae=a;let Ie=Ae.length-1;for(;Ae[Ie].role==="assistant";)Ie--;ue(ce,{index:Ae[Ie].index,value:Ae[Ie].content})}else if(ce=="edit")l(35,Te=E),Ve.push(pe.content);else if(ce=="edit_cancel")l(35,Te=null);else if(ce=="edit_submit")l(35,Te=null),ue("edit",{index:pe.index,value:Ve[E].slice(),previous_value:pe.content});else{let Ae=ce==="Like"?!0:ce==="Dislike"?!1:ce||"";if(ze==="tuples")ue("like",{index:pe.index,value:pe.content,liked:Ae});else{if(!t)return;const Ie=t[E],[Lt,Ui]=[Ie[0],Ie[Ie.length-1]];ue("like",{index:Lt.index,value:Ie.map(Nt=>Nt.content),liked:Ae})}}}function ye(){if(!a||!t||t.length===0)return;const E=t[t.length-1];if(E[0].role==="assistant")return E[E.length-1].options}const xe=async()=>{try{const E=await nn(a);ue("share",{description:E})}catch(E){console.error(E);let pe=E instanceof Zt?E.message:"Share failed.";ue("error",pe)}},$e=()=>ue("clear"),el=(E,pe,ce)=>{ce=="edit"&&Ve.splice(0,Ve.length),ce==="edit"||ce==="edit_submit"?E.forEach((Ae,Ie)=>{ve(ce==="edit"?pe:Ie,Ae,ce)}):ve(pe,E[0],ce)};function ll(E){Ve=E,l(36,Ve)}const tl=E=>ue("copy",E.detail),nl=(E,pe)=>ue("option_select",{index:E,value:pe.value}),v=E=>ue("example_select",E.detail);function Ht(E){Qe[E?"unshift":"push"](()=>{oe=E,l(37,oe)})}return n.$$set=E=>{"value"in E&&l(0,a=E.value),"_fetch"in E&&l(1,o=E._fetch),"load_component"in E&&l(45,s=E.load_component),"allow_file_downloads"in E&&l(2,f=E.allow_file_downloads),"display_consecutive_in_same_bubble"in E&&l(3,u=E.display_consecutive_in_same_bubble),"latex_delimiters"in E&&l(4,b=E.latex_delimiters),"pending_message"in E&&l(5,k=E.pending_message),"generating"in E&&l(6,p=E.generating),"selectable"in E&&l(7,I=E.selectable),"likeable"in E&&l(8,U=E.likeable),"feedback_options"in E&&l(9,q=E.feedback_options),"feedback_value"in E&&l(10,H=E.feedback_value),"editable"in E&&l(11,F=E.editable),"show_share_button"in E&&l(12,z=E.show_share_button),"show_copy_all_button"in E&&l(13,L=E.show_copy_all_button),"rtl"in E&&l(14,R=E.rtl),"show_copy_button"in E&&l(15,K=E.show_copy_button),"avatar_images"in E&&l(16,x=E.avatar_images),"sanitize_html"in E&&l(17,le=E.sanitize_html),"render_markdown"in E&&l(18,P=E.render_markdown),"line_breaks"in E&&l(19,de=E.line_breaks),"autoscroll"in E&&l(46,S=E.autoscroll),"theme_mode"in E&&l(20,y=E.theme_mode),"i18n"in E&&l(21,Se=E.i18n),"layout"in E&&l(22,qe=E.layout),"placeholder"in E&&l(23,De=E.placeholder),"upload"in E&&l(24,Ce=E.upload),"msg_format"in E&&l(25,ze=E.msg_format),"examples"in E&&l(26,He=E.examples),"_retryable"in E&&l(27,Fe=E._retryable),"_undoable"in E&&l(28,Le=E._undoable),"like_user_message"in E&&l(29,ke=E.like_user_message),"allow_tags"in E&&l(30,Ne=E.allow_tags),"watermark"in E&&l(31,Me=E.watermark),"show_progress"in E&&l(32,Be=E.show_progress)},n.$$.update=()=>{n.$$.dirty[0]&1&&m(),n.$$.dirty[0]&33|n.$$.dirty[1]&4&&(a||k||c)&&Ue(),n.$$.dirty[0]&1|n.$$.dirty[1]&65536&&(Jt(a,r)||(l(47,r=a),ue("change"))),n.$$.dirty[0]&33554441&&l(39,t=a&&rn(a,ze,u)),n.$$.dirty[0]&1&&l(40,i=a&&ye())},[a,o,f,u,b,k,p,I,U,q,H,F,z,L,R,K,x,le,P,de,y,Se,qe,De,Ce,ze,He,Fe,Le,ke,Ne,Me,Be,c,Ze,Te,Ve,oe,Pe,t,i,_,ue,me,ve,s,S,r,xe,$e,el,ll,tl,nl,v,Ht]}class Si extends te{constructor(e){super(),ne(this,e,ji,Ti,ie,{value:0,_fetch:1,load_component:45,allow_file_downloads:2,display_consecutive_in_same_bubble:3,latex_delimiters:4,pending_message:5,generating:6,selectable:7,likeable:8,feedback_options:9,feedback_value:10,editable:11,show_share_button:12,show_copy_all_button:13,rtl:14,show_copy_button:15,avatar_images:16,sanitize_html:17,render_markdown:18,line_breaks:19,autoscroll:46,theme_mode:20,i18n:21,layout:22,placeholder:23,upload:24,msg_format:25,examples:26,_retryable:27,_undoable:28,like_user_message:29,allow_tags:30,watermark:31,show_progress:32},null,[-1,-1,-1])}}const qi=Si;function dt(n){let e,l;const t=[{autoscroll:n[27].autoscroll},{i18n:n[27].i18n},n[30],{show_progress:n[30].show_progress==="hidden"?"hidden":"minimal"}];let i={};for(let a=0;a<t.length;a+=1)i=_e(i,t[a]);return e=new Ot({props:i}),e.$on("clear_status",n[43]),{c(){M(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,r){B(e,a,r),l=!0},p(a,r){const o=r[0]&1207959552?fe(t,[r[0]&134217728&&{autoscroll:a[27].autoscroll},r[0]&134217728&&{i18n:a[27].i18n},r[0]&1073741824&&ae(a[30]),r[0]&1073741824&&{show_progress:a[30].show_progress==="hidden"?"hidden":"minimal"}]):{};e.$set(o)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){T(e,a)}}}function gt(n){let e,l;return e=new Xt({props:{show_label:n[7],Icon:Qt,float:!0,label:n[6]||"Chatbot"}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&128&&(a.show_label=t[7]),i[0]&64&&(a.label=t[6]||"Chatbot"),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Fi(n){var s,f,u;let e,l,t,i,a,r=n[30]&&dt(n),o=n[7]&&gt(n);return i=new qi({props:{i18n:n[27].i18n,selectable:n[8],likeable:n[9],feedback_options:n[10],feedback_value:n[11],show_share_button:n[12],show_copy_all_button:n[15],value:n[41],latex_delimiters:n[26],display_consecutive_in_same_bubble:n[24],render_markdown:n[19],theme_mode:n[38],editable:n[35],pending_message:((s=n[30])==null?void 0:s.status)==="pending",generating:((f=n[30])==null?void 0:f.status)==="generating",rtl:n[13],show_copy_button:n[14],like_user_message:n[29],show_progress:((u=n[30])==null?void 0:u.show_progress)||"full",avatar_images:n[28],sanitize_html:n[16],line_breaks:n[20],autoscroll:n[21],layout:n[17],placeholder:n[36],examples:n[37],_retryable:n[22],_undoable:n[23],upload:n[44],_fetch:n[45],load_component:n[27].load_component,msg_format:n[18],allow_file_downloads:n[39],allow_tags:n[25],watermark:n[40]}}),i.$on("change",n[46]),i.$on("select",n[47]),i.$on("like",n[48]),i.$on("share",n[49]),i.$on("error",n[50]),i.$on("example_select",n[51]),i.$on("option_select",n[52]),i.$on("retry",n[53]),i.$on("undo",n[54]),i.$on("clear",n[55]),i.$on("copy",n[56]),i.$on("edit",n[57]),{c(){r&&r.c(),e=Y(),l=A("div"),o&&o.c(),t=Y(),M(i.$$.fragment),this.h()},l(c){r&&r.l(c),e=Q(c),l=j(c,"DIV",{class:!0});var _=D(l);o&&o.l(_),t=Q(_),Z(i.$$.fragment,_),_.forEach(d),this.h()},h(){h(l,"class","wrapper svelte-g3p8na")},m(c,_){r&&r.m(c,_),C(c,e,_),C(c,l,_),o&&o.m(l,null),N(l,t),B(i,l,null),a=!0},p(c,_){var b,k,p;c[30]?r?(r.p(c,_),_[0]&1073741824&&g(r,1)):(r=dt(c),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(O(),w(r,1,1,()=>{r=null}),W()),c[7]?o?(o.p(c,_),_[0]&128&&g(o,1)):(o=gt(c),o.c(),g(o,1),o.m(l,t)):o&&(O(),w(o,1,1,()=>{o=null}),W());const m={};_[0]&134217728&&(m.i18n=c[27].i18n),_[0]&256&&(m.selectable=c[8]),_[0]&512&&(m.likeable=c[9]),_[0]&1024&&(m.feedback_options=c[10]),_[0]&2048&&(m.feedback_value=c[11]),_[0]&4096&&(m.show_share_button=c[12]),_[0]&32768&&(m.show_copy_all_button=c[15]),_[1]&1024&&(m.value=c[41]),_[0]&67108864&&(m.latex_delimiters=c[26]),_[0]&16777216&&(m.display_consecutive_in_same_bubble=c[24]),_[0]&524288&&(m.render_markdown=c[19]),_[1]&128&&(m.theme_mode=c[38]),_[1]&16&&(m.editable=c[35]),_[0]&1073741824&&(m.pending_message=((b=c[30])==null?void 0:b.status)==="pending"),_[0]&1073741824&&(m.generating=((k=c[30])==null?void 0:k.status)==="generating"),_[0]&8192&&(m.rtl=c[13]),_[0]&16384&&(m.show_copy_button=c[14]),_[0]&536870912&&(m.like_user_message=c[29]),_[0]&1073741824&&(m.show_progress=((p=c[30])==null?void 0:p.show_progress)||"full"),_[0]&268435456&&(m.avatar_images=c[28]),_[0]&65536&&(m.sanitize_html=c[16]),_[0]&1048576&&(m.line_breaks=c[20]),_[0]&2097152&&(m.autoscroll=c[21]),_[0]&131072&&(m.layout=c[17]),_[1]&32&&(m.placeholder=c[36]),_[1]&64&&(m.examples=c[37]),_[0]&4194304&&(m._retryable=c[22]),_[0]&8388608&&(m._undoable=c[23]),_[0]&134217728&&(m.upload=c[44]),_[0]&134217728&&(m._fetch=c[45]),_[0]&134217728&&(m.load_component=c[27].load_component),_[0]&262144&&(m.msg_format=c[18]),_[1]&256&&(m.allow_file_downloads=c[39]),_[0]&33554432&&(m.allow_tags=c[25]),_[1]&512&&(m.watermark=c[40]),i.$set(m)},i(c){a||(g(r),g(o),g(i.$$.fragment,c),a=!0)},o(c){w(r),w(o),w(i.$$.fragment,c),a=!1},d(c){c&&(d(e),d(l)),r&&r.d(c),o&&o.d(),T(i)}}}function Zi(n){let e,l;return e=new Ut({props:{elem_id:n[1],elem_classes:n[2],visible:n[3],padding:!1,scale:n[4],min_width:n[5],height:n[31],resizable:n[32],min_height:n[33],max_height:n[34],allow_overflow:!0,flex:!0,overflow_behavior:"auto",$$slots:{default:[Fi]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},p(t,i){const a={};i[0]&2&&(a.elem_id=t[1]),i[0]&4&&(a.elem_classes=t[2]),i[0]&8&&(a.visible=t[3]),i[0]&16&&(a.scale=t[4]),i[0]&32&&(a.min_width=t[5]),i[1]&1&&(a.height=t[31]),i[1]&2&&(a.resizable=t[32]),i[1]&4&&(a.min_height=t[33]),i[1]&8&&(a.max_height=t[34]),i[0]&2147483585|i[1]&134219760&&(a.$$scope={dirty:i,ctx:t}),e.$set(a)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Pi(n,e,l){let{elem_id:t=""}=e,{elem_classes:i=[]}=e,{visible:a=!0}=e,{value:r=[]}=e,{scale:o=null}=e,{min_width:s=void 0}=e,{label:f}=e,{show_label:u=!0}=e,{root:c}=e,{_selectable:_=!1}=e,{likeable:m=!1}=e,{feedback_options:b=["Like","Dislike"]}=e,{feedback_value:k=null}=e,{show_share_button:p=!1}=e,{rtl:I=!1}=e,{show_copy_button:U=!0}=e,{show_copy_all_button:q=!1}=e,{sanitize_html:H=!0}=e,{layout:F="bubble"}=e,{type:z="tuples"}=e,{render_markdown:L=!0}=e,{line_breaks:R=!0}=e,{autoscroll:K=!0}=e,{_retryable:x=!1}=e,{_undoable:le=!1}=e,{group_consecutive_messages:P=!0}=e,{allow_tags:de=!1}=e,{latex_delimiters:S}=e,{gradio:y}=e,Se=[],{avatar_images:qe=[null,null]}=e,{like_user_message:De=!1}=e,{loading_status:Ce=void 0}=e,{height:ze}=e,{resizable:He}=e,{min_height:Fe}=e,{max_height:Le}=e,{editable:ke=null}=e,{placeholder:Ne=null}=e,{examples:Me=null}=e,{theme_mode:Be}=e,{allow_file_downloads:Ze=!0}=e,{watermark:Te=null}=e;const Ve=()=>y.dispatch("clear_status",Ce),oe=(...v)=>y.client.upload(...v),Pe=(...v)=>y.client.fetch(...v),ue=()=>y.dispatch("change",r),V=v=>y.dispatch("select",v.detail),me=v=>y.dispatch("like",v.detail),Ue=v=>y.dispatch("share",v.detail),ve=v=>y.dispatch("error",v.detail),ye=v=>y.dispatch("example_select",v.detail),xe=v=>y.dispatch("option_select",v.detail),$e=v=>y.dispatch("retry",v.detail),el=v=>y.dispatch("undo",v.detail),ll=()=>{l(0,r=[]),y.dispatch("clear")},tl=v=>y.dispatch("copy",v.detail),nl=v=>{r===null||r.length===0||(z==="messages"?l(0,r[v.detail.index].content=v.detail.value,r):l(0,r[v.detail.index[0]][v.detail.index[1]]=v.detail.value,r),l(0,r),y.dispatch("edit",v.detail))};return n.$$set=v=>{"elem_id"in v&&l(1,t=v.elem_id),"elem_classes"in v&&l(2,i=v.elem_classes),"visible"in v&&l(3,a=v.visible),"value"in v&&l(0,r=v.value),"scale"in v&&l(4,o=v.scale),"min_width"in v&&l(5,s=v.min_width),"label"in v&&l(6,f=v.label),"show_label"in v&&l(7,u=v.show_label),"root"in v&&l(42,c=v.root),"_selectable"in v&&l(8,_=v._selectable),"likeable"in v&&l(9,m=v.likeable),"feedback_options"in v&&l(10,b=v.feedback_options),"feedback_value"in v&&l(11,k=v.feedback_value),"show_share_button"in v&&l(12,p=v.show_share_button),"rtl"in v&&l(13,I=v.rtl),"show_copy_button"in v&&l(14,U=v.show_copy_button),"show_copy_all_button"in v&&l(15,q=v.show_copy_all_button),"sanitize_html"in v&&l(16,H=v.sanitize_html),"layout"in v&&l(17,F=v.layout),"type"in v&&l(18,z=v.type),"render_markdown"in v&&l(19,L=v.render_markdown),"line_breaks"in v&&l(20,R=v.line_breaks),"autoscroll"in v&&l(21,K=v.autoscroll),"_retryable"in v&&l(22,x=v._retryable),"_undoable"in v&&l(23,le=v._undoable),"group_consecutive_messages"in v&&l(24,P=v.group_consecutive_messages),"allow_tags"in v&&l(25,de=v.allow_tags),"latex_delimiters"in v&&l(26,S=v.latex_delimiters),"gradio"in v&&l(27,y=v.gradio),"avatar_images"in v&&l(28,qe=v.avatar_images),"like_user_message"in v&&l(29,De=v.like_user_message),"loading_status"in v&&l(30,Ce=v.loading_status),"height"in v&&l(31,ze=v.height),"resizable"in v&&l(32,He=v.resizable),"min_height"in v&&l(33,Fe=v.min_height),"max_height"in v&&l(34,Le=v.max_height),"editable"in v&&l(35,ke=v.editable),"placeholder"in v&&l(36,Ne=v.placeholder),"examples"in v&&l(37,Me=v.examples),"theme_mode"in v&&l(38,Be=v.theme_mode),"allow_file_downloads"in v&&l(39,Ze=v.allow_file_downloads),"watermark"in v&&l(40,Te=v.watermark)},n.$$.update=()=>{n.$$.dirty[0]&262145|n.$$.dirty[1]&2048&&l(41,Se=z==="tuples"?sn(r,c):on(r,c))},[r,t,i,a,o,s,f,u,_,m,b,k,p,I,U,q,H,F,z,L,R,K,x,le,P,de,S,y,qe,De,Ce,ze,He,Fe,Le,ke,Ne,Me,Be,Ze,Te,Se,c,Ve,oe,Pe,ue,V,me,Ue,ve,ye,xe,$e,el,ll,tl,nl]}class $i extends te{constructor(e){super(),ne(this,e,Pi,Zi,ie,{elem_id:1,elem_classes:2,visible:3,value:0,scale:4,min_width:5,label:6,show_label:7,root:42,_selectable:8,likeable:9,feedback_options:10,feedback_value:11,show_share_button:12,rtl:13,show_copy_button:14,show_copy_all_button:15,sanitize_html:16,layout:17,type:18,render_markdown:19,line_breaks:20,autoscroll:21,_retryable:22,_undoable:23,group_consecutive_messages:24,allow_tags:25,latex_delimiters:26,gradio:27,avatar_images:28,like_user_message:29,loading_status:30,height:31,resizable:32,min_height:33,max_height:34,editable:35,placeholder:36,examples:37,theme_mode:38,allow_file_downloads:39,watermark:40},null,[-1,-1])}}export{qi as BaseChatBot,$i as default};
//# sourceMappingURL=Index.CiCW8rk5.js.map
