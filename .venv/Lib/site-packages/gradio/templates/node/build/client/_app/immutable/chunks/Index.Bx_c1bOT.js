import{SvelteComponent as Le,init as Me,safe_not_equal as Ne,element as y,space as Z,text as nt,claim_element as L,children as H,detach as C,claim_space as x,claim_text as lt,attr as p,set_style as ye,insert_hydration as K,append_hydration as B,listen as F,set_data as st,noop as Ie,createEventDispatcher as it,create_component as te,claim_component as ne,toggle_class as ee,mount_component as le,transition_in as b,group_outros as oe,transition_out as T,check_outros as re,destroy_component as se,onMount as Jt,tick as ke,binding_callbacks as be,bind as Se,add_flush_callback as Ae,set_input_value as pe,run_all as ot,ensure_array_like as Ue,destroy_each as Xt,get_svelte_dataset as rt,add_render_callback as Be,create_bidirectional_transition as he,flush as P,assign as qt,get_spread_update as zt,get_spread_object as Ft}from"../../../svelte/svelte.js";import{fade as de}from"../../../svelte/svelte-submodules.js";import{x as Wt,I as Gt,j as Kt,D as je,F as Je,N as Qt,B as Yt,S as Zt}from"./2.BPD7TSJN.js";import{P as xt}from"./Plus.aV-xa-_T.js";import{T as $t}from"./Trash.D4IfxcH_.js";import{D as at,c as en}from"./Dropdown.DzvyotLN.js";/* empty css                                              */import{default as Bn}from"./Example.FcPgDijm.js";function tn(n){let e,t,l,i,s,r,u;return{c(){e=y("div"),t=y("button"),l=Z(),i=y("span"),s=nt(n[1]),this.h()},l(a){e=L(a,"DIV",{class:!0,style:!0});var c=H(e);t=L(c,"BUTTON",{role:!0,"aria-checked":!0,class:!0});var f=H(t);f.forEach(C),l=x(c),i=L(c,"SPAN",{});var d=H(i);s=lt(d,n[1]),d.forEach(C),c.forEach(C),this.h()},h(){p(t,"role","switch"),p(t,"aria-checked",n[0]),t.disabled=n[2],p(t,"class","svelte-1wr5wa"),p(e,"class","s s--slider svelte-1wr5wa"),ye(e,"font-size","var(--font-size-sm)px")},m(a,c){K(a,e,c),B(e,t),B(e,l),B(e,i),B(i,s),r||(u=F(t,"click",n[3]),r=!0)},p(a,[c]){c&1&&p(t,"aria-checked",a[0]),c&4&&(t.disabled=a[2]),c&2&&st(s,a[1])},i:Ie,o:Ie,d(a){a&&C(e),r=!1,u()}}}function nn(n,e,t){let{label:l}=e,{checked:i=!1}=e,{disabled:s=!1}=e;const r=it();function u(a){const f=a.target.getAttribute("aria-checked");t(0,i=f!=="true"),r("click",{checked:i})}return n.$$set=a=>{"label"in a&&t(1,l=a.label),"checked"in a&&t(0,i=a.checked),"disabled"in a&&t(2,s=a.disabled)},[i,l,s,u]}class ln extends Le{constructor(e){super(),Me(this,e,nn,tn,Ne,{label:1,checked:0,disabled:2})}}function Xe(n,e,t){const l=n.slice();return l[77]=e[t],l[78]=e,l[79]=t,l}function qe(n){let e,t;return e=new Gt({props:{$$slots:{default:[sn]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,i){le(e,l,i),t=!0},p(l,i){const s={};i[0]&16777216|i[2]&262144&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function sn(n){let e,t;return e=new Kt({props:{Icon:n[24]?je:Je,label:n[24]?"Copied":"Copy"}}),e.$on("click",n[38]),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,i){le(e,l,i),t=!0},p(l,i){const s={};i[0]&16777216&&(s.Icon=l[24]?je:Je),i[0]&16777216&&(s.label=l[24]?"Copied":"Copy"),e.$set(s)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function on(n){let e;return{c(){e=nt(n[4])},l(t){e=lt(t,n[4])},m(t,l){K(t,e,l)},p(t,l){l[0]&16&&st(e,t[4])},d(t){t&&C(e)}}}function ze(n){let e,t,l,i;function s(u){n[44](u)}let r={label:"Plain Text",disabled:n[28]||n[27]};return n[14]!==void 0&&(r.checked=n[14]),t=new ln({props:r}),be.push(()=>Se(t,"checked",s)),t.$on("click",n[45]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(u){e=L(u,"DIV",{class:!0});var a=H(e);ne(t.$$.fragment,a),a.forEach(C),this.h()},h(){p(e,"class","switch-container top-switch svelte-1de6p8m"),ee(e,"switch-disabled",n[28]||n[27])},m(u,a){K(u,e,a),le(t,e,null),i=!0},p(u,a){const c={};a[0]&402653184&&(c.disabled=u[28]||u[27]),!l&&a[0]&16384&&(l=!0,c.checked=u[14],Ae(()=>l=!1)),t.$set(c),(!i||a[0]&402653184)&&ee(e,"switch-disabled",u[28]||u[27])},i(u){i||(b(t.$$.fragment,u),i=!0)},o(u){T(t.$$.fragment,u),i=!1},d(u){u&&C(e),se(t)}}}function rn(n){let e,t,l,i,s,r,u,a=n[28]&&Fe(),c=n[18]&&We(n);return{c(){e=y("div"),a&&a.c(),t=Z(),l=y("textarea"),i=Z(),c&&c.c(),this.h()},l(f){e=L(f,"DIV",{class:!0});var d=H(e);a&&a.l(d),t=x(d),l=L(d,"TEXTAREA",{"data-testid":!0,placeholder:!0,rows:!0,class:!0}),H(l).forEach(C),i=x(d),c&&c.l(d),d.forEach(C),this.h()},h(){p(l,"data-testid","textbox"),p(l,"placeholder",n[3]),p(l,"rows",5),l.disabled=n[6],p(l,"class","svelte-1de6p8m"),p(e,"class","textarea-container svelte-1de6p8m"),ee(e,"loading",n[28])},m(f,d){K(f,e,d),a&&a.m(e,null),B(e,t),B(e,l),pe(l,n[25]),n[66](l),B(e,i),c&&c.m(e,null),s=!0,r||(u=[F(l,"input",n[62]),F(l,"input",n[63]),F(l,"focus",n[64]),F(l,"keydown",n[65])],r=!0)},p(f,d){f[28]?a?d[0]&268435456&&b(a,1):(a=Fe(),a.c(),b(a,1),a.m(e,t)):a&&(oe(),T(a,1,1,()=>{a=null}),re()),(!s||d[0]&8)&&p(l,"placeholder",f[3]),(!s||d[0]&64)&&(l.disabled=f[6]),d[0]&33554432&&pe(l,f[25]),f[18]?c?(c.p(f,d),d[0]&262144&&b(c,1)):(c=We(f),c.c(),b(c,1),c.m(e,null)):c&&(oe(),T(c,1,1,()=>{c=null}),re()),(!s||d[0]&268435456)&&ee(e,"loading",f[28])},i(f){s||(b(a),b(c),s=!0)},o(f){T(a),T(c),s=!1},d(f){f&&C(e),a&&a.d(),n[66](null),c&&c.d(),r=!1,ot(u)}}}function an(n){let e,t,l,i=n[27]&&Ge(),s=Ue(n[15]),r=[];for(let a=0;a<s.length;a+=1)r[a]=Ye(Xe(n,s,a));const u=a=>T(r[a],1,1,()=>{r[a]=null});return{c(){e=y("div"),i&&i.c(),t=Z();for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=L(a,"DIV",{class:!0});var c=H(e);i&&i.l(c),t=x(c);for(let f=0;f<r.length;f+=1)r[f].l(c);c.forEach(C),this.h()},h(){p(e,"class","dialogue-container svelte-1de6p8m"),ee(e,"loading",n[27])},m(a,c){K(a,e,c),i&&i.m(e,null),B(e,t);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);n[61](e),l=!0},p(a,c){if(a[27]?i?c[0]&134217728&&b(i,1):(i=Ge(),i.c(),b(i,1),i.m(e,t)):i&&(oe(),T(i,1,1,()=>{i=null}),re()),c[0]&1690141262|c[1]&31){s=Ue(a[15]);let f;for(f=0;f<s.length;f+=1){const d=Xe(a,s,f);r[f]?(r[f].p(d,c),b(r[f],1)):(r[f]=Ye(d),r[f].c(),b(r[f],1),r[f].m(e,null))}for(oe(),f=s.length;f<r.length;f+=1)u(f);re()}(!l||c[0]&134217728)&&ee(e,"loading",a[27])},i(a){if(!l){b(i);for(let c=0;c<s.length;c+=1)b(r[c]);l=!0}},o(a){T(i),r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)T(r[c]);l=!1},d(a){a&&C(e),i&&i.d(),Xt(r,a),n[61](null)}}}function Fe(n){let e,t='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to plain text...</div>',l,i;return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=L(s,"DIV",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-1f7wytn"&&(e.innerHTML=t),this.h()},h(){p(e,"class","loading-overlay svelte-1de6p8m")},m(s,r){K(s,e,r),i=!0},i(s){i||(s&&Be(()=>{i&&(l||(l=he(e,de,{duration:200},!0)),l.run(1))}),i=!0)},o(s){s&&(l||(l=he(e,de,{duration:200},!1)),l.run(0)),i=!1},d(s){s&&C(e),s&&l&&l.end()}}}function We(n){let e,t,l,i;return t=new at({props:{choices:n[2].map(et),filtered_indices:n[21].map(n[67]),active_index:n[21].map(n[68])[n[20]],show_options:!0}}),t.$on("change",n[69]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(s){e=L(s,"DIV",{id:!0,class:!0});var r=H(e);ne(t.$$.fragment,r),r.forEach(C),this.h()},h(){p(e,"id","tag-menu"),p(e,"class","tag-menu-plain-text svelte-1de6p8m")},m(s,r){K(s,e,r),le(t,e,null),i=!0},p(s,r){const u={};r[0]&4&&(u.choices=s[2].map(et)),r[0]&2097156&&(u.filtered_indices=s[21].map(s[67])),r[0]&3145732&&(u.active_index=s[21].map(s[68])[s[20]]),t.$set(u)},i(s){i||(b(t.$$.fragment,s),s&&Be(()=>{i&&(l||(l=he(e,de,{duration:100},!0)),l.run(1))}),i=!0)},o(s){T(t.$$.fragment,s),s&&(l||(l=he(e,de,{duration:100},!1)),l.run(0)),i=!1},d(s){s&&C(e),se(t),s&&l&&l.end()}}}function Ge(n){let e,t='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to dialogue format...</div>',l,i;return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=L(s,"DIV",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-nm3yad"&&(e.innerHTML=t),this.h()},h(){p(e,"class","loading-overlay svelte-1de6p8m")},m(s,r){K(s,e,r),i=!0},i(s){i||(s&&Be(()=>{i&&(l||(l=he(e,de,{duration:200},!0)),l.run(1))}),i=!0)},o(s){s&&(l||(l=he(e,de,{duration:200},!1)),l.run(0)),i=!1},d(s){s&&C(e),s&&l&&l.end()}}}function un(n){let e,t,l;function i(u){n[47](u,n[77])}function s(){return n[48](n[79],n[77])}let r={choices:n[1].map(xe),show_label:!1,container:!0,label:""};return n[77].speaker!==void 0&&(r.value=n[77].speaker),e=new en({props:r}),be.push(()=>Se(e,"value",i)),e.$on("change",s),{c(){te(e.$$.fragment)},l(u){ne(e.$$.fragment,u)},m(u,a){le(e,u,a),l=!0},p(u,a){n=u;const c={};a[0]&2&&(c.choices=n[1].map(xe)),!t&&a[0]&32768&&(t=!0,c.value=n[77].speaker,Ae(()=>t=!1)),e.$set(c)},i(u){l||(b(e.$$.fragment,u),l=!0)},o(u){T(e.$$.fragment,u),l=!1},d(u){se(e,u)}}}function fn(n){let e,t,l;function i(){n[46].call(e,n[78],n[79])}return{c(){e=y("textarea"),this.h()},l(s){e=L(s,"TEXTAREA",{rows:!0,class:!0}),H(e).forEach(C),this.h()},h(){e.disabled=n[6],p(e,"rows","1"),e.readOnly=!0,p(e,"class","svelte-1de6p8m")},m(s,r){K(s,e,r),pe(e,n[77].speaker),t||(l=F(e,"input",i),t=!0)},p(s,r){n=s,r[0]&64&&(e.disabled=n[6]),r[0]&32768&&pe(e,n[77].speaker)},i:Ie,o:Ie,d(s){s&&C(e),t=!1,l()}}}function Ke(n){let e,t,l,i;return t=new at({props:{choices:n[2].map($e),filtered_indices:n[21].map(n[56]),active_index:n[21].map(n[57])[n[20]],show_options:!0,offset_from_top:n[23],from_top:!0}}),t.$on("change",n[58]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(s){e=L(s,"DIV",{id:!0,class:!0});var r=H(e);ne(t.$$.fragment,r),r.forEach(C),this.h()},h(){p(e,"id","tag-menu"),p(e,"class","tag-menu svelte-1de6p8m")},m(s,r){K(s,e,r),le(t,e,null),i=!0},p(s,r){const u={};r[0]&4&&(u.choices=s[2].map($e)),r[0]&2097156&&(u.filtered_indices=s[21].map(s[56])),r[0]&3145732&&(u.active_index=s[21].map(s[57])[s[20]]),r[0]&8388608&&(u.offset_from_top=s[23]),t.$set(u)},i(s){i||(b(t.$$.fragment,s),s&&Be(()=>{i&&(l||(l=he(e,de,{duration:100},!0)),l.run(1))}),i=!0)},o(s){T(t.$$.fragment,s),s&&(l||(l=he(e,de,{duration:100},!1)),l.run(0)),i=!1},d(s){s&&C(e),se(t),s&&l&&l.end()}}}function Qe(n){let e,t,l,i,s,r;l=new xt({});function u(){return n[59](n[79])}return{c(){e=y("div"),t=y("button"),te(l.$$.fragment),this.h()},l(a){e=L(a,"DIV",{class:!0});var c=H(e);t=L(c,"BUTTON",{class:!0,"aria-label":!0});var f=H(t);ne(l.$$.fragment,f),f.forEach(C),c.forEach(C),this.h()},h(){p(t,"class","add-button svelte-1de6p8m"),p(t,"aria-label","Add new line"),t.disabled=n[6],p(e,"class","svelte-1de6p8m"),ee(e,"action-column",n[79]==0),ee(e,"hidden",n[6])},m(a,c){K(a,e,c),B(e,t),le(l,t,null),i=!0,s||(r=F(t,"click",u),s=!0)},p(a,c){n=a,(!i||c[0]&64)&&(t.disabled=n[6]),(!i||c[0]&64)&&ee(e,"hidden",n[6])},i(a){i||(b(l.$$.fragment,a),i=!0)},o(a){T(l.$$.fragment,a),i=!1},d(a){a&&C(e),se(l),s=!1,r()}}}function Ye(n){let e,t,l,i,s,r,u,a,c=n[79],f,d,g,v,U,R,Q,E,h,w;const k=[fn,un],M=[];function j(A,D){return A[6]?0:1}l=j(n),i=M[l]=k[l](n);function z(){return n[49](n[77])}function N(){n[51].call(a,n[78],n[79])}function Y(...A){return n[52](n[79],...A)}function O(...A){return n[53](n[79],...A)}function W(...A){return n[54](n[79],...A)}const $=()=>n[55](a,c),me=()=>n[55](null,c);let I=n[18]&&n[19]===n[79]&&Ke(n),S=(n[9]==null||n[9]&&n[79]<n[9]-1)&&Qe(n);R=new $t({});function J(){return n[60](n[79])}return{c(){e=y("div"),t=y("div"),i.c(),s=Z(),r=y("div"),u=y("div"),a=y("textarea"),f=Z(),I&&I.c(),d=Z(),S&&S.c(),g=Z(),v=y("div"),U=y("button"),te(R.$$.fragment),Q=Z(),this.h()},l(A){e=L(A,"DIV",{class:!0,style:!0});var D=H(e);t=L(D,"DIV",{class:!0,role:!0,tabindex:!0});var _=H(t);i.l(_),_.forEach(C),s=x(D),r=L(D,"DIV",{class:!0});var ie=H(r);u=L(ie,"DIV",{class:!0});var ge=H(u);a=L(ge,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),H(a).forEach(C),f=x(ge),I&&I.l(ge),ge.forEach(C),ie.forEach(C),d=x(D),S&&S.l(D),g=x(D),v=L(D,"DIV",{class:!0});var Te=H(v);U=L(Te,"BUTTON",{class:!0,"aria-label":!0});var _e=H(U);ne(R.$$.fragment,_e),_e.forEach(C),Te.forEach(C),Q=x(D),D.forEach(C),this.h()},h(){p(t,"class","speaker-column svelte-1de6p8m"),p(t,"role","button"),p(t,"tabindex","0"),p(a,"placeholder",n[3]),a.disabled=n[6],p(a,"rows","1"),p(a,"class","svelte-1de6p8m"),p(u,"class","input-container svelte-1de6p8m"),p(r,"class","text-column svelte-1de6p8m"),p(U,"class","delete-button svelte-1de6p8m"),p(U,"aria-label","Remove current line"),U.disabled=n[6],p(v,"class","action-column svelte-1de6p8m"),ee(v,"hidden",n[6]||n[79]==0),p(e,"class","dialogue-line svelte-1de6p8m"),ye(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},m(A,D){K(A,e,D),B(e,t),M[l].m(t,null),B(e,s),B(e,r),B(r,u),B(u,a),pe(a,n[77].text),$(),B(u,f),I&&I.m(u,null),B(e,d),S&&S.m(e,null),B(e,g),B(e,v),B(v,U),le(R,U,null),B(e,Q),E=!0,h||(w=[F(t,"mouseenter",z),F(t,"mouseleave",n[50]),F(a,"input",N),F(a,"input",Y),F(a,"focus",O),F(a,"keydown",W),F(U,"click",J)],h=!0)},p(A,D){n=A;let _=l;l=j(n),l===_?M[l].p(n,D):(oe(),T(M[_],1,1,()=>{M[_]=null}),re(),i=M[l],i?i.p(n,D):(i=M[l]=k[l](n),i.c()),b(i,1),i.m(t,null)),(!E||D[0]&8)&&p(a,"placeholder",n[3]),(!E||D[0]&64)&&(a.disabled=n[6]),D[0]&32768&&pe(a,n[77].text),c!==n[79]&&(me(),c=n[79],$()),n[18]&&n[19]===n[79]?I?(I.p(n,D),D[0]&786432&&b(I,1)):(I=Ke(n),I.c(),b(I,1),I.m(u,null)):I&&(oe(),T(I,1,1,()=>{I=null}),re()),n[9]==null||n[9]&&n[79]<n[9]-1?S?(S.p(n,D),D[0]&512&&b(S,1)):(S=Qe(n),S.c(),b(S,1),S.m(e,g)):S&&(oe(),T(S,1,1,()=>{S=null}),re()),(!E||D[0]&64)&&(U.disabled=n[6]),(!E||D[0]&64)&&ee(v,"hidden",n[6]||n[79]==0),(!E||D[0]&604012608)&&ye(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},i(A){E||(b(i),b(I),b(S),b(R.$$.fragment,A),E=!0)},o(A){T(i),T(I),T(S),T(R.$$.fragment,A),E=!1},d(A){A&&C(e),M[l].d(),me(),I&&I.d(),S&&S.d(),se(R),h=!1,ot(w)}}}function Ze(n){let e,t,l,i,s,r;return l=new Qt({}),{c(){e=y("div"),t=y("button"),te(l.$$.fragment),this.h()},l(u){e=L(u,"DIV",{class:!0});var a=H(e);t=L(a,"BUTTON",{class:!0});var c=H(t);ne(l.$$.fragment,c),c.forEach(C),a.forEach(C),this.h()},h(){p(t,"class","submit-button svelte-1de6p8m"),t.disabled=n[6],p(e,"class","submit-container svelte-1de6p8m")},m(u,a){K(u,e,a),B(e,t),le(l,t,null),i=!0,s||(r=F(t,"click",n[39]),s=!0)},p(u,a){(!i||a[0]&64)&&(t.disabled=u[6])},i(u){i||(b(l.$$.fragment,u),i=!0)},o(u){T(l.$$.fragment,u),i=!1},d(u){u&&C(e),se(l),s=!1,r()}}}function cn(n){let e,t,l,i,s,r,u,a,c,f,d,g=n[7]&&n[10]&&qe(n);l=new Wt({props:{show_label:n[7],info:n[5],$$slots:{default:[on]},$$scope:{ctx:n}}});let v=n[1].length!==0&&n[12]==="both"&&ze(n);const U=[an,rn],R=[];function Q(h,w){return!h[14]&&h[12]!=="text"?0:h[14]&&h[12]!=="dialogue"?1:-1}~(r=Q(n))&&(u=R[r]=U[r](n));let E=n[11]&&!n[6]&&Ze(n);return{c(){e=y("label"),g&&g.c(),t=Z(),te(l.$$.fragment),i=Z(),v&&v.c(),s=Z(),u&&u.c(),a=Z(),E&&E.c(),this.h()},l(h){e=L(h,"LABEL",{class:!0});var w=H(e);g&&g.l(w),t=x(w),ne(l.$$.fragment,w),i=x(w),v&&v.l(w),s=x(w),u&&u.l(w),a=x(w),E&&E.l(w),w.forEach(C),this.h()},h(){p(e,"class","svelte-1de6p8m"),ee(e,"container",n[8])},m(h,w){K(h,e,w),g&&g.m(e,null),B(e,t),le(l,e,null),B(e,i),v&&v.m(e,null),B(e,s),~r&&R[r].m(e,null),B(e,a),E&&E.m(e,null),c=!0,f||(d=F(window,"click",n[36]),f=!0)},p(h,w){h[7]&&h[10]?g?(g.p(h,w),w[0]&1152&&b(g,1)):(g=qe(h),g.c(),b(g,1),g.m(e,t)):g&&(oe(),T(g,1,1,()=>{g=null}),re());const k={};w[0]&128&&(k.show_label=h[7]),w[0]&32&&(k.info=h[5]),w[0]&16|w[2]&262144&&(k.$$scope={dirty:w,ctx:h}),l.$set(k),h[1].length!==0&&h[12]==="both"?v?(v.p(h,w),w[0]&4098&&b(v,1)):(v=ze(h),v.c(),b(v,1),v.m(e,s)):v&&(oe(),T(v,1,1,()=>{v=null}),re());let M=r;r=Q(h),r===M?~r&&R[r].p(h,w):(u&&(oe(),T(R[M],1,1,()=>{R[M]=null}),re()),~r?(u=R[r],u?u.p(h,w):(u=R[r]=U[r](h),u.c()),b(u,1),u.m(e,a)):u=null),h[11]&&!h[6]?E?(E.p(h,w),w[0]&2112&&b(E,1)):(E=Ze(h),E.c(),b(E,1),E.m(e,null)):E&&(oe(),T(E,1,1,()=>{E=null}),re()),(!c||w[0]&256)&&ee(e,"container",h[8])},i(h){c||(b(g),b(l.$$.fragment,h),b(v),b(u),b(E),c=!0)},o(h){T(g),T(l.$$.fragment,h),T(v),T(u),T(E),c=!1},d(h){h&&C(e),g&&g.d(),se(l),v&&v.d(),~r&&R[r].d(),E&&E.d(),f=!1,d()}}}function _n(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const xe=n=>[n,n],$e=(n,e)=>[n,e],et=(n,e)=>[n,e];function hn(n,e,t){let{speakers:l=[]}=e,{tags:i=[]}=e,{value:s=[]}=e,{value_is_output:r=!1}=e,{placeholder:u=void 0}=e,{label:a}=e,{info:c=void 0}=e,{disabled:f=!1}=e,{show_label:d=!0}=e,{container:g=!0}=e,{max_lines:v=void 0}=e,{show_copy_button:U=!1}=e,{show_submit_button:R=!0}=e,{color_map:Q=null}=e,{ui_mode:E="both"}=e,h=E==="text",{server:w}=e,k=[];s&&s.length&&typeof s!="string"?k=[...s]:s&&typeof s!="string"&&(k=[{speaker:`${l.length?l[0]:""}`,text:""}]);let M,j=!1,z=-1,N=0,Y=[],O=[],W,$=JSON.stringify(s),me=0,I=!1,S,J="",A=null,D=!1,_=!1,ie=!1;const ge=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],Te={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let _e={};l.length===0&&(h=!0,s="");function Re(o){const m=l.length>0?l[0]:"";t(15,k=[...k.slice(0,o+1),{speaker:m,text:""},...k.slice(o+1)]),ke().then(()=>{O[o+1]&&O[o+1].focus()})}function Pe(o){t(15,k=[...k.slice(0,o),...k.slice(o+1)])}function Ce(o,m,V){t(15,k[o][m]=V,k),t(15,k=[...k])}function ve(o,m){const V=o.target||HTMLTextAreaElement;V&&!O[m]&&t(16,O[m]=V,O);const G=V.selectionStart||0,ae=V.value;let ue=!1,fe=-1;if(ae[G-1]===":"){t(19,z=m),fe=G;const X=_n(ae,G);t(21,Y=i.filter(q=>X===""||q.toLowerCase().includes(X.toLowerCase()))),ue=Y.length>0,t(20,N=0)}else{const X=ae.lastIndexOf(":",G-1);if(X>=0&&!ae.substring(X+1,G).includes(" ")){t(19,z=m),fe=X+1;const q=ae.substring(X+1,G);t(21,Y=i.filter(ce=>q===""||ce.toLowerCase().includes(q.toLowerCase()))),ue=Y.length>0,t(20,N=0)}}if(ue&&fe!==-1){t(18,j=!0);const X=V.getBoundingClientRect();if(M){const q=M.getBoundingClientRect();t(23,me=q.top+X.height*(m+1.5))}}else t(18,j=!1)}async function Oe(){const o=Y[N];if(o){let m,V;h?(V=W,m=J):(V=O[z],m=k[z].text);const G=(V==null?void 0:V.selectionStart)||0,ae=m.lastIndexOf(":",G-1);if(ae>=0){const ue=m.substring(0,ae),fe=m.substring(G);if(h){const X=`${ue}${o} ${fe}`;t(25,J=X),l.length===0?t(0,s=X):t(0,s=await w.unformat({text:X})),ke().then(()=>{if(W){const q=ue.length+o.length+1;W.setSelectionRange(q,q),W.focus()}})}else{const X=ue.replace(/\[S\d+\]/g,"").trim(),q=`${X}${o} ${fe}`;Ce(z,"text",q),ke().then(()=>{const ce=O[z];if(ce){const we=X.length+o.length+1;ce.setSelectionRange(we,we),ce.focus()}})}}t(18,j=!1),t(20,N=0)}}async function Ve(o){const m=i[o.detail.target.dataset.index];if(m){let V,G;h?(G=W,V=J):(G=O[z],V=k[z].text);const ae=(G==null?void 0:G.selectionStart)||0,ue=V.lastIndexOf(":",ae-1);if(ue>=0){const fe=V.substring(0,ue),X=V.substring(ae);if(h){const q=`${fe}${m} ${X}`;t(25,J=q),l.length===0?t(0,s=q):t(0,s=await w.unformat({text:q})),ke().then(()=>{if(W){const ce=fe.length+m.length+1;W.setSelectionRange(ce,ce),W.focus()}})}else{const q=fe.replace(/\[S\d+\]/g,"").trim(),ce=`${q}${m} ${X}`;Ce(z,"text",ce),ke().then(()=>{const we=O[z];if(we){const He=q.length+m.length+1;we.setSelectionRange(He,He),we.focus()}})}}t(18,j=!1),t(20,N=0)}}function ut(o){if(j){const m=o.target,V=document.getElementById("tag-menu");V&&!V.contains(m)&&t(18,j=!1)}}const De=it();function ft(){De("change",s),r||De("input")}function ct(o){l.length!==0&&(t(43,ie=!0),t(0,s=[...o]))}async function Ee(o){return typeof o=="string"?o:await w.format(o)}async function _t(){if("clipboard"in navigator){const o=await Ee(s);await navigator.clipboard.writeText(o),De("copy",{value:o}),ht()}}function ht(){t(24,I=!0),S&&clearTimeout(S),S=setTimeout(()=>{t(24,I=!1)},1e3)}async function dt(){h&&t(0,s=await w.unformat({text:J})),De("submit")}Jt(async()=>{if(typeof s=="string")t(25,J=s);else if(s&&s.length>0){const o=await Ee(s);t(25,J=o)}else t(25,J="")});function mt(o){h=o,t(14,h)}const gt=async o=>{if(o.detail.checked){t(28,_=!0);try{t(25,J=await Ee(k))}finally{t(28,_=!1)}}else{t(27,D=!0);try{t(0,s=await w.unformat({text:J})),t(15,k=[...s])}finally{t(27,D=!1)}}};function bt(o,m){o[m].speaker=this.value,t(15,k),t(0,s),t(42,$),t(43,ie),t(14,h)}function wt(o,m){n.$$.not_equal(m.speaker,o)&&(m.speaker=o,t(15,k),t(0,s),t(42,$),t(43,ie),t(14,h))}const kt=(o,m)=>Ce(o,"speaker",m.speaker),pt=o=>f&&t(26,A=o.speaker),vt=()=>f&&t(26,A=null);function Et(o,m){o[m].text=this.value,t(15,k),t(0,s),t(42,$),t(43,ie),t(14,h)}const Tt=(o,m)=>ve(m,o),Ct=(o,m)=>ve(m,o),Dt=(o,m)=>{m.key==="Escape"&&j?(t(18,j=!1),t(20,N=0),m.preventDefault()):j&&z===o&&(m.key==="ArrowDown"?(t(20,N=Math.min(N+1,Y.length-1)),m.preventDefault()):m.key==="ArrowUp"?(t(20,N=Math.max(N-1,0)),m.preventDefault()):m.key==="Enter"&&(Y[N]&&Oe(),m.preventDefault()))};function It(o,m){be[o?"unshift":"push"](()=>{O[m]=o,t(16,O),t(15,k),t(0,s),t(42,$),t(43,ie),t(14,h)})}const St=o=>i.indexOf(o),At=o=>i.indexOf(o),Bt=o=>Ve(o),Ot=o=>Re(o),Vt=o=>Pe(o);function yt(o){be[o?"unshift":"push"](()=>{M=o,t(17,M)})}function Lt(){J=this.value,t(25,J),t(0,s),t(42,$),t(43,ie),t(14,h),t(15,k)}const Mt=o=>{ve(o,0)},Nt=o=>ve(o,0),Rt=o=>{o.key==="Escape"&&j?(t(18,j=!1),t(20,N=0),o.preventDefault()):j&&(o.key==="ArrowDown"?(t(20,N=Math.min(N+1,Y.length-1)),o.preventDefault()):o.key==="ArrowUp"?(t(20,N=Math.max(N-1,0)),o.preventDefault()):o.key==="Enter"&&(Y[N]&&Oe(),o.preventDefault()))};function Pt(o){be[o?"unshift":"push"](()=>{W=o,t(22,W)})}const Ht=o=>i.indexOf(o),Ut=o=>i.indexOf(o),jt=o=>Ve(o);return n.$$set=o=>{"speakers"in o&&t(1,l=o.speakers),"tags"in o&&t(2,i=o.tags),"value"in o&&t(0,s=o.value),"value_is_output"in o&&t(40,r=o.value_is_output),"placeholder"in o&&t(3,u=o.placeholder),"label"in o&&t(4,a=o.label),"info"in o&&t(5,c=o.info),"disabled"in o&&t(6,f=o.disabled),"show_label"in o&&t(7,d=o.show_label),"container"in o&&t(8,g=o.container),"max_lines"in o&&t(9,v=o.max_lines),"show_copy_button"in o&&t(10,U=o.show_copy_button),"show_submit_button"in o&&t(11,R=o.show_submit_button),"color_map"in o&&t(41,Q=o.color_map),"ui_mode"in o&&t(12,E=o.ui_mode),"server"in o&&t(13,w=o.server)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&(Q?t(29,_e={...Q}):(t(29,_e={}),l.forEach((o,m)=>{const V=ge[m%ge.length];t(29,_e[o]=Te[V],_e)}))),n.$$.dirty[0]&49153|n.$$.dirty[1]&6144&&JSON.stringify(s)!==$&&(s==null&&t(15,k=[]),t(42,$=JSON.stringify(s)),typeof s=="string"?t(25,J=s):typeof s=="object"&&Array.isArray(s)&&(t(15,k=[...s]),(!ie||h)&&Ee(k).then(o=>{t(25,J=o)})),t(43,ie=!1),ft()),n.$$.dirty[0]&98304&&(k.length>O.length?t(16,O=[...O,...Array(k.length-O.length).fill(null)]):k.length<O.length&&t(16,O=O.slice(0,k.length)),ke().then(()=>{O.forEach(o=>{o&&o instanceof HTMLTextAreaElement&&(o.style.height="auto",o.style.height=o.scrollHeight+"px")})})),n.$$.dirty[0]&32768&&ct(k)},[s,l,i,u,a,c,f,d,g,v,U,R,E,w,h,k,O,M,j,z,N,Y,W,me,I,J,A,D,_,_e,Re,Pe,Ce,ve,Oe,Ve,ut,Ee,_t,dt,r,Q,$,ie,mt,gt,bt,wt,kt,pt,vt,Et,Tt,Ct,Dt,It,St,At,Bt,Ot,Vt,yt,Lt,Mt,Nt,Rt,Pt,Ht,Ut,jt]}class dn extends Le{constructor(e){super(),Me(this,e,hn,cn,Ne,{speakers:1,tags:2,value:0,value_is_output:40,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:41,ui_mode:12,server:13},null,[-1,-1,-1])}}const mn=dn;function tt(n){let e,t;const l=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let i={};for(let s=0;s<l.length;s+=1)i=qt(i,l[s]);return e=new Zt({props:i}),e.$on("clear_status",n[22]),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,r){le(e,s,r),t=!0},p(s,r){const u=r[0]&262148?zt(l,[r[0]&4&&{autoscroll:s[2].autoscroll},r[0]&4&&{i18n:s[2].i18n},r[0]&262144&&Ft(s[18])]):{};e.$set(u)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function gn(n){let e,t,l,i,s,r=n[18]&&tt(n);function u(f){n[23](f)}function a(f){n[24](f)}let c={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],ui_mode:n[21],disabled:!n[19]};return n[0]!==void 0&&(c.value=n[0]),n[1]!==void 0&&(c.value_is_output=n[1]),t=new mn({props:c}),be.push(()=>Se(t,"value",u)),be.push(()=>Se(t,"value_is_output",a)),t.$on("change",n[25]),t.$on("input",n[26]),t.$on("submit",n[27]),t.$on("blur",n[28]),t.$on("select",n[29]),t.$on("focus",n[30]),t.$on("copy",n[31]),{c(){r&&r.c(),e=Z(),te(t.$$.fragment)},l(f){r&&r.l(f),e=x(f),ne(t.$$.fragment,f)},m(f,d){r&&r.m(f,d),K(f,e,d),le(t,f,d),s=!0},p(f,d){f[18]?r?(r.p(f,d),d[0]&262144&&b(r,1)):(r=tt(f),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(oe(),T(r,1,1,()=>{r=null}),re());const g={};d[0]&16&&(g.label=f[4]),d[0]&128&&(g.info=f[7]),d[0]&4096&&(g.show_label=f[12]),d[0]&8192&&(g.max_lines=f[13]),d[0]&131072&&(g.show_copy_button=f[17]),d[0]&16384&&(g.container=f[14]),d[0]&32&&(g.speakers=f[5]),d[0]&64&&(g.tags=f[6]),d[0]&256&&(g.placeholder=f[8]),d[0]&1048576&&(g.show_submit_button=f[20]),d[0]&8&&(g.server=f[3]),d[0]&2097152&&(g.ui_mode=f[21]),d[0]&524288&&(g.disabled=!f[19]),!l&&d[0]&1&&(l=!0,g.value=f[0],Ae(()=>l=!1)),!i&&d[0]&2&&(i=!0,g.value_is_output=f[1],Ae(()=>i=!1)),t.$set(g)},i(f){s||(b(r),b(t.$$.fragment,f),s=!0)},o(f){T(r),T(t.$$.fragment,f),s=!1},d(f){f&&C(e),r&&r.d(f),se(t,f)}}}function bn(n){let e,t;return e=new Yt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[gn]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,i){le(e,l,i),t=!0},p(l,i){const s={};i[0]&2048&&(s.visible=l[11]),i[0]&512&&(s.elem_id=l[9]),i[0]&1024&&(s.elem_classes=l[10]),i[0]&32768&&(s.scale=l[15]),i[0]&65536&&(s.min_width=l[16]),i[0]&16384&&(s.padding=l[14]),i[0]&4092415|i[1]&2&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function wn(n,e,t){let{gradio:l}=e,{server:i}=e,{label:s="Dialogue"}=e,{speakers:r=[]}=e,{tags:u=[]}=e,{info:a=void 0}=e,{placeholder:c=void 0}=e,{elem_id:f=""}=e,{elem_classes:d=[]}=e,{visible:g=!0}=e,{value:v=[]}=e,{show_label:U}=e,{max_lines:R=void 0}=e,{container:Q=!0}=e,{scale:E=null}=e,{min_width:h=void 0}=e,{show_copy_button:w=!1}=e,{loading_status:k=void 0}=e,{value_is_output:M=!1}=e,{interactive:j}=e,{show_submit_button:z=!0}=e,{ui_mode:N="both"}=e;const Y=()=>l.dispatch("clear_status",k);function O(_){v=_,t(0,v)}function W(_){M=_,t(1,M)}const $=()=>l.dispatch("change",v),me=()=>l.dispatch("input"),I=()=>l.dispatch("submit"),S=()=>l.dispatch("blur"),J=_=>l.dispatch("select",_.detail),A=()=>l.dispatch("focus"),D=_=>l.dispatch("copy",_.detail);return n.$$set=_=>{"gradio"in _&&t(2,l=_.gradio),"server"in _&&t(3,i=_.server),"label"in _&&t(4,s=_.label),"speakers"in _&&t(5,r=_.speakers),"tags"in _&&t(6,u=_.tags),"info"in _&&t(7,a=_.info),"placeholder"in _&&t(8,c=_.placeholder),"elem_id"in _&&t(9,f=_.elem_id),"elem_classes"in _&&t(10,d=_.elem_classes),"visible"in _&&t(11,g=_.visible),"value"in _&&t(0,v=_.value),"show_label"in _&&t(12,U=_.show_label),"max_lines"in _&&t(13,R=_.max_lines),"container"in _&&t(14,Q=_.container),"scale"in _&&t(15,E=_.scale),"min_width"in _&&t(16,h=_.min_width),"show_copy_button"in _&&t(17,w=_.show_copy_button),"loading_status"in _&&t(18,k=_.loading_status),"value_is_output"in _&&t(1,M=_.value_is_output),"interactive"in _&&t(19,j=_.interactive),"show_submit_button"in _&&t(20,z=_.show_submit_button),"ui_mode"in _&&t(21,N=_.ui_mode)},[v,M,l,i,s,r,u,a,c,f,d,g,U,R,Q,E,h,w,k,j,z,N,Y,O,W,$,me,I,S,J,A,D]}class In extends Le{constructor(e){super(),Me(this,e,wn,bn,Ne,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20,ui_mode:21},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),P()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),P()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),P()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),P()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),P()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),P()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),P()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),P()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),P()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),P()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),P()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),P()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),P()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),P()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),P()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),P()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(e){this.$$set({show_copy_button:e}),P()}get loading_status(){return this.$$.ctx[18]}set loading_status(e){this.$$set({loading_status:e}),P()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),P()}get interactive(){return this.$$.ctx[19]}set interactive(e){this.$$set({interactive:e}),P()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(e){this.$$set({show_submit_button:e}),P()}get ui_mode(){return this.$$.ctx[21]}set ui_mode(e){this.$$set({ui_mode:e}),P()}}export{mn as BaseDialogue,Bn as BaseExample,In as default};
//# sourceMappingURL=Index.Bx_c1bOT.js.map
