import{SvelteComponent as dl,init as bl,safe_not_equal as pl,add_render_callback as wl,space as P,empty as ee,claim_space as W,insert_hydration as V,listen as le,transition_in as g,group_outros as R,transition_out as d,check_outros as A,detach as E,createEventDispatcher as kl,onMount as vl,globals as yl,create_component as D,claim_component as N,mount_component as U,destroy_component as j,tick as El,bubble as ge,binding_callbacks as ue,ensure_array_like as se,element as S,claim_element as H,children as X,attr as B,set_style as K,toggle_class as F,append_hydration as O,destroy_each as Ge,is_function as Tl,run_all as Il,text as Se,claim_text as He,set_data as Xe,noop as zl,bind as Bl,add_flush_callback as Dl,stop_propagation as Nl}from"../../../svelte/svelte.js";import"../../../svelte/svelte-submodules.js";import{u as Ul,I as jl,j as de,C as Je,q as be}from"./2.BPD7TSJN.js";import{B as Ll}from"./BlockLabel.B6sjuoOP.js";import{E as Ml}from"./Empty.D5XVnMZ_.js";import{S as Vl}from"./ShareButton.D3C70nBL.js";import{D as Ol}from"./Download.CpfEFmFf.js";import{I as Ke}from"./Image.CTVzPhL7.js";import{P as Qe}from"./Play.DJ4h2PVY.js";import{U as Cl,a as Rl}from"./Upload.DYS5R487.js";import{F as Al}from"./FullscreenButton.L5WHtCWr.js";import{M as Pl}from"./ModifyUpload.ZjEjKsCN.js";import{V as pe}from"./Video.CGJke9Z3.js";import{d as Wl}from"./index.tFQomdd2.js";async function ql(n){return n?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(n.map(async([t,e])=>t===null||!t.url?"":await Ul(t.url)))).map(t=>`<img src="${t}" style="height: 400px" />`).join("")}</div>`:""}const{window:Ye}=yl;function De(n,l,t){const e=n.slice();return e[63]=l[t],e[65]=t,e}function Ne(n,l,t){const e=n.slice();return e[66]=l[t],e[67]=l,e[65]=t,e}function Ue(n){let l,t;return l=new Ll({props:{show_label:n[2],Icon:Ke,label:n[3]||"Gallery"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&4&&(i.show_label=e[2]),o[0]&8&&(i.label=e[3]||"Gallery"),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Fl(n){let l,t,e,o,i,a,u=n[30]&&n[6]&&je(n),r=n[11]&&n[1]===null&&Ae(n),m=se(n[21]),s=[];for(let c=0;c<m.length;c+=1)s[c]=Fe(De(n,m,c));const w=c=>d(s[c],1,1,()=>{s[c]=null});return{c(){l=S("div"),u&&u.c(),t=P(),e=S("div"),r&&r.c(),o=P(),i=S("div");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){l=H(c,"DIV",{class:!0});var h=X(l);u&&u.l(h),t=W(h),e=H(h,"DIV",{class:!0});var b=X(e);r&&r.l(b),o=W(b),i=H(b,"DIV",{class:!0,style:!0});var y=X(i);for(let k=0;k<s.length;k+=1)s[k].l(y);y.forEach(E),b.forEach(E),h.forEach(E),this.h()},h(){B(i,"class","grid-container svelte-1svp6w8"),K(i,"--grid-cols",n[25]),K(i,"--grid-rows",n[4]),K(i,"--object-fit",n[7]),K(i,"height",n[5]),F(i,"pt-6",n[2]),B(e,"class","grid-wrap svelte-1svp6w8"),F(e,"minimal",n[12]==="minimal"),F(e,"fixed-height",n[12]!=="minimal"&&(!n[5]||n[5]=="auto")),F(e,"hidden",n[23]),B(l,"class","gallery-container")},m(c,h){V(c,l,h),u&&u.m(l,null),O(l,t),O(l,e),r&&r.m(e,null),O(e,o),O(e,i);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(i,null);n[58](l),a=!0},p(c,h){if(c[30]&&c[6]?u?(u.p(c,h),h[0]&1073741888&&g(u,1)):(u=je(c),u.c(),g(u,1),u.m(l,t)):u&&(R(),d(u,1,1,()=>{u=null}),A()),c[11]&&c[1]===null?r?(r.p(c,h),h[0]&2050&&g(r,1)):(r=Ae(c),r.c(),g(r,1),r.m(e,o)):r&&(R(),d(r,1,1,()=>{r=null}),A()),h[0]&2099266|h[1]&17){m=se(c[21]);let b;for(b=0;b<m.length;b+=1){const y=De(c,m,b);s[b]?(s[b].p(y,h),g(s[b],1)):(s[b]=Fe(y),s[b].c(),g(s[b],1),s[b].m(i,null))}for(R(),b=m.length;b<s.length;b+=1)w(b);A()}(!a||h[0]&33554432)&&K(i,"--grid-cols",c[25]),(!a||h[0]&16)&&K(i,"--grid-rows",c[4]),(!a||h[0]&128)&&K(i,"--object-fit",c[7]),(!a||h[0]&32)&&K(i,"height",c[5]),(!a||h[0]&4)&&F(i,"pt-6",c[2]),(!a||h[0]&4096)&&F(e,"minimal",c[12]==="minimal"),(!a||h[0]&4128)&&F(e,"fixed-height",c[12]!=="minimal"&&(!c[5]||c[5]=="auto")),(!a||h[0]&8388608)&&F(e,"hidden",c[23])},i(c){if(!a){g(u),g(r);for(let h=0;h<m.length;h+=1)g(s[h]);a=!0}},o(c){d(u),d(r),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)d(s[h]);a=!1},d(c){c&&E(l),u&&u.d(),r&&r.d(),Ge(s,c),n[58](null)}}}function Gl(n){let l,t;return l=new Ml({props:{unpadded_box:!0,size:"large",$$slots:{default:[xl]},$$scope:{ctx:n}}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[2]&64&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function je(n){var C;let l,t,e,o,i,a,u,r,m,s,w,c;t=new jl({props:{display_top_corner:n[14],$$slots:{default:[Sl]},$$scope:{ctx:n}}});const h=[Xl,Hl],b=[];function y(T,v){return"image"in T[30]?0:1}i=y(n),a=b[i]=h[i](n);let k=((C=n[30])==null?void 0:C.caption)&&Ce(n),p=se(n[21]),_=[];for(let T=0;T<p.length;T+=1)_[T]=Re(Ne(n,p,T));const z=T=>d(_[T],1,1,()=>{_[T]=null});return{c(){l=S("button"),D(t.$$.fragment),e=P(),o=S("button"),a.c(),u=P(),k&&k.c(),r=P(),m=S("div");for(let T=0;T<_.length;T+=1)_[T].c();this.h()},l(T){l=H(T,"BUTTON",{class:!0});var v=X(l);N(t.$$.fragment,v),e=W(v),o=H(v,"BUTTON",{class:!0,style:!0,"aria-label":!0});var q=X(o);a.l(q),q.forEach(E),u=W(v),k&&k.l(v),r=W(v),m=H(v,"DIV",{class:!0,"data-testid":!0,style:!0});var Q=X(m);for(let Y=0;Y<_.length;Y+=1)_[Y].l(Q);Q.forEach(E),v.forEach(E),this.h()},h(){B(o,"class","media-button svelte-1svp6w8"),K(o,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),B(o,"aria-label","detailed view of selected image"),B(m,"class","thumbnails scroll-hide svelte-1svp6w8"),B(m,"data-testid","container_el"),K(m,"justify-content",n[28]?"flex-start":"center"),B(l,"class","preview svelte-1svp6w8"),F(l,"minimal",n[12]==="minimal")},m(T,v){V(T,l,v),U(t,l,null),O(l,e),O(l,o),b[i].m(o,null),O(l,u),k&&k.m(l,null),O(l,r),O(l,m);for(let q=0;q<_.length;q+=1)_[q]&&_[q].m(m,null);n[51](m),s=!0,w||(c=[le(o,"click",function(){Tl("image"in n[30]?n[48]:null)&&("image"in n[30]?n[48]:null).apply(this,arguments)}),le(l,"keydown",n[33])],w=!0)},p(T,v){var Y;n=T;const q={};v[0]&16384&&(q.display_top_corner=n[14]),v[0]&1084270338|v[2]&64&&(q.$$scope={dirty:v,ctx:n}),t.$set(q);let Q=i;if(i=y(n),i===Q?b[i].p(n,v):(R(),d(b[Q],1,1,()=>{b[Q]=null}),A(),a=b[i],a?a.p(n,v):(a=b[i]=h[i](n),a.c()),g(a,1),a.m(o,null)),(!s||v[0]&1073741824)&&K(o,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),(Y=n[30])!=null&&Y.caption?k?k.p(n,v):(k=Ce(n),k.c(),k.m(l,r)):k&&(k.d(1),k=null),v[0]&69210114){p=se(n[21]);let L;for(L=0;L<p.length;L+=1){const te=Ne(n,p,L);_[L]?(_[L].p(te,v),g(_[L],1)):(_[L]=Re(te),_[L].c(),g(_[L],1),_[L].m(m,null))}for(R(),L=p.length;L<_.length;L+=1)z(L);A()}(!s||v[0]&268435456)&&K(m,"justify-content",n[28]?"flex-start":"center"),(!s||v[0]&4096)&&F(l,"minimal",n[12]==="minimal")},i(T){if(!s){g(t.$$.fragment,T),g(a);for(let v=0;v<p.length;v+=1)g(_[v]);s=!0}},o(T){d(t.$$.fragment,T),d(a),_=_.filter(Boolean);for(let v=0;v<_.length;v+=1)d(_[v]);s=!1},d(T){T&&E(l),j(t),b[i].d(),k&&k.d(),Ge(_,T),n[51](null),w=!1,Il(c)}}}function Le(n){let l,t;return l=new de({props:{Icon:Ol,label:n[10]("common.download")}}),l.$on("click",n[43]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1024&&(i.label=e[10]("common.download")),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Me(n){let l,t;return l=new Al({props:{fullscreen:n[15]}}),l.$on("fullscreen",n[44]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&32768&&(i.fullscreen=e[15]),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Ve(n){let l,t,e;return t=new Vl({props:{i18n:n[10],value:n[21],formatter:ql}}),t.$on("share",n[45]),t.$on("error",n[46]),{c(){l=S("div"),D(t.$$.fragment),this.h()},l(o){l=H(o,"DIV",{class:!0});var i=X(l);N(t.$$.fragment,i),i.forEach(E),this.h()},h(){B(l,"class","icon-button")},m(o,i){V(o,l,i),U(t,l,null),e=!0},p(o,i){const a={};i[0]&1024&&(a.i18n=o[10]),i[0]&2097152&&(a.value=o[21]),t.$set(a)},i(o){e||(g(t.$$.fragment,o),e=!0)},o(o){d(t.$$.fragment,o),e=!1},d(o){o&&E(l),j(t)}}}function Oe(n){let l,t;return l=new de({props:{Icon:Je,label:"Close"}}),l.$on("click",n[47]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p:zl,i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Sl(n){let l,t,e,o,i,a=n[9]&&Le(n),u=n[13]&&Me(n),r=n[8]&&Ve(n),m=!n[23]&&Oe(n);return{c(){a&&a.c(),l=P(),u&&u.c(),t=P(),r&&r.c(),e=P(),m&&m.c(),o=ee()},l(s){a&&a.l(s),l=W(s),u&&u.l(s),t=W(s),r&&r.l(s),e=W(s),m&&m.l(s),o=ee()},m(s,w){a&&a.m(s,w),V(s,l,w),u&&u.m(s,w),V(s,t,w),r&&r.m(s,w),V(s,e,w),m&&m.m(s,w),V(s,o,w),i=!0},p(s,w){s[9]?a?(a.p(s,w),w[0]&512&&g(a,1)):(a=Le(s),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(R(),d(a,1,1,()=>{a=null}),A()),s[13]?u?(u.p(s,w),w[0]&8192&&g(u,1)):(u=Me(s),u.c(),g(u,1),u.m(t.parentNode,t)):u&&(R(),d(u,1,1,()=>{u=null}),A()),s[8]?r?(r.p(s,w),w[0]&256&&g(r,1)):(r=Ve(s),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(R(),d(r,1,1,()=>{r=null}),A()),s[23]?m&&(R(),d(m,1,1,()=>{m=null}),A()):m?(m.p(s,w),w[0]&8388608&&g(m,1)):(m=Oe(s),m.c(),g(m,1),m.m(o.parentNode,o))},i(s){i||(g(a),g(u),g(r),g(m),i=!0)},o(s){d(a),d(u),d(r),d(m),i=!1},d(s){s&&(E(l),E(t),E(e),E(o)),a&&a.d(s),u&&u.d(s),r&&r.d(s),m&&m.d(s)}}}function Hl(n){let l,t;return l=new pe({props:{src:n[30].video.url,"data-testid":"detailed-video",alt:n[30].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1073741824&&(i.src=e[30].video.url),o[0]&1073741824&&(i.alt=e[30].caption||""),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Xl(n){let l,t;return l=new be({props:{"data-testid":"detailed-image",src:n[30].image.url,alt:n[30].caption||"",title:n[30].caption||null,class:n[30].caption&&"with-caption",loading:"lazy"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1073741824&&(i.src=e[30].image.url),o[0]&1073741824&&(i.alt=e[30].caption||""),o[0]&1073741824&&(i.title=e[30].caption||null),o[0]&1073741824&&(i.class=e[30].caption&&"with-caption"),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Ce(n){let l,t=n[30].caption+"",e;return{c(){l=S("caption"),e=Se(t),this.h()},l(o){l=H(o,"CAPTION",{class:!0});var i=X(l);e=He(i,t),i.forEach(E),this.h()},h(){B(l,"class","caption svelte-1svp6w8")},m(o,i){V(o,l,i),O(l,e)},p(o,i){i[0]&1073741824&&t!==(t=o[30].caption+"")&&Xe(e,t)},d(o){o&&E(l)}}}function Jl(n){let l,t,e,o;return l=new Qe({}),e=new pe({props:{src:n[66].video.url,title:n[66].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[65]+1),alt:"",loading:"lazy",loop:!1}}),{c(){D(l.$$.fragment),t=P(),D(e.$$.fragment)},l(i){N(l.$$.fragment,i),t=W(i),N(e.$$.fragment,i)},m(i,a){U(l,i,a),V(i,t,a),U(e,i,a),o=!0},p(i,a){const u={};a[0]&2097152&&(u.src=i[66].video.url),a[0]&2097152&&(u.title=i[66].caption||null),e.$set(u)},i(i){o||(g(l.$$.fragment,i),g(e.$$.fragment,i),o=!0)},o(i){d(l.$$.fragment,i),d(e.$$.fragment,i),o=!1},d(i){i&&E(t),j(l,i),j(e,i)}}}function Kl(n){let l,t;return l=new be({props:{src:n[66].image.url,title:n[66].caption||null,"data-testid":"thumbnail "+(n[65]+1),alt:"",loading:"lazy"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&2097152&&(i.src=e[66].image.url),o[0]&2097152&&(i.title=e[66].caption||null),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Re(n){let l,t,e,o,i,a=n[65],u,r,m;const s=[Kl,Jl],w=[];function c(k,p){return"image"in k[66]?0:1}t=c(n),e=w[t]=s[t](n);const h=()=>n[49](l,a),b=()=>n[49](null,a);function y(){return n[50](n[65])}return{c(){l=S("button"),e.c(),o=P(),this.h()},l(k){l=H(k,"BUTTON",{class:!0,"aria-label":!0});var p=X(l);e.l(p),o=W(p),p.forEach(E),this.h()},h(){B(l,"class","thumbnail-item thumbnail-small svelte-1svp6w8"),B(l,"aria-label",i="Thumbnail "+(n[65]+1)+" of "+n[21].length),F(l,"selected",n[1]===n[65]&&n[12]!=="minimal")},m(k,p){V(k,l,p),w[t].m(l,null),O(l,o),h(),u=!0,r||(m=le(l,"click",y),r=!0)},p(k,p){n=k;let _=t;t=c(n),t===_?w[t].p(n,p):(R(),d(w[_],1,1,()=>{w[_]=null}),A(),e=w[t],e?e.p(n,p):(e=w[t]=s[t](n),e.c()),g(e,1),e.m(l,o)),(!u||p[0]&2097152&&i!==(i="Thumbnail "+(n[65]+1)+" of "+n[21].length))&&B(l,"aria-label",i),a!==n[65]&&(b(),a=n[65],h()),(!u||p[0]&4098)&&F(l,"selected",n[1]===n[65]&&n[12]!=="minimal")},i(k){u||(g(e),u=!0)},o(k){d(e),u=!1},d(k){k&&E(l),w[t].d(),b(),r=!1,m()}}}function Ae(n){let l,t;return l=new Pl({props:{i18n:n[10],$$slots:{default:[Yl]},$$scope:{ctx:n}}}),l.$on("clear",n[55]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1024&&(i.i18n=e[10]),o[0]&538903552|o[2]&64&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Pe(n){let l,t;return l=new de({props:{Icon:Cl,label:n[10]("common.upload"),$$slots:{default:[Ql]},$$scope:{ctx:n}}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1024&&(i.label=e[10]("common.upload")),o[0]&538902528|o[2]&64&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Ql(n){let l,t,e;function o(a){n[52](a)}let i={icon_upload:!0,filetype:n[17],file_count:"multiple",max_file_size:n[18],root:n[16],stream_handler:n[20],upload:n[19]};return n[29]!==void 0&&(i.uploading=n[29]),l=new Rl({props:i}),ue.push(()=>Bl(l,"uploading",o)),l.$on("load",n[53]),l.$on("error",n[54]),{c(){D(l.$$.fragment)},l(a){N(l.$$.fragment,a)},m(a,u){U(l,a,u),e=!0},p(a,u){const r={};u[0]&131072&&(r.filetype=a[17]),u[0]&262144&&(r.max_file_size=a[18]),u[0]&65536&&(r.root=a[16]),u[0]&1048576&&(r.stream_handler=a[20]),u[0]&524288&&(r.upload=a[19]),!t&&u[0]&536870912&&(t=!0,r.uploading=a[29],Dl(()=>t=!1)),l.$set(r)},i(a){e||(g(l.$$.fragment,a),e=!0)},o(a){d(l.$$.fragment,a),e=!1},d(a){j(l,a)}}}function Yl(n){let l,t,e=n[19]&&n[20]&&Pe(n);return{c(){e&&e.c(),l=ee()},l(o){e&&e.l(o),l=ee()},m(o,i){e&&e.m(o,i),V(o,l,i),t=!0},p(o,i){o[19]&&o[20]?e?(e.p(o,i),i[0]&1572864&&g(e,1)):(e=Pe(o),e.c(),g(e,1),e.m(l.parentNode,l)):e&&(R(),d(e,1,1,()=>{e=null}),A())},i(o){t||(g(e),t=!0)},o(o){d(e),t=!1},d(o){o&&E(l),e&&e.d(o)}}}function Zl(n){let l,t,e,o;return l=new Qe({}),e=new pe({props:{src:n[63].video.url,title:n[63].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[65]+1),alt:"",loading:"lazy",loop:!1}}),{c(){D(l.$$.fragment),t=P(),D(e.$$.fragment)},l(i){N(l.$$.fragment,i),t=W(i),N(e.$$.fragment,i)},m(i,a){U(l,i,a),V(i,t,a),U(e,i,a),o=!0},p(i,a){const u={};a[0]&2097152&&(u.src=i[63].video.url),a[0]&2097152&&(u.title=i[63].caption||null),e.$set(u)},i(i){o||(g(l.$$.fragment,i),g(e.$$.fragment,i),o=!0)},o(i){d(l.$$.fragment,i),d(e.$$.fragment,i),o=!1},d(i){i&&E(t),j(l,i),j(e,i)}}}function $l(n){let l,t;return l=new be({props:{alt:n[63].caption||"",src:typeof n[63].image=="string"?n[63].image:n[63].image.url,loading:"lazy"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&2097152&&(i.alt=e[63].caption||""),o[0]&2097152&&(i.src=typeof e[63].image=="string"?e[63].image:e[63].image.url),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function We(n){let l,t=n[63].caption+"",e;return{c(){l=S("div"),e=Se(t),this.h()},l(o){l=H(o,"DIV",{class:!0});var i=X(l);e=He(i,t),i.forEach(E),this.h()},h(){B(l,"class","caption-label svelte-1svp6w8")},m(o,i){V(o,l,i),O(l,e)},p(o,i){i[0]&2097152&&t!==(t=o[63].caption+"")&&Xe(e,t)},d(o){o&&E(l)}}}function qe(n){let l,t,e,o,i;t=new Je({});function a(){return n[57](n[65])}return{c(){l=S("button"),D(t.$$.fragment),this.h()},l(u){l=H(u,"BUTTON",{class:!0,"aria-label":!0});var r=X(l);N(t.$$.fragment,r),r.forEach(E),this.h()},h(){B(l,"class","delete-button svelte-1svp6w8"),B(l,"aria-label","Delete image")},m(u,r){V(u,l,r),U(t,l,null),e=!0,o||(i=le(l,"click",Nl(a)),o=!0)},p(u,r){n=u},i(u){e||(g(t.$$.fragment,u),e=!0)},o(u){d(t.$$.fragment,u),e=!1},d(u){u&&E(l),j(t),o=!1,i()}}}function Fe(n){let l,t,e,o,i,a,u,r,m,s,w;const c=[$l,Zl],h=[];function b(_,z){return"image"in _[63]?0:1}e=b(n),o=h[e]=c[e](n);let y=n[63].caption&&We(n);function k(){return n[56](n[65])}let p=n[11]&&qe(n);return{c(){l=S("div"),t=S("button"),o.c(),i=P(),y&&y.c(),u=P(),p&&p.c(),r=P(),this.h()},l(_){l=H(_,"DIV",{class:!0});var z=X(l);t=H(z,"BUTTON",{class:!0,"aria-label":!0});var C=X(t);o.l(C),i=W(C),y&&y.l(C),C.forEach(E),u=W(z),p&&p.l(z),r=W(z),z.forEach(E),this.h()},h(){B(t,"class","thumbnail-item thumbnail-lg svelte-1svp6w8"),B(t,"aria-label",a="Thumbnail "+(n[65]+1)+" of "+n[21].length),F(t,"selected",n[1]===n[65]),B(l,"class","gallery-item svelte-1svp6w8")},m(_,z){V(_,l,z),O(l,t),h[e].m(t,null),O(t,i),y&&y.m(t,null),O(l,u),p&&p.m(l,null),O(l,r),m=!0,s||(w=le(t,"click",k),s=!0)},p(_,z){n=_;let C=e;e=b(n),e===C?h[e].p(n,z):(R(),d(h[C],1,1,()=>{h[C]=null}),A(),o=h[e],o?o.p(n,z):(o=h[e]=c[e](n),o.c()),g(o,1),o.m(t,i)),n[63].caption?y?y.p(n,z):(y=We(n),y.c(),y.m(t,null)):y&&(y.d(1),y=null),(!m||z[0]&2097152&&a!==(a="Thumbnail "+(n[65]+1)+" of "+n[21].length))&&B(t,"aria-label",a),(!m||z[0]&2)&&F(t,"selected",n[1]===n[65]),n[11]?p?(p.p(n,z),z[0]&2048&&g(p,1)):(p=qe(n),p.c(),g(p,1),p.m(l,r)):p&&(R(),d(p,1,1,()=>{p=null}),A())},i(_){m||(g(o),g(p),m=!0)},o(_){d(o),d(p),m=!1},d(_){_&&E(l),h[e].d(),y&&y.d(),p&&p.d(),s=!1,w()}}}function xl(n){let l,t;return l=new Ke({}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function et(n){let l,t,e,o,i,a,u;wl(n[42]);let r=n[2]&&Ue(n);const m=[Gl,Fl],s=[];function w(c,h){return c[0]==null||c[21]==null||c[21].length===0?0:1}return t=w(n),e=s[t]=m[t](n),{c(){r&&r.c(),l=P(),e.c(),o=ee()},l(c){r&&r.l(c),l=W(c),e.l(c),o=ee()},m(c,h){r&&r.m(c,h),V(c,l,h),s[t].m(c,h),V(c,o,h),i=!0,a||(u=le(Ye,"resize",n[42]),a=!0)},p(c,h){c[2]?r?(r.p(c,h),h[0]&4&&g(r,1)):(r=Ue(c),r.c(),g(r,1),r.m(l.parentNode,l)):r&&(R(),d(r,1,1,()=>{r=null}),A());let b=t;t=w(c),t===b?s[t].p(c,h):(R(),d(s[b],1,1,()=>{s[b]=null}),A(),e=s[t],e?e.p(c,h):(e=s[t]=m[t](c),e.c()),g(e,1),e.m(o.parentNode,o))},i(c){i||(g(r),g(e),i=!0)},o(c){d(r),d(e),i=!1},d(c){c&&(E(l),E(o)),r&&r.d(c),s[t].d(c),a=!1,u()}}}function lt(n,l,t){let e,o,i,{show_label:a=!0}=l,{label:u}=l,{value:r=null}=l,{columns:m=[2]}=l,{rows:s=void 0}=l,{height:w="auto"}=l,{preview:c}=l,{allow_preview:h=!0}=l,{object_fit:b="cover"}=l,{show_share_button:y=!1}=l,{show_download_button:k=!1}=l,{i18n:p}=l,{selected_index:_=null}=l,{interactive:z}=l,{_fetch:C}=l,{mode:T="normal"}=l,{show_fullscreen_button:v=!0}=l,{display_icon_button_wrapper_top_corner:q=!1}=l,{fullscreen:Q=!1}=l,{root:Y=""}=l,{file_types:L=["image","video"]}=l,{max_file_size:te=null}=l,{upload:we=void 0}=l,{stream_handler:ke=void 0}=l,ve=!1,ce;const Z=kl();let ne=!0,I=null,re=m,_e=r;_==null&&c&&(r!=null&&r.length)&&(_=0);let me=_;function ye(f){const M=f.target,G=f.offsetX,x=M.offsetWidth/2;G<x?t(1,_=e):t(1,_=o)}function Ze(f){switch(f.code){case"Escape":f.preventDefault(),t(1,_=null);break;case"ArrowLeft":f.preventDefault(),t(1,_=e);break;case"ArrowRight":f.preventDefault(),t(1,_=o);break}}let $=[],J;async function $e(f){var Be;if(typeof f!="number"||(await El(),$[f]===void 0))return;(Be=$[f])==null||Be.focus();const{left:M,width:G}=J.getBoundingClientRect(),{left:fe,width:x}=$[f].getBoundingClientRect(),oe=fe-M+x/2-G/2+J.scrollLeft;J&&typeof J.scrollTo=="function"&&J.scrollTo({left:oe<0?0:oe,behavior:"smooth"})}let Ee=0;async function Te(f,M){let G;try{G=await C(f)}catch(oe){if(oe instanceof TypeError){window.open(f,"_blank","noreferrer");return}throw oe}const fe=await G.blob(),x=URL.createObjectURL(fe),ae=document.createElement("a");ae.href=x,ae.download=M,ae.click(),URL.revokeObjectURL(x)}let Ie=!1;function ie(){J&&t(28,Ie=J.scrollWidth>J.clientWidth)}vl(()=>(ie(),document.addEventListener("fullscreenchange",()=>{t(23,ve=!!document.fullscreenElement)}),window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)));function ze(f){if(!r||!I)return;const M=I[f];let G;"image"in M?G={file:M.image,index:f}:"video"in M&&(G={file:M.video,index:f}),G&&Z("delete",G)}let he=!1;function xe(){t(27,Ee=Ye.innerHeight)}const el=()=>{const f="image"in i?i==null?void 0:i.image:i==null?void 0:i.video;if(f==null)return;const{url:M,orig_name:G}=f;M&&Te(M,G??"image")};function ll(f){ge.call(this,n,f)}function tl(f){ge.call(this,n,f)}function nl(f){ge.call(this,n,f)}const il=()=>{t(1,_=null),Z("preview_close")},ol=f=>ye(f);function rl(f,M){ue[f?"unshift":"push"](()=>{$[M]=f,t(26,$)})}const fl=f=>t(1,_=f);function al(f){ue[f?"unshift":"push"](()=>{J=f,t(22,J)})}function ul(f){he=f,t(29,he)}const sl=f=>Z("upload",f.detail),cl=f=>Z("error",f.detail),_l=()=>t(0,r=[]),ml=f=>{_===null&&h&&Z("preview_open"),t(1,_=f)},hl=f=>ze(f);function gl(f){ue[f?"unshift":"push"](()=>{ce=f,t(24,ce)})}return n.$$set=f=>{"show_label"in f&&t(2,a=f.show_label),"label"in f&&t(3,u=f.label),"value"in f&&t(0,r=f.value),"columns"in f&&t(36,m=f.columns),"rows"in f&&t(4,s=f.rows),"height"in f&&t(5,w=f.height),"preview"in f&&t(37,c=f.preview),"allow_preview"in f&&t(6,h=f.allow_preview),"object_fit"in f&&t(7,b=f.object_fit),"show_share_button"in f&&t(8,y=f.show_share_button),"show_download_button"in f&&t(9,k=f.show_download_button),"i18n"in f&&t(10,p=f.i18n),"selected_index"in f&&t(1,_=f.selected_index),"interactive"in f&&t(11,z=f.interactive),"_fetch"in f&&t(38,C=f._fetch),"mode"in f&&t(12,T=f.mode),"show_fullscreen_button"in f&&t(13,v=f.show_fullscreen_button),"display_icon_button_wrapper_top_corner"in f&&t(14,q=f.display_icon_button_wrapper_top_corner),"fullscreen"in f&&t(15,Q=f.fullscreen),"root"in f&&t(16,Y=f.root),"file_types"in f&&t(17,L=f.file_types),"max_file_size"in f&&t(18,te=f.max_file_size),"upload"in f&&t(19,we=f.upload),"stream_handler"in f&&t(20,ke=f.stream_handler)},n.$$.update=()=>{if(n.$$.dirty[0]&1|n.$$.dirty[1]&256&&t(39,ne=r==null||r.length===0?!0:ne),n.$$.dirty[0]&1&&t(21,I=r==null?null:r.map(f=>"video"in f?{video:f.video,caption:f.caption}:"image"in f?{image:f.image,caption:f.caption}:{})),n.$$.dirty[0]&2097152|n.$$.dirty[1]&32)if(I&&m){const f=I.length;Array.isArray(m)?t(25,re=m.map(M=>Math.min(M,f))):t(25,re=Math.min(m,f))}else t(25,re=m);n.$$.dirty[0]&3|n.$$.dirty[1]&832&&(Wl(_e,r)||(ne?(t(1,_=c&&(r!=null&&r.length)?0:null),t(39,ne=!1)):_!==null&&r!==null?t(1,_=Math.max(0,Math.min(_,r.length-1))):t(1,_=null),Z("change"),t(40,_e=r))),n.$$.dirty[0]&2097154|n.$$.dirty[1]&1024&&_!==me&&(t(41,me=_),_!==null&&(I!=null&&t(1,_=Math.max(0,Math.min(_,I.length-1))),Z("select",{index:_,value:I==null?void 0:I[_]}))),n.$$.dirty[0]&2097154&&(e=((_??0)+((I==null?void 0:I.length)??0)-1)%((I==null?void 0:I.length)??0)),n.$$.dirty[0]&2097154&&(o=((_??0)+1)%((I==null?void 0:I.length)??0)),n.$$.dirty[0]&66&&h&&$e(_),n.$$.dirty[0]&2097154&&t(30,i=_!=null&&I!=null?I[_]:null),n.$$.dirty[0]&2097152&&ie(),n.$$.dirty[0]&4194304&&J&&ie()},[r,_,a,u,s,w,h,b,y,k,p,z,T,v,q,Q,Y,L,te,we,ke,I,J,ve,ce,re,$,Ee,Ie,he,i,Z,ye,Ze,Te,ze,m,c,C,ne,_e,me,xe,el,ll,tl,nl,il,ol,rl,fl,al,ul,sl,cl,_l,ml,hl,gl]}class dt extends dl{constructor(l){super(),bl(this,l,lt,et,pl,{show_label:2,label:3,value:0,columns:36,rows:4,height:5,preview:37,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9,i18n:10,selected_index:1,interactive:11,_fetch:38,mode:12,show_fullscreen_button:13,display_icon_button_wrapper_top_corner:14,fullscreen:15,root:16,file_types:17,max_file_size:18,upload:19,stream_handler:20},null,[-1,-1,-1])}}export{dt as default};
//# sourceMappingURL=Gallery.PtO5k12Y.js.map
