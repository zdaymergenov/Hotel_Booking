{"version":3,"file":"Index.C2hLITrf.js","sources":["../../../../../../../dataframe/shared/utils/sort_utils.ts","../../../../../../../dataframe/shared/utils/filter_utils.ts","../../../../../../../dataframe/shared/utils/table_utils.ts","../../../../../../../dataframe/shared/utils/selection_utils.ts","../../../../../../../dataframe/shared/context/dataframe_context.ts","../../../../../../../dataframe/shared/icons/SelectionButtons.svelte","../../../../../../../dataframe/shared/BooleanCell.svelte","../../../../../../../dataframe/shared/EditableCell.svelte","../../../../../../../dataframe/shared/RowNumber.svelte","../../../../../../../dataframe/shared/CellMenuButton.svelte","../../../../../../../dataframe/shared/icons/Padlock.svelte","../../../../../../../dataframe/shared/icons/SortArrowUp.svelte","../../../../../../../dataframe/shared/icons/SortArrowDown.svelte","../../../../../../../dataframe/shared/CellMenuIcons.svelte","../../../../../../../dataframe/shared/TableHeader.svelte","../../../../../../../dataframe/shared/TableCell.svelte","../../../../../../../dataframe/shared/EmptyRowButton.svelte","../../../../../../../dataframe/shared/VirtualTable.svelte","../../../../../../../dataframe/shared/FilterMenu.svelte","../../../../../../../dataframe/shared/CellMenu.svelte","../../../../../../../dataframe/shared/Toolbar.svelte","../../../../../../../dataframe/shared/utils/utils.ts","../../../../../../../dataframe/shared/utils/data_processing.ts","../../../../../../../dataframe/shared/utils/keyboard_utils.ts","../../../../../../../dataframe/shared/utils/drag_utils.ts","../../../../../../../dataframe/shared/Table.svelte","../../../../../../../dataframe/Index.svelte"],"sourcesContent":["import type { Headers, CellValue } from \"../types\";\nimport { sort_table_data } from \"./table_utils\";\n\nexport type SortDirection = \"asc\" | \"desc\";\n\nexport function get_sort_status(\n\tname: string,\n\tsort_columns: { col: number; direction: SortDirection }[],\n\theaders: Headers\n): \"none\" | \"asc\" | \"desc\" {\n\tif (!sort_columns.length) return \"none\";\n\n\tconst sort_item = sort_columns.find((item) => {\n\t\tconst col = item.col;\n\t\tif (col < 0 || col >= headers.length) return false;\n\t\treturn headers[col] === name;\n\t});\n\n\tif (!sort_item) return \"none\";\n\treturn sort_item.direction;\n}\n\nexport function sort_data(\n\tdata: { id: string; value: CellValue }[][],\n\tsort_columns: { col: number; direction: SortDirection }[]\n): number[] {\n\tif (!data || !data.length || !data[0]) {\n\t\treturn [];\n\t}\n\n\tif (sort_columns.length > 0) {\n\t\tconst row_indices = [...Array(data.length)].map((_, i) => i);\n\t\trow_indices.sort((row_a_idx, row_b_idx) => {\n\t\t\tconst row_a = data[row_a_idx];\n\t\t\tconst row_b = data[row_b_idx];\n\n\t\t\tfor (const { col: sort_by, direction } of sort_columns) {\n\t\t\t\tif (\n\t\t\t\t\t!row_a ||\n\t\t\t\t\t!row_b ||\n\t\t\t\t\tsort_by < 0 ||\n\t\t\t\t\tsort_by >= row_a.length ||\n\t\t\t\t\tsort_by >= row_b.length ||\n\t\t\t\t\t!row_a[sort_by] ||\n\t\t\t\t\t!row_b[sort_by]\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst val_a = row_a[sort_by].value;\n\t\t\t\tconst val_b = row_b[sort_by].value;\n\t\t\t\tconst comparison = val_a < val_b ? -1 : val_a > val_b ? 1 : 0;\n\n\t\t\t\tif (comparison !== 0) {\n\t\t\t\t\treturn direction === \"asc\" ? comparison : -comparison;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t});\n\t\treturn row_indices;\n\t}\n\treturn [...Array(data.length)].map((_, i) => i);\n}\n\nexport function sort_data_and_preserve_selection(\n\tdata: { id: string; value: CellValue }[][],\n\tdisplay_value: string[][] | null,\n\tstyling: string[][] | null,\n\tsort_columns: { col: number; direction: SortDirection }[],\n\tselected: [number, number] | false,\n\tget_current_indices: (\n\t\tid: string,\n\t\tdata: { id: string; value: CellValue }[][]\n\t) => [number, number]\n): { data: typeof data; selected: [number, number] | false } {\n\tlet id = null;\n\tif (selected && selected[0] in data && selected[1] in data[selected[0]]) {\n\t\tid = data[selected[0]][selected[1]].id;\n\t}\n\n\tsort_table_data(data, display_value, styling, sort_columns);\n\n\tlet new_selected = selected;\n\tif (id) {\n\t\tconst [i, j] = get_current_indices(id, data);\n\t\tnew_selected = [i, j];\n\t}\n\n\treturn { data, selected: new_selected };\n}\n","import { filter_table_data } from \"./table_utils\";\nimport type { CellValue } from \"../types\";\n\nexport type FilterDatatype = \"string\" | \"number\";\n\nexport function filter_data(\n\tdata: { id: string; value: CellValue }[][],\n\tfilter_columns: {\n\t\tcol: number;\n\t\tdatatype: FilterDatatype;\n\t\tfilter: string;\n\t\tvalue: string;\n\t}[]\n): number[] {\n\tif (!data || !data.length || !data[0]) {\n\t\treturn [];\n\t}\n\tlet row_indices = [...Array(data.length)].map((_, i) => i);\n\n\tif (filter_columns.length > 0) {\n\t\tfilter_columns.forEach((column) => {\n\t\t\tif (column.datatype === \"string\") {\n\t\t\t\tswitch (column.filter) {\n\t\t\t\t\tcase \"Contains\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) =>\n\t\t\t\t\t\t\tdata[i][column.col]?.value.toString().includes(column.value)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Does not contain\":\n\t\t\t\t\t\trow_indices = row_indices.filter(\n\t\t\t\t\t\t\t(i) =>\n\t\t\t\t\t\t\t\t!data[i][column.col]?.value.toString().includes(column.value)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Starts with\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) =>\n\t\t\t\t\t\t\tdata[i][column.col]?.value.toString().startsWith(column.value)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Ends with\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) =>\n\t\t\t\t\t\t\tdata[i][column.col]?.value.toString().endsWith(column.value)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Is\":\n\t\t\t\t\t\trow_indices = row_indices.filter(\n\t\t\t\t\t\t\t(i) => data[i][column.col]?.value.toString() === column.value\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Is not\":\n\t\t\t\t\t\trow_indices = row_indices.filter(\n\t\t\t\t\t\t\t(i) => !(data[i][column.col]?.value.toString() === column.value)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Is empty\":\n\t\t\t\t\t\trow_indices = row_indices.filter(\n\t\t\t\t\t\t\t(i) => data[i][column.col]?.value.toString() === \"\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Is not empty\":\n\t\t\t\t\t\trow_indices = row_indices.filter(\n\t\t\t\t\t\t\t(i) => !(data[i][column.col]?.value.toString() === \"\")\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (column.datatype === \"number\") {\n\t\t\t\tswitch (column.filter) {\n\t\t\t\t\tcase \"=\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!isNaN(Number(data[i][column.col]?.value)) &&\n\t\t\t\t\t\t\t\t!isNaN(Number(column.value))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tNumber(data[i][column.col]?.value) === Number(column.value)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"≠\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!isNaN(Number(data[i][column.col]?.value)) &&\n\t\t\t\t\t\t\t\t!isNaN(Number(column.value))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t\t\tNumber(data[i][column.col]?.value) === Number(column.value)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \">\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!isNaN(Number(data[i][column.col]?.value)) &&\n\t\t\t\t\t\t\t\t!isNaN(Number(column.value))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tNumber(data[i][column.col]?.value) > Number(column.value)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"<\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!isNaN(Number(data[i][column.col]?.value)) &&\n\t\t\t\t\t\t\t\t!isNaN(Number(column.value))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tNumber(data[i][column.col]?.value) < Number(column.value)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"≥\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!isNaN(Number(data[i][column.col]?.value)) &&\n\t\t\t\t\t\t\t\t!isNaN(Number(column.value))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tNumber(data[i][column.col]?.value) >= Number(column.value)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"≤\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!isNaN(Number(data[i][column.col]?.value)) &&\n\t\t\t\t\t\t\t\t!isNaN(Number(column.value))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tNumber(data[i][column.col]?.value) <= Number(column.value)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Is empty\":\n\t\t\t\t\t\trow_indices = row_indices.filter(\n\t\t\t\t\t\t\t(i) => data[i][column.col]?.value.toString() === \"\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Is not empty\":\n\t\t\t\t\t\trow_indices = row_indices.filter((i) => {\n\t\t\t\t\t\t\tif (!isNaN(Number(data[i][column.col]?.value))) {\n\t\t\t\t\t\t\t\treturn !(data[i][column.col]?.value.toString() === \"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn row_indices;\n\t}\n\treturn [...Array(data.length)].map((_, i) => i);\n}\n\nexport function filter_data_and_preserve_selection(\n\tdata: { id: string; value: CellValue }[][],\n\tdisplay_value: string[][] | null,\n\tstyling: string[][] | null,\n\tfilter_columns: {\n\t\tcol: number;\n\t\tdatatype: FilterDatatype;\n\t\tfilter: string;\n\t\tvalue: string;\n\t}[],\n\tselected: [number, number] | false,\n\tget_current_indices: (\n\t\tid: string,\n\t\tdata: { id: string; value: CellValue }[][]\n\t) => [number, number],\n\toriginal_data?: { id: string; value: CellValue }[][],\n\toriginal_display_value?: string[][] | null,\n\toriginal_styling?: string[][] | null\n): { data: typeof data; selected: [number, number] | false } {\n\tlet id = null;\n\tif (selected && selected[0] in data && selected[1] in data[selected[0]]) {\n\t\tid = data[selected[0]][selected[1]].id;\n\t}\n\n\tfilter_table_data(\n\t\tdata,\n\t\tdisplay_value,\n\t\tstyling,\n\t\tfilter_columns,\n\t\toriginal_data,\n\t\toriginal_display_value,\n\t\toriginal_styling\n\t);\n\n\tlet new_selected = selected;\n\tif (id) {\n\t\tconst [i, j] = get_current_indices(id, data);\n\t\tnew_selected = [i, j];\n\t}\n\n\treturn { data, selected: new_selected };\n}\n","import type {\n\tCellValue,\n\tHeaders,\n\tHeadersWithIDs,\n\tTableCell,\n\tTableData\n} from \"../types\";\nimport { sort_data } from \"./sort_utils\";\nimport { filter_data } from \"./filter_utils\";\nimport type { SortDirection } from \"./sort_utils\";\nimport type { FilterDatatype } from \"./filter_utils\";\nimport { dsvFormat } from \"d3-dsv\";\n\nexport function make_cell_id(row: number, col: number): string {\n\treturn `cell-${row}-${col}`;\n}\n\nexport function make_header_id(col: number): string {\n\treturn `header-${col}`;\n}\n\nexport function get_max(data: TableData): TableCell[] {\n\tif (!data || !data.length) return [];\n\tlet max = data[0].slice();\n\tfor (let i = 0; i < data.length; i++) {\n\t\tfor (let j = 0; j < data[i].length; j++) {\n\t\t\tif (`${max[j].value}`.length < `${data[i][j].value}`.length) {\n\t\t\t\tmax[j] = data[i][j];\n\t\t\t}\n\t\t}\n\t}\n\treturn max;\n}\n\nexport function sort_table_data(\n\tdata: TableData,\n\tdisplay_value: string[][] | null,\n\tstyling: string[][] | null,\n\tsort_columns: { col: number; direction: SortDirection }[]\n): void {\n\tif (!sort_columns.length) return;\n\tif (!data || !data.length) return;\n\n\tconst indices = sort_data(data, sort_columns);\n\n\tconst new_data = indices.map((i: number) => data[i]);\n\tdata.splice(0, data.length, ...new_data);\n\n\tif (display_value) {\n\t\tconst new_display = indices.map((i: number) => display_value[i]);\n\t\tdisplay_value.splice(0, display_value.length, ...new_display);\n\t}\n\n\tif (styling) {\n\t\tconst new_styling = indices.map((i: number) => styling[i]);\n\t\tstyling.splice(0, styling.length, ...new_styling);\n\t}\n}\n\nexport function filter_table_data(\n\tdata: TableData,\n\tdisplay_value: string[][] | null,\n\tstyling: string[][] | null,\n\tfilter_columns: {\n\t\tcol: number;\n\t\tdatatype: FilterDatatype;\n\t\tfilter: string;\n\t\tvalue: string;\n\t}[],\n\toriginal_data?: TableData,\n\toriginal_display_value?: string[][] | null,\n\toriginal_styling?: string[][] | null\n): void {\n\tconst base_data = original_data ?? data;\n\tconst base_display_value = original_display_value ?? display_value;\n\tconst base_styling = original_styling ?? styling;\n\n\tif (!filter_columns.length) {\n\t\tdata.splice(0, data.length, ...base_data.map((row) => [...row]));\n\t\tif (display_value && base_display_value) {\n\t\t\tdisplay_value.splice(\n\t\t\t\t0,\n\t\t\t\tdisplay_value.length,\n\t\t\t\t...base_display_value.map((row) => [...row])\n\t\t\t);\n\t\t}\n\t\tif (styling && base_styling) {\n\t\t\tstyling.splice(0, styling.length, ...base_styling.map((row) => [...row]));\n\t\t}\n\t\treturn;\n\t}\n\tif (!data || !data.length) return;\n\n\tconst indices = filter_data(base_data, filter_columns);\n\n\tconst new_data = indices.map((i: number) => base_data[i]);\n\tdata.splice(0, data.length, ...new_data);\n\n\tif (display_value && base_display_value) {\n\t\tconst new_display = indices.map((i: number) => base_display_value[i]);\n\t\tdisplay_value.splice(0, display_value.length, ...new_display);\n\t}\n\n\tif (styling && base_styling) {\n\t\tconst new_styling = indices.map((i: number) => base_styling[i]);\n\t\tstyling.splice(0, styling.length, ...new_styling);\n\t}\n}\n\nexport async function copy_table_data(\n\tdata: TableData,\n\tselected_cells: [number, number][] | null\n): Promise<void> {\n\tif (!data || !data.length) return;\n\n\tconst cells_to_copy =\n\t\tselected_cells ||\n\t\tdata.flatMap((row, r) => row.map((_, c) => [r, c] as [number, number]));\n\n\tconst csv = cells_to_copy.reduce(\n\t\t(acc: { [key: string]: { [key: string]: string } }, [row, col]) => {\n\t\t\tacc[row] = acc[row] || {};\n\t\t\tconst value = String(data[row][col].value);\n\t\t\tacc[row][col] =\n\t\t\t\tvalue.includes(\",\") || value.includes('\"') || value.includes(\"\\n\")\n\t\t\t\t\t? `\"${value.replace(/\"/g, '\"\"')}\"`\n\t\t\t\t\t: value;\n\t\t\treturn acc;\n\t\t},\n\t\t{}\n\t);\n\n\tconst rows = Object.keys(csv).sort((a, b) => +a - +b);\n\tif (!rows.length) return;\n\n\tconst cols = Object.keys(csv[rows[0]]).sort((a, b) => +a - +b);\n\tconst text = rows\n\t\t.map((r) => cols.map((c) => csv[r][c] || \"\").join(\",\"))\n\t\t.join(\"\\n\");\n\n\ttry {\n\t\tawait navigator.clipboard.writeText(text);\n\t} catch (err) {\n\t\tthrow new Error(\"Failed to copy to clipboard: \" + (err as Error).message);\n\t}\n}\n\n// File Import/Export\nexport function guess_delimiter(\n\ttext: string,\n\tpossibleDelimiters: string[]\n): string[] {\n\treturn possibleDelimiters.filter(weedOut);\n\n\tfunction weedOut(delimiter: string): boolean {\n\t\tvar cache = -1;\n\t\treturn text.split(\"\\n\").every(checkLength);\n\n\t\tfunction checkLength(line: string): boolean {\n\t\t\tif (!line) return true;\n\t\t\tvar length = line.split(delimiter).length;\n\t\t\tif (cache < 0) cache = length;\n\t\t\treturn cache === length && length > 1;\n\t\t}\n\t}\n}\n\nexport function data_uri_to_blob(data_uri: string): Blob {\n\tconst byte_str = atob(data_uri.split(\",\")[1]);\n\tconst mime_str = data_uri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\tconst ab = new ArrayBuffer(byte_str.length);\n\tconst ia = new Uint8Array(ab);\n\tfor (let i = 0; i < byte_str.length; i++) {\n\t\tia[i] = byte_str.charCodeAt(i);\n\t}\n\treturn new Blob([ab], { type: mime_str });\n}\n\nexport function handle_file_upload(\n\tdata_uri: string,\n\tupdate_headers: (headers: Headers) => HeadersWithIDs[],\n\tupdate_values: (values: CellValue[][]) => void\n): void {\n\tconst blob = data_uri_to_blob(data_uri);\n\tconst reader = new FileReader();\n\treader.addEventListener(\"loadend\", (e) => {\n\t\tif (!e?.target?.result || typeof e.target.result !== \"string\") return;\n\t\tconst [delimiter] = guess_delimiter(e.target.result, [\",\", \"\\t\"]);\n\t\tconst [head, ...rest] = dsvFormat(delimiter).parseRows(e.target.result);\n\t\tupdate_headers(head);\n\t\tupdate_values(rest);\n\t});\n\treader.readAsText(blob);\n}\n","import type { CellCoordinate, CellValue } from \"./../types\";\n\nexport type CellData = { id: string; value: CellValue };\n\nexport function is_cell_in_selection(\n\tcoords: [number, number],\n\tselected_cells: [number, number][]\n): boolean {\n\tconst [row, col] = coords;\n\treturn selected_cells.some(([r, c]) => r === row && c === col);\n}\n\nexport function is_cell_selected(\n\tcell: CellCoordinate,\n\tselected_cells: CellCoordinate[]\n): string {\n\tconst [row, col] = cell;\n\tif (!selected_cells.some(([r, c]) => r === row && c === col)) return \"\";\n\n\tconst up = selected_cells.some(([r, c]) => r === row - 1 && c === col);\n\tconst down = selected_cells.some(([r, c]) => r === row + 1 && c === col);\n\tconst left = selected_cells.some(([r, c]) => r === row && c === col - 1);\n\tconst right = selected_cells.some(([r, c]) => r === row && c === col + 1);\n\n\treturn `cell-selected${up ? \" no-top\" : \"\"}${down ? \" no-bottom\" : \"\"}${left ? \" no-left\" : \"\"}${right ? \" no-right\" : \"\"}`;\n}\n\nexport function get_range_selection(\n\tstart: CellCoordinate,\n\tend: CellCoordinate\n): CellCoordinate[] {\n\tconst [start_row, start_col] = start;\n\tconst [end_row, end_col] = end;\n\tconst min_row = Math.min(start_row, end_row);\n\tconst max_row = Math.max(start_row, end_row);\n\tconst min_col = Math.min(start_col, end_col);\n\tconst max_col = Math.max(start_col, end_col);\n\n\tconst cells: CellCoordinate[] = [];\n\t// Add the start cell as the \"anchor\" cell so that when\n\t// we press shift+arrow keys, the selection will always\n\t// include the anchor cell.\n\tcells.push(start);\n\n\tfor (let i = min_row; i <= max_row; i++) {\n\t\tfor (let j = min_col; j <= max_col; j++) {\n\t\t\tif (i === start_row && j === start_col) continue;\n\t\t\tcells.push([i, j]);\n\t\t}\n\t}\n\treturn cells;\n}\n\nexport function handle_selection(\n\tcurrent: CellCoordinate,\n\tselected_cells: CellCoordinate[],\n\tevent: { shiftKey: boolean; metaKey: boolean; ctrlKey: boolean }\n): CellCoordinate[] {\n\tif (event.shiftKey && selected_cells.length > 0) {\n\t\treturn get_range_selection(\n\t\t\tselected_cells[selected_cells.length - 1],\n\t\t\tcurrent\n\t\t);\n\t}\n\n\tif (event.metaKey || event.ctrlKey) {\n\t\tconst is_cell_match = ([r, c]: CellCoordinate): boolean =>\n\t\t\tr === current[0] && c === current[1];\n\t\tconst index = selected_cells.findIndex(is_cell_match);\n\t\treturn index === -1\n\t\t\t? [...selected_cells, current]\n\t\t\t: selected_cells.filter((_, i) => i !== index);\n\t}\n\n\treturn [current];\n}\n\nexport function handle_delete_key(\n\tdata: CellData[][],\n\tselected_cells: CellCoordinate[]\n): CellData[][] {\n\tconst new_data = data.map((row) => [...row]);\n\tselected_cells.forEach(([row, col]) => {\n\t\tif (new_data[row] && new_data[row][col]) {\n\t\t\tnew_data[row][col] = { ...new_data[row][col], value: \"\" };\n\t\t}\n\t});\n\treturn new_data;\n}\n\nexport function should_show_cell_menu(\n\tcell: CellCoordinate,\n\tselected_cells: CellCoordinate[],\n\teditable: boolean\n): boolean {\n\tconst [row, col] = cell;\n\treturn (\n\t\teditable &&\n\t\tselected_cells.length === 1 &&\n\t\tselected_cells[0][0] === row &&\n\t\tselected_cells[0][1] === col\n\t);\n}\n\nexport function get_next_cell_coordinates(\n\tcurrent: CellCoordinate,\n\tdata: CellData[][],\n\tshift_key: boolean\n): CellCoordinate | false {\n\tconst [row, col] = current;\n\tconst direction = shift_key ? -1 : 1;\n\n\tif (data[row]?.[col + direction]) {\n\t\treturn [row, col + direction];\n\t}\n\n\tconst next_row = row + (direction > 0 ? 1 : 0);\n\tconst prev_row = row + (direction < 0 ? -1 : 0);\n\n\tif (direction > 0 && data[next_row]?.[0]) {\n\t\treturn [next_row, 0];\n\t}\n\n\tif (direction < 0 && data[prev_row]?.[data[0].length - 1]) {\n\t\treturn [prev_row, data[0].length - 1];\n\t}\n\n\treturn false;\n}\n\nexport function move_cursor(\n\tevent: KeyboardEvent,\n\tcurrent_coords: CellCoordinate,\n\tdata: CellData[][]\n): CellCoordinate | false {\n\tconst key = event.key as \"ArrowRight\" | \"ArrowLeft\" | \"ArrowDown\" | \"ArrowUp\";\n\tconst dir = {\n\t\tArrowRight: [0, 1],\n\t\tArrowLeft: [0, -1],\n\t\tArrowDown: [1, 0],\n\t\tArrowUp: [-1, 0]\n\t}[key];\n\n\tlet i, j;\n\tif (event.metaKey || event.ctrlKey) {\n\t\tif (key === \"ArrowRight\") {\n\t\t\ti = current_coords[0];\n\t\t\tj = data[0].length - 1;\n\t\t} else if (key === \"ArrowLeft\") {\n\t\t\ti = current_coords[0];\n\t\t\tj = 0;\n\t\t} else if (key === \"ArrowDown\") {\n\t\t\ti = data.length - 1;\n\t\t\tj = current_coords[1];\n\t\t} else if (key === \"ArrowUp\") {\n\t\t\ti = 0;\n\t\t\tj = current_coords[1];\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\ti = current_coords[0] + dir[0];\n\t\tj = current_coords[1] + dir[1];\n\t}\n\n\tif (i < 0 && j <= 0) {\n\t\treturn false;\n\t}\n\n\tconst is_data = data[i]?.[j];\n\tif (is_data) {\n\t\treturn [i, j];\n\t}\n\treturn false;\n}\n\nexport function get_current_indices(\n\tid: string,\n\tdata: CellData[][]\n): [number, number] {\n\treturn data.reduce(\n\t\t(acc, arr, i) => {\n\t\t\tconst j = arr.reduce(\n\t\t\t\t(_acc, _data, k) => (id === _data.id ? k : _acc),\n\t\t\t\t-1\n\t\t\t);\n\t\t\treturn j === -1 ? acc : [i, j];\n\t\t},\n\t\t[-1, -1]\n\t);\n}\n\nexport function handle_click_outside(\n\tevent: Event,\n\tparent: HTMLElement\n): boolean {\n\tconst [trigger] = event.composedPath() as HTMLElement[];\n\treturn !parent.contains(trigger);\n}\n\nexport function select_column(data: any[][], col: number): CellCoordinate[] {\n\treturn Array.from({ length: data.length }, (_, i) => [i, col]);\n}\n\nexport function select_row(data: any[][], row: number): CellCoordinate[] {\n\treturn Array.from({ length: data[0].length }, (_, i) => [row, i]);\n}\n\nexport function calculate_selection_positions(\n\tselected: CellCoordinate,\n\tdata: { id: string; value: CellValue }[][],\n\tels: Record<string, { cell: HTMLTableCellElement | null }>,\n\tparent: HTMLElement,\n\ttable: HTMLElement\n): { col_pos: string; row_pos: string | undefined } {\n\tconst [row, col] = selected;\n\tif (!data[row]?.[col]) {\n\t\treturn { col_pos: \"0px\", row_pos: undefined };\n\t}\n\n\tconst cell_id = data[row][col].id;\n\tconst cell_el = els[cell_id]?.cell;\n\n\tif (!cell_el) {\n\t\treturn { col_pos: \"0px\", row_pos: undefined };\n\t}\n\n\tconst cell_rect = cell_el.getBoundingClientRect();\n\tconst table_rect = table.getBoundingClientRect();\n\tconst col_pos = `${cell_rect.left - table_rect.left + cell_rect.width / 2}px`;\n\tconst row_pos = `${cell_rect.top - table_rect.top + cell_rect.height / 2}px`;\n\n\treturn { col_pos, row_pos };\n}\n","import { getContext, setContext } from \"svelte\";\nimport { dequal } from \"dequal\";\nimport { writable, get } from \"svelte/store\";\nimport { sort_table_data } from \"../utils/table_utils\";\nimport type { CellValue } from \"../types\";\nimport { tick } from \"svelte\";\nimport {\n\thandle_selection,\n\tget_next_cell_coordinates,\n\tget_range_selection,\n\tmove_cursor\n} from \"../utils/selection_utils\";\n\nexport const DATAFRAME_KEY = Symbol(\"dataframe\");\n\nexport type SortDirection = \"asc\" | \"desc\";\nexport type FilterDatatype = \"string\" | \"number\";\nexport type CellCoordinate = [number, number];\n\ninterface DataFrameState {\n\tconfig: {\n\t\tshow_fullscreen_button: boolean;\n\t\tshow_copy_button: boolean;\n\t\tshow_search: \"none\" | \"search\" | \"filter\";\n\t\tshow_row_numbers: boolean;\n\t\teditable: boolean;\n\t\tpinned_columns: number;\n\t\tshow_label: boolean;\n\t\tline_breaks: boolean;\n\t\twrap: boolean;\n\t\tmax_height: number;\n\t\tcolumn_widths: string[];\n\t\tmax_chars?: number;\n\t\tstatic_columns?: CellValue[];\n\t};\n\tcurrent_search_query: string | null;\n\tsort_state: {\n\t\tsort_columns: { col: number; direction: SortDirection }[];\n\t\trow_order: number[];\n\t\tinitial_data: {\n\t\t\tdata: { id: string; value: CellValue }[][];\n\t\t\tdisplay_value: string[][] | null;\n\t\t\tstyling: string[][] | null;\n\t\t} | null;\n\t};\n\tfilter_state: {\n\t\tfilter_columns: {\n\t\t\tcol: number;\n\t\t\tdatatype: FilterDatatype;\n\t\t\tfilter: string;\n\t\t\tvalue: string;\n\t\t}[];\n\t\tinitial_data: {\n\t\t\tdata: { id: string; value: CellValue }[][];\n\t\t\tdisplay_value: string[][] | null;\n\t\t\tstyling: string[][] | null;\n\t\t} | null;\n\t};\n\tui_state: {\n\t\tactive_cell_menu: { row: number; col: number; x: number; y: number } | null;\n\t\tactive_header_menu: { col: number; x: number; y: number } | null;\n\t\tselected_cells: CellCoordinate[];\n\t\tselected: CellCoordinate | false;\n\t\tediting: CellCoordinate | false;\n\t\theader_edit: number | false;\n\t\tselected_header: number | false;\n\t\tactive_button: {\n\t\t\ttype: \"header\" | \"cell\";\n\t\t\trow?: number;\n\t\t\tcol: number;\n\t\t} | null;\n\t\tcopy_flash: boolean;\n\t};\n}\n\ninterface DataFrameActions {\n\thandle_search: (query: string | null) => void;\n\thandle_sort: (col: number, direction: SortDirection) => void;\n\thandle_filter: (\n\t\tcol: number,\n\t\tdatatype: FilterDatatype,\n\t\tfilter: string,\n\t\tvalue: string\n\t) => void;\n\tget_sort_status: (name: string, headers: string[]) => \"none\" | \"asc\" | \"desc\";\n\tsort_data: (\n\t\tdata: any[][],\n\t\tdisplay_value: string[][] | null,\n\t\tstyling: string[][] | null\n\t) => void;\n\tupdate_row_order: (data: any[][]) => void;\n\tfilter_data: (data: any[][]) => any[][];\n\tadd_row: (data: any[][], make_id: () => string, index?: number) => any[][];\n\tadd_col: (\n\t\tdata: any[][],\n\t\theaders: string[],\n\t\tmake_id: () => string,\n\t\tindex?: number\n\t) => { data: any[][]; headers: string[] };\n\tadd_row_at: (\n\t\tdata: any[][],\n\t\tindex: number,\n\t\tposition: \"above\" | \"below\",\n\t\tmake_id: () => string\n\t) => any[][];\n\tadd_col_at: (\n\t\tdata: any[][],\n\t\theaders: string[],\n\t\tindex: number,\n\t\tposition: \"left\" | \"right\",\n\t\tmake_id: () => string\n\t) => { data: any[][]; headers: string[] };\n\tdelete_row: (data: any[][], index: number) => any[][];\n\tdelete_col: (\n\t\tdata: any[][],\n\t\theaders: string[],\n\t\tindex: number\n\t) => { data: any[][]; headers: string[] };\n\tdelete_row_at: (data: any[][], index: number) => any[][];\n\tdelete_col_at: (\n\t\tdata: any[][],\n\t\theaders: string[],\n\t\tindex: number\n\t) => { data: any[][]; headers: string[] };\n\ttrigger_change: (\n\t\tdata: any[][],\n\t\theaders: any[],\n\t\tprevious_data: any[][],\n\t\tprevious_headers: string[],\n\t\tvalue_is_output: boolean,\n\t\tdispatch: (e: \"change\" | \"input\" | \"edit\", detail?: any) => void\n\t) => Promise<void>;\n\treset_sort_state: () => void;\n\treset_filter_state: () => void;\n\tset_active_cell_menu: (\n\t\tmenu: { row: number; col: number; x: number; y: number } | null\n\t) => void;\n\tset_active_header_menu: (\n\t\tmenu: { col: number; x: number; y: number } | null\n\t) => void;\n\tset_selected_cells: (cells: CellCoordinate[]) => void;\n\tset_selected: (selected: CellCoordinate | false) => void;\n\tset_editing: (editing: CellCoordinate | false) => void;\n\tclear_ui_state: () => void;\n\tset_header_edit: (header_index: number | false) => void;\n\tset_selected_header: (header_index: number | false) => void;\n\thandle_header_click: (col: number, editable: boolean) => void;\n\tend_header_edit: (key: string) => void;\n\tget_selected_cells: () => CellCoordinate[];\n\tget_active_cell_menu: () => {\n\t\trow: number;\n\t\tcol: number;\n\t\tx: number;\n\t\ty: number;\n\t} | null;\n\tget_active_button: () => {\n\t\ttype: \"header\" | \"cell\";\n\t\trow?: number;\n\t\tcol: number;\n\t} | null;\n\tset_active_button: (\n\t\tbutton: { type: \"header\" | \"cell\"; row?: number; col: number } | null\n\t) => void;\n\tset_copy_flash: (value: boolean) => void;\n\thandle_cell_click: (event: MouseEvent, row: number, col: number) => void;\n\ttoggle_cell_menu: (event: MouseEvent, row: number, col: number) => void;\n\ttoggle_cell_button: (row: number, col: number) => void;\n\thandle_select_column: (col: number) => void;\n\thandle_select_row: (row: number) => void;\n\tget_next_cell_coordinates: typeof get_next_cell_coordinates;\n\tget_range_selection: typeof get_range_selection;\n\tmove_cursor: typeof move_cursor;\n}\n\nexport interface DataFrameContext {\n\tstate: ReturnType<typeof writable<DataFrameState>>;\n\tactions: DataFrameActions;\n\tdata?: any[][];\n\theaders?: { id: string; value: string }[];\n\tdisplay_value?: string[][] | null;\n\tstyling?: string[][] | null;\n\tels?: Record<\n\t\tstring,\n\t\t{ cell: HTMLTableCellElement | null; input: HTMLTextAreaElement | null }\n\t>;\n\tparent_element?: HTMLElement;\n\tget_data_at?: (row: number, col: number) => CellValue;\n\tget_column?: (col: number) => CellValue[];\n\tget_row?: (row: number) => CellValue[];\n\tdispatch?: (e: \"change\" | \"select\" | \"search\" | \"edit\", detail?: any) => void;\n}\n\nfunction create_actions(\n\tstate: ReturnType<typeof writable<DataFrameState>>,\n\tcontext: DataFrameContext\n): DataFrameActions {\n\tconst update_state = (\n\t\tupdater: (s: DataFrameState) => Partial<DataFrameState>\n\t): void => state.update((s) => ({ ...s, ...updater(s) }));\n\n\tconst add_row = (\n\t\tdata: any[][],\n\t\tmake_id: () => string,\n\t\tindex?: number\n\t): any[][] => {\n\t\tconst new_row = data[0]?.length\n\t\t\t? Array(data[0].length)\n\t\t\t\t\t.fill(null)\n\t\t\t\t\t.map(() => ({ value: \"\", id: make_id() }))\n\t\t\t: [{ value: \"\", id: make_id() }];\n\t\tconst new_data = [...data];\n\t\tindex !== undefined\n\t\t\t? new_data.splice(index, 0, new_row)\n\t\t\t: new_data.push(new_row);\n\t\treturn new_data;\n\t};\n\n\tconst add_col = (\n\t\tdata: any[][],\n\t\theaders: string[],\n\t\tmake_id: () => string,\n\t\tindex?: number\n\t): { data: any[][]; headers: string[] } => {\n\t\tconst new_headers = [...headers, `Header ${headers.length + 1}`];\n\t\tconst new_data = data.map((row) => [...row, { value: \"\", id: make_id() }]);\n\t\tif (index !== undefined) {\n\t\t\tnew_headers.splice(index, 0, new_headers.pop()!);\n\t\t\tnew_data.forEach((row) => row.splice(index, 0, row.pop()!));\n\t\t}\n\t\treturn { data: new_data, headers: new_headers };\n\t};\n\n\tconst update_array = (\n\t\tsource: { id: string; value: CellValue }[][] | string[][] | null,\n\t\ttarget: any[] | null | undefined\n\t): void => {\n\t\tif (source && target) {\n\t\t\ttarget.splice(0, target.length, ...JSON.parse(JSON.stringify(source)));\n\t\t}\n\t};\n\n\treturn {\n\t\thandle_search: (query) =>\n\t\t\tupdate_state((s) => ({ current_search_query: query })),\n\t\thandle_sort: (col, direction) =>\n\t\t\tupdate_state((s) => {\n\t\t\t\tconst sort_cols = s.sort_state.sort_columns.filter(\n\t\t\t\t\t(c) => c.col !== col\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\t!s.sort_state.sort_columns.some(\n\t\t\t\t\t\t(c) => c.col === col && c.direction === direction\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tsort_cols.push({ col, direction });\n\t\t\t\t}\n\n\t\t\t\tconst initial_data =\n\t\t\t\t\ts.sort_state.initial_data ||\n\t\t\t\t\t(context.data && sort_cols.length > 0\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tdata: JSON.parse(JSON.stringify(context.data)),\n\t\t\t\t\t\t\t\tdisplay_value: context.display_value\n\t\t\t\t\t\t\t\t\t? JSON.parse(JSON.stringify(context.display_value))\n\t\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\t\tstyling: context.styling\n\t\t\t\t\t\t\t\t\t? JSON.parse(JSON.stringify(context.styling))\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: null);\n\n\t\t\t\treturn {\n\t\t\t\t\tsort_state: {\n\t\t\t\t\t\t...s.sort_state,\n\t\t\t\t\t\tsort_columns: sort_cols.slice(-3),\n\t\t\t\t\t\tinitial_data: initial_data\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}),\n\t\thandle_filter: (col, datatype, filter, value) =>\n\t\t\tupdate_state((s) => {\n\t\t\t\tconst filter_cols = s.filter_state.filter_columns.some(\n\t\t\t\t\t(c) => c.col === col\n\t\t\t\t)\n\t\t\t\t\t? s.filter_state.filter_columns.filter((c) => c.col !== col)\n\t\t\t\t\t: [\n\t\t\t\t\t\t\t...s.filter_state.filter_columns,\n\t\t\t\t\t\t\t{ col, datatype, filter, value }\n\t\t\t\t\t\t];\n\n\t\t\t\tconst initial_data =\n\t\t\t\t\ts.filter_state.initial_data ||\n\t\t\t\t\t(context.data && filter_cols.length > 0\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tdata: JSON.parse(JSON.stringify(context.data)),\n\t\t\t\t\t\t\t\tdisplay_value: context.display_value\n\t\t\t\t\t\t\t\t\t? JSON.parse(JSON.stringify(context.display_value))\n\t\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\t\tstyling: context.styling\n\t\t\t\t\t\t\t\t\t? JSON.parse(JSON.stringify(context.styling))\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: null);\n\n\t\t\t\treturn {\n\t\t\t\t\tfilter_state: {\n\t\t\t\t\t\t...s.filter_state,\n\t\t\t\t\t\tfilter_columns: filter_cols,\n\t\t\t\t\t\tinitial_data: initial_data\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}),\n\t\tget_sort_status: (name, headers) => {\n\t\t\tconst s = get(state);\n\t\t\tconst sort_item = s.sort_state.sort_columns.find(\n\t\t\t\t(item) => headers[item.col] === name\n\t\t\t);\n\t\t\treturn sort_item ? sort_item.direction : \"none\";\n\t\t},\n\t\tsort_data: (data, display_value, styling) => {\n\t\t\tconst {\n\t\t\t\tsort_state: { sort_columns }\n\t\t\t} = get(state);\n\t\t\tif (sort_columns.length)\n\t\t\t\tsort_table_data(data, display_value, styling, sort_columns);\n\t\t},\n\t\tupdate_row_order: (data) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tsort_state: {\n\t\t\t\t\t...s.sort_state,\n\t\t\t\t\trow_order:\n\t\t\t\t\t\ts.sort_state.sort_columns.length && data[0]\n\t\t\t\t\t\t\t? [...Array(data.length)]\n\t\t\t\t\t\t\t\t\t.map((_, i) => i)\n\t\t\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\t\t\tfor (const { col, direction } of s.sort_state\n\t\t\t\t\t\t\t\t\t\t\t.sort_columns) {\n\t\t\t\t\t\t\t\t\t\t\tconst comp =\n\t\t\t\t\t\t\t\t\t\t\t\t(data[a]?.[col]?.value ?? \"\") <\n\t\t\t\t\t\t\t\t\t\t\t\t(data[b]?.[col]?.value ?? \"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t\t\t\t\t\t\tif (comp) return direction === \"asc\" ? comp : -comp;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: [...Array(data.length)].map((_, i) => i)\n\t\t\t\t}\n\t\t\t})),\n\t\tfilter_data: (data) => {\n\t\t\tconst query = get(state).current_search_query?.toLowerCase();\n\t\t\treturn query\n\t\t\t\t? data.filter((row) =>\n\t\t\t\t\t\trow.some((cell) =>\n\t\t\t\t\t\t\tString(cell?.value).toLowerCase().includes(query)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t: data;\n\t\t},\n\t\tadd_row,\n\t\tadd_col,\n\t\tadd_row_at: (data, index, position, make_id) =>\n\t\t\tadd_row(data, make_id, position === \"above\" ? index : index + 1),\n\t\tadd_col_at: (data, headers, index, position, make_id) =>\n\t\t\tadd_col(data, headers, make_id, position === \"left\" ? index : index + 1),\n\t\tdelete_row: (data, index) =>\n\t\t\tdata.length > 1 ? data.filter((_, i) => i !== index) : data,\n\t\tdelete_col: (data, headers, index) =>\n\t\t\theaders.length > 1\n\t\t\t\t? {\n\t\t\t\t\t\tdata: data.map((row) => row.filter((_, i) => i !== index)),\n\t\t\t\t\t\theaders: headers.filter((_, i) => i !== index)\n\t\t\t\t\t}\n\t\t\t\t: { data, headers },\n\t\tdelete_row_at: (data, index) =>\n\t\t\tdata.length > 1\n\t\t\t\t? [...data.slice(0, index), ...data.slice(index + 1)]\n\t\t\t\t: data,\n\t\tdelete_col_at: (data, headers, index) =>\n\t\t\theaders.length > 1\n\t\t\t\t? {\n\t\t\t\t\t\tdata: data.map((row) => [\n\t\t\t\t\t\t\t...row.slice(0, index),\n\t\t\t\t\t\t\t...row.slice(index + 1)\n\t\t\t\t\t\t]),\n\t\t\t\t\t\theaders: [...headers.slice(0, index), ...headers.slice(index + 1)]\n\t\t\t\t\t}\n\t\t\t\t: { data, headers },\n\t\ttrigger_change: async (\n\t\t\tdata,\n\t\t\theaders,\n\t\t\tprevious_data,\n\t\t\tprevious_headers,\n\t\t\tvalue_is_output,\n\t\t\tdispatch\n\t\t) => {\n\t\t\tconst s = get(state);\n\t\t\tif (s.current_search_query) return;\n\n\t\t\tconst current_headers = headers.map((h) => h.value);\n\t\t\tconst current_data = data.map((row) => row.map((cell) => cell.value));\n\n\t\t\tif (\n\t\t\t\t!dequal(current_data, previous_data) ||\n\t\t\t\t!dequal(current_headers, previous_headers)\n\t\t\t) {\n\t\t\t\tif (!dequal(current_headers, previous_headers)) {\n\t\t\t\t\tupdate_state((s) => ({\n\t\t\t\t\t\tsort_state: { sort_columns: [], row_order: [], initial_data: null },\n\t\t\t\t\t\tfilter_state: { filter_columns: [], initial_data: null }\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tdispatch(\"change\", {\n\t\t\t\t\tdata: data.map((row) => row.map((cell) => cell.value)),\n\t\t\t\t\theaders: current_headers,\n\t\t\t\t\tmetadata: null\n\t\t\t\t});\n\t\t\t\tconst index = s.ui_state.selected;\n\t\t\t\tif (index) {\n\t\t\t\t\tdispatch(\"edit\", {\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tvalue: data[index[0]][index[1]].value,\n\t\t\t\t\t\tprevious_value: previous_data[index[0]][index[1]]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!value_is_output) dispatch(\"input\");\n\t\t\t}\n\t\t},\n\t\treset_sort_state: () =>\n\t\t\tupdate_state((s) => {\n\t\t\t\tif (s.sort_state.initial_data && context.data) {\n\t\t\t\t\tconst original = s.sort_state.initial_data;\n\n\t\t\t\t\tupdate_array(original.data, context.data);\n\t\t\t\t\tupdate_array(original.display_value, context.display_value);\n\t\t\t\t\tupdate_array(original.styling, context.styling);\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tsort_state: { sort_columns: [], row_order: [], initial_data: null }\n\t\t\t\t};\n\t\t\t}),\n\t\treset_filter_state: () =>\n\t\t\tupdate_state((s) => {\n\t\t\t\tif (s.filter_state.initial_data && context.data) {\n\t\t\t\t\tconst original = s.filter_state.initial_data;\n\n\t\t\t\t\tupdate_array(original.data, context.data);\n\t\t\t\t\tupdate_array(original.display_value, context.display_value);\n\t\t\t\t\tupdate_array(original.styling, context.styling);\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tfilter_state: { filter_columns: [], initial_data: null }\n\t\t\t\t};\n\t\t\t}),\n\t\tset_active_cell_menu: (menu) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: { ...s.ui_state, active_cell_menu: menu }\n\t\t\t})),\n\t\tset_active_header_menu: (menu) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: { ...s.ui_state, active_header_menu: menu }\n\t\t\t})),\n\t\tset_selected_cells: (cells) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: { ...s.ui_state, selected_cells: cells }\n\t\t\t})),\n\t\tset_selected: (selected) =>\n\t\t\tupdate_state((s) => ({ ui_state: { ...s.ui_state, selected } })),\n\t\tset_editing: (editing) =>\n\t\t\tupdate_state((s) => ({ ui_state: { ...s.ui_state, editing } })),\n\t\tclear_ui_state: () =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\tactive_cell_menu: null,\n\t\t\t\t\tactive_header_menu: null,\n\t\t\t\t\tselected_cells: [],\n\t\t\t\t\tselected: false,\n\t\t\t\t\tediting: false,\n\t\t\t\t\theader_edit: false,\n\t\t\t\t\tselected_header: false,\n\t\t\t\t\tactive_button: null,\n\t\t\t\t\tcopy_flash: false\n\t\t\t\t}\n\t\t\t})),\n\t\tset_header_edit: (header_index) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\t...s.ui_state,\n\t\t\t\t\tselected_cells: [],\n\t\t\t\t\tselected_header: header_index,\n\t\t\t\t\theader_edit: header_index\n\t\t\t\t}\n\t\t\t})),\n\t\tset_selected_header: (header_index) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\t...s.ui_state,\n\t\t\t\t\tselected_header: header_index,\n\t\t\t\t\tselected: false,\n\t\t\t\t\tselected_cells: []\n\t\t\t\t}\n\t\t\t})),\n\t\thandle_header_click: (col, editable) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\t...s.ui_state,\n\t\t\t\t\tactive_cell_menu: null,\n\t\t\t\t\tactive_header_menu: null,\n\t\t\t\t\tselected: false,\n\t\t\t\t\tselected_cells: [],\n\t\t\t\t\tselected_header: col,\n\t\t\t\t\theader_edit: editable ? col : false\n\t\t\t\t}\n\t\t\t})),\n\t\tend_header_edit: (key) => {\n\t\t\tif ([\"Escape\", \"Enter\", \"Tab\"].includes(key)) {\n\t\t\t\tupdate_state((s) => ({\n\t\t\t\t\tui_state: { ...s.ui_state, selected: false, header_edit: false }\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\t\tget_selected_cells: () => get(state).ui_state.selected_cells,\n\t\tget_active_cell_menu: () => get(state).ui_state.active_cell_menu,\n\t\tget_active_button: () => get(state).ui_state.active_button,\n\t\tset_active_button: (button) =>\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: { ...s.ui_state, active_button: button }\n\t\t\t})),\n\t\tset_copy_flash: (value) =>\n\t\t\tupdate_state((s) => ({ ui_state: { ...s.ui_state, copy_flash: value } })),\n\t\thandle_cell_click: (event, row, col) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst s = get(state);\n\t\t\tif (s.config.show_row_numbers && col === -1) return;\n\n\t\t\tlet actual_row = row;\n\t\t\tif (s.current_search_query && context.data) {\n\t\t\t\tconst filtered_indices: number[] = [];\n\t\t\t\tcontext.data.forEach((dataRow, idx) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tdataRow.some((cell) =>\n\t\t\t\t\t\t\tString(cell?.value)\n\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t.includes(s.current_search_query?.toLowerCase() || \"\")\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tfiltered_indices.push(idx);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tactual_row = filtered_indices[row] ?? row;\n\t\t\t}\n\n\t\t\tconst cells = handle_selection(\n\t\t\t\t[actual_row, col],\n\t\t\t\ts.ui_state.selected_cells,\n\t\t\t\tevent\n\t\t\t);\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\t...s.ui_state,\n\t\t\t\t\tactive_cell_menu: null,\n\t\t\t\t\tactive_header_menu: null,\n\t\t\t\t\tselected_header: false,\n\t\t\t\t\theader_edit: false,\n\t\t\t\t\tselected_cells: cells,\n\t\t\t\t\tselected: cells[0]\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (s.config.editable && cells.length === 1) {\n\t\t\t\tupdate_state((s) => ({\n\t\t\t\t\tui_state: { ...s.ui_state, editing: [actual_row, col] }\n\t\t\t\t}));\n\t\t\t\ttick().then(() =>\n\t\t\t\t\tcontext.els![context.data![actual_row][col].id]?.input?.focus()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// ensure parent has focus for keyboard navigation\n\t\t\t\ttick().then(() => {\n\t\t\t\t\tif (context.parent_element) {\n\t\t\t\t\t\tcontext.parent_element.focus();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcontext.dispatch?.(\"select\", {\n\t\t\t\tindex: [actual_row, col],\n\t\t\t\tcol_value: context.get_column!(col),\n\t\t\t\trow_value: context.get_row!(actual_row),\n\t\t\t\tvalue: context.get_data_at!(actual_row, col)\n\t\t\t});\n\t\t},\n\t\ttoggle_cell_menu: (event, row, col) => {\n\t\t\tevent.stopPropagation();\n\t\t\tconst current_menu = get(state).ui_state.active_cell_menu;\n\t\t\tif (current_menu?.row === row && current_menu.col === col) {\n\t\t\t\tupdate_state((s) => ({\n\t\t\t\t\tui_state: { ...s.ui_state, active_cell_menu: null }\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tconst cell = (event.target as HTMLElement).closest(\"td\");\n\t\t\t\tif (cell) {\n\t\t\t\t\tconst rect = cell.getBoundingClientRect();\n\t\t\t\t\tupdate_state((s) => ({\n\t\t\t\t\t\tui_state: {\n\t\t\t\t\t\t\t...s.ui_state,\n\t\t\t\t\t\t\tactive_cell_menu: { row, col, x: rect.right, y: rect.bottom }\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttoggle_cell_button: (row, col) => {\n\t\t\tconst current_button = get(state).ui_state.active_button;\n\t\t\tconst new_button =\n\t\t\t\tcurrent_button?.type === \"cell\" &&\n\t\t\t\tcurrent_button.row === row &&\n\t\t\t\tcurrent_button.col === col\n\t\t\t\t\t? null\n\t\t\t\t\t: { type: \"cell\" as const, row, col };\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: { ...s.ui_state, active_button: new_button }\n\t\t\t}));\n\t\t},\n\t\thandle_select_column: (col) => {\n\t\t\tif (!context.data) return;\n\t\t\tconst cells = context.data.map((_, row) => [row, col] as CellCoordinate);\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\t...s.ui_state,\n\t\t\t\t\tselected_cells: cells,\n\t\t\t\t\tselected: cells[0],\n\t\t\t\t\tediting: false\n\t\t\t\t}\n\t\t\t}));\n\t\t\tsetTimeout(() => context.parent_element?.focus(), 0);\n\t\t},\n\t\thandle_select_row: (row) => {\n\t\t\tif (!context.data || !context.data[0]) return;\n\t\t\tconst cells = context.data[0].map(\n\t\t\t\t(_, col) => [row, col] as CellCoordinate\n\t\t\t);\n\t\t\tupdate_state((s) => ({\n\t\t\t\tui_state: {\n\t\t\t\t\t...s.ui_state,\n\t\t\t\t\tselected_cells: cells,\n\t\t\t\t\tselected: cells[0],\n\t\t\t\t\tediting: false\n\t\t\t\t}\n\t\t\t}));\n\t\t\tsetTimeout(() => context.parent_element?.focus(), 0);\n\t\t},\n\t\tget_next_cell_coordinates,\n\t\tget_range_selection,\n\t\tmove_cursor\n\t};\n}\n\nexport function create_dataframe_context(\n\tconfig: DataFrameState[\"config\"]\n): DataFrameContext {\n\tconst state = writable<DataFrameState>({\n\t\tconfig,\n\t\tcurrent_search_query: null,\n\t\tsort_state: { sort_columns: [], row_order: [], initial_data: null },\n\t\tfilter_state: { filter_columns: [], initial_data: null },\n\t\tui_state: {\n\t\t\tactive_cell_menu: null,\n\t\t\tactive_header_menu: null,\n\t\t\tselected_cells: [],\n\t\t\tselected: false,\n\t\t\tediting: false,\n\t\t\theader_edit: false,\n\t\t\tselected_header: false,\n\t\t\tactive_button: null,\n\t\t\tcopy_flash: false\n\t\t}\n\t});\n\n\tconst context: DataFrameContext = { state, actions: null as any };\n\tcontext.actions = create_actions(state, context);\n\n\tconst instance_id = Symbol(\n\t\t`dataframe_${Math.random().toString(36).substring(2)}`\n\t);\n\tsetContext(instance_id, context);\n\tsetContext(DATAFRAME_KEY, { instance_id, context });\n\n\treturn context;\n}\n\nexport function get_dataframe_context(): DataFrameContext {\n\tconst ctx = getContext<{ instance_id: symbol; context: DataFrameContext }>(\n\t\tDATAFRAME_KEY\n\t);\n\treturn ctx?.context ?? getContext<DataFrameContext>(DATAFRAME_KEY);\n}\n","<script lang=\"ts\">\n\texport let position: \"column\" | \"row\";\n\texport let coords: [number, number];\n\texport let on_click: (() => void) | null = null;\n\n\t$: is_first_position =\n\t\tposition === \"column\" ? coords[0] === 0 : coords[1] === 0;\n\t$: direction =\n\t\tposition === \"column\"\n\t\t\t? is_first_position\n\t\t\t\t? \"down\"\n\t\t\t\t: \"up\"\n\t\t\t: is_first_position\n\t\t\t\t? \"right\"\n\t\t\t\t: \"left\";\n</script>\n\n<button\n\tclass=\"selection-button selection-button-{position} {is_first_position\n\t\t? `move-${direction}`\n\t\t: ''}\"\n\ton:click|stopPropagation={() => on_click && on_click()}\n\taria-label={`Select ${position}`}\n>\n\t<span class={direction}>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<path\n\t\t\t\td=\"m16.707 13.293-4-4a1 1 0 0 0-1.414 0l-4 4A1 1 0 0 0 8 15h8a1 1 0 0 0 .707-1.707z\"\n\t\t\t\tdata-name={direction}\n\t\t\t/>\n\t\t</svg>\n\t</span>\n</button>\n\n<style>\n\t.selection-button {\n\t\tposition: absolute;\n\t\tbackground: var(--color-accent);\n\t\twidth: var(--size-3);\n\t\theight: var(--size-5);\n\t\tcolor: var(--background-fill-primary);\n\t}\n\n\t.selection-button-column {\n\t\ttop: -15px;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%) rotate(90deg);\n\t\tborder-radius: var(--radius-sm) 0 0 var(--radius-sm);\n\t}\n\n\t.selection-button-row {\n\t\tleft: calc(var(--size-2-5) * -1);\n\t\tborder-radius: var(--radius-sm) 0 0 var(--radius-sm);\n\t}\n\n\t.move-down {\n\t\tbottom: -14px;\n\t\ttop: auto;\n\t\tborder-radius: 0 var(--radius-sm) var(--radius-sm) 0;\n\t}\n\n\t.move-right {\n\t\tleft: auto;\n\t\tright: calc(var(--size-2-5) * -1);\n\t\tborder-radius: 0 var(--radius-sm) var(--radius-sm) 0;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t}\n\n\tspan {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.up {\n\t\ttransform: rotate(-90deg);\n\t}\n\n\t.down {\n\t\ttransform: rotate(90deg);\n\t}\n\n\t.left {\n\t\ttransform: rotate(-90deg);\n\t}\n\n\t.right {\n\t\ttransform: rotate(90deg);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { BaseCheckbox } from \"@gradio/checkbox\";\n\n\texport let value = false;\n\texport let editable = true;\n\texport let on_change: (value: boolean) => void;\n\n\tfunction handle_change(event: CustomEvent<boolean>): void {\n\t\tif (editable) {\n\t\t\ton_change(event.detail);\n\t\t}\n\t}\n</script>\n\n<div class=\"bool-cell\" role=\"button\" tabindex=\"-1\">\n\t<BaseCheckbox\n\t\tbind:value\n\t\tlabel=\"\"\n\t\tinteractive={editable}\n\t\ton:change={handle_change}\n\t/>\n</div>\n\n<style>\n\t.bool-cell {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: min-content;\n\t\theight: var(--size-full);\n\t\tmargin: 0 auto;\n\t}\n\n\t.bool-cell :global(input:disabled) {\n\t\tcursor: not-allowed;\n\t}\n\n\t.bool-cell :global(label) {\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.bool-cell :global(span) {\n\t\tdisplay: none;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { MarkdownCode } from \"@gradio/markdown-code\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport type { CellValue } from \"./types\";\n\timport SelectionButtons from \"./icons/SelectionButtons.svelte\";\n\timport BooleanCell from \"./BooleanCell.svelte\";\n\n\texport let edit: boolean;\n\texport let value: CellValue = \"\";\n\texport let display_value: string | null = null;\n\texport let styling = \"\";\n\texport let header = false;\n\texport let datatype:\n\t\t| \"str\"\n\t\t| \"markdown\"\n\t\t| \"html\"\n\t\t| \"number\"\n\t\t| \"bool\"\n\t\t| \"date\"\n\t\t| \"image\" = \"str\";\n\texport let latex_delimiters: {\n\t\tleft: string;\n\t\tright: string;\n\t\tdisplay: boolean;\n\t}[];\n\texport let line_breaks = true;\n\texport let editable = true;\n\texport let is_static = false;\n\texport let max_chars: number | null = null;\n\texport let components: Record<string, any> = {};\n\texport let i18n: I18nFormatter;\n\texport let is_dragging = false;\n\texport let wrap_text = false;\n\n\texport let show_selection_buttons = false;\n\texport let coords: [number, number];\n\texport let on_select_column: ((col: number) => void) | null = null;\n\texport let on_select_row: ((row: number) => void) | null = null;\n\texport let el: HTMLTextAreaElement | null;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tblur: { blur_event: FocusEvent; coords: [number, number] };\n\t\tkeydown: KeyboardEvent;\n\t}>();\n\n\tfunction truncate_text(\n\t\ttext: CellValue,\n\t\tmax_length: number | null = null,\n\t\tis_image = false\n\t): string {\n\t\tif (is_image) return String(text);\n\t\tconst str = String(text);\n\t\tif (!max_length || max_length <= 0) return str;\n\t\tif (str.length <= max_length) return str;\n\t\treturn str.slice(0, max_length) + \"...\";\n\t}\n\n\t$: should_truncate = !edit && max_chars !== null && max_chars > 0;\n\n\t$: display_content = editable\n\t\t? value\n\t\t: display_value !== null\n\t\t\t? display_value\n\t\t\t: value;\n\n\t$: display_text = should_truncate\n\t\t? truncate_text(display_content, max_chars, datatype === \"image\")\n\t\t: display_content;\n\n\tfunction use_focus(node: HTMLTextAreaElement): any {\n\t\trequestAnimationFrame(() => {\n\t\t\tnode.focus();\n\t\t});\n\n\t\treturn {};\n\t}\n\n\tfunction handle_blur(event: FocusEvent): void {\n\t\tdispatch(\"blur\", {\n\t\t\tblur_event: event,\n\t\t\tcoords: coords\n\t\t});\n\t}\n\n\tfunction handle_keydown(event: KeyboardEvent): void {\n\t\tdispatch(\"keydown\", event);\n\t}\n\n\tfunction commit_change(checked: boolean): void {\n\t\thandle_blur({ target: { value } } as unknown as FocusEvent);\n\t}\n\n\t$: if (!edit) {\n\t\t// Shim blur on removal for Safari and Firefox\n\t\thandle_blur({ target: { value } } as unknown as FocusEvent);\n\t}\n</script>\n\n{#if edit && datatype !== \"bool\"}\n\t<textarea\n\t\treadonly={is_static}\n\t\taria-readonly={is_static}\n\t\taria-label={is_static ? \"Cell is read-only\" : \"Edit cell\"}\n\t\tbind:this={el}\n\t\tbind:value\n\t\tclass:header\n\t\ttabindex=\"-1\"\n\t\ton:blur={handle_blur}\n\t\ton:mousedown|stopPropagation\n\t\ton:click|stopPropagation\n\t\tuse:use_focus\n\t\ton:keydown={handle_keydown}\n\t/>\n{/if}\n\n{#if datatype === \"bool\" && typeof value === \"boolean\"}\n\t<BooleanCell bind:value {editable} on_change={commit_change} />\n{:else}\n\t<span\n\t\tclass:dragging={is_dragging}\n\t\ton:keydown={handle_keydown}\n\t\ttabindex=\"0\"\n\t\trole=\"button\"\n\t\tclass:edit\n\t\tclass:expanded={edit}\n\t\tclass:multiline={header}\n\t\ton:focus|preventDefault\n\t\tstyle={styling}\n\t\tdata-editable={editable}\n\t\tdata-max-chars={max_chars}\n\t\tdata-expanded={edit}\n\t\tplaceholder=\" \"\n\t\tclass:text={datatype === \"str\"}\n\t\tclass:wrap={wrap_text}\n\t>\n\t\t{#if datatype === \"image\" && components.image}\n\t\t\t<svelte:component\n\t\t\t\tthis={components.image}\n\t\t\t\tvalue={{ url: display_text }}\n\t\t\t\tshow_label={false}\n\t\t\t\tlabel=\"cell-image\"\n\t\t\t\tshow_download_button={false}\n\t\t\t\t{i18n}\n\t\t\t\tgradio={{ dispatch: () => {} }}\n\t\t\t/>\n\t\t{:else if datatype === \"html\"}\n\t\t\t{@html display_text}\n\t\t{:else if datatype === \"markdown\"}\n\t\t\t<MarkdownCode\n\t\t\t\tmessage={display_text.toLocaleString()}\n\t\t\t\t{latex_delimiters}\n\t\t\t\t{line_breaks}\n\t\t\t\tchatbot={false}\n\t\t\t/>\n\t\t{:else}\n\t\t\t{display_text}\n\t\t{/if}\n\t</span>\n{/if}\n\n{#if show_selection_buttons && coords && on_select_column && on_select_row}\n\t<SelectionButtons\n\t\tposition=\"column\"\n\t\t{coords}\n\t\ton_click={() => on_select_column(coords[1])}\n\t/>\n\t<SelectionButtons\n\t\tposition=\"row\"\n\t\t{coords}\n\t\ton_click={() => on_select_row(coords[0])}\n\t/>\n{/if}\n\n<style>\n\t.dragging {\n\t\tcursor: crosshair !important;\n\t}\n\n\ttextarea {\n\t\tposition: absolute;\n\t\tflex: 1 1 0%;\n\t\ttransform: translateX(-0.1px);\n\t\toutline: none;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcursor: text;\n\t\twidth: calc(100% - var(--size-2));\n\t\tresize: none;\n\t\theight: 100%;\n\t\tpadding-left: 0;\n\t\tfont-size: inherit;\n\t\tfont-weight: inherit;\n\t\tline-height: var(--line-lg);\n\t}\n\n\ttextarea:focus {\n\t\toutline: none;\n\t}\n\n\tspan {\n\t\tflex: 1 1 0%;\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\toutline: none;\n\t\t-webkit-user-select: text;\n\t\t-moz-user-select: text;\n\t\t-ms-user-select: text;\n\t\tuser-select: text;\n\t\tcursor: text;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow: hidden;\n\t}\n\n\tspan.text.expanded {\n\t\theight: auto;\n\t\tmin-height: 100%;\n\t\twhite-space: pre-wrap;\n\t\tword-break: break-word;\n\t\toverflow: visible;\n\t}\n\n\t.multiline {\n\t\twhite-space: pre;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t.header {\n\t\ttransform: translateX(0);\n\t\tfont-weight: var(--weight-bold);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tmargin-left: var(--size-1);\n\t}\n\n\t.edit {\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t}\n\n\tspan :global(img) {\n\t\tmax-height: 100px;\n\t\twidth: auto;\n\t\tobject-fit: contain;\n\t}\n\n\ttextarea:read-only {\n\t\tcursor: not-allowed;\n\t}\n\n\t.wrap,\n\t.wrap.expanded {\n\t\twhite-space: normal;\n\t\tword-wrap: break-word;\n\t\toverflow-wrap: break-word;\n\t\tword-wrap: break-word;\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let index: number | null = null;\n\texport let is_header = false;\n</script>\n\n{#if is_header}\n\t<th tabindex=\"-1\" class=\"row-number\">\n\t\t<div class=\"cell-wrap\">\n\t\t\t<div class=\"header-content\">\n\t\t\t\t<div class=\"header-text\"></div>\n\t\t\t</div>\n\t\t</div>\n\t</th>\n{:else}\n\t<td class=\"row-number\" tabindex=\"-1\" data-row={index} data-col=\"row-number\">\n\t\t{index !== null ? index + 1 : \"\"}\n\t</td>\n{/if}\n\n<style>\n\t.row-number {\n\t\ttext-align: center;\n\t\tpadding: var(--size-1);\n\t\tmin-width: var(--size-12);\n\t\twidth: var(--size-12);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\tfont-weight: var(--weight-semibold);\n\t\tborder-right: 1px solid var(--border-color-primary);\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let on_click: (event: MouseEvent) => void;\n</script>\n\n<button\n\taria-label=\"Open cell menu\"\n\tclass=\"cell-menu-button\"\n\taria-haspopup=\"menu\"\n\ton:click={on_click}\n\ton:touchstart={(event) => {\n\t\tevent.preventDefault();\n\t\tconst touch = event.touches[0];\n\t\tconst mouseEvent = new MouseEvent(\"click\", {\n\t\t\tclientX: touch.clientX,\n\t\t\tclientY: touch.clientY,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t\tview: window\n\t\t});\n\t\ton_click(mouseEvent);\n\t}}\n>\n\t&#8942;\n</button>\n\n<style>\n\t.cell-menu-button {\n\t\tflex-shrink: 0;\n\t\tdisplay: none;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--block-radius);\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t\tmin-width: var(--size-5);\n\t\tpadding: 0;\n\t\tmargin-right: var(--spacing-sm);\n\t\tz-index: 2;\n\t\tposition: absolute;\n\t\tright: var(--size-1);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t}\n</style>\n","<div class=\"wrapper\" aria-label=\"Static column\">\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\twidth=\"13\"\n\t\theight=\"13\"\n\t\tviewBox=\"0 0 24 24\"\n\t\tfill=\"none\"\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"2\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t>\n\t\t<rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n\t\t<path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n\t</svg>\n</div>\n\n<style>\n\t.wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let size = 16;\n</script>\n\n<svg\n\twidth={size}\n\theight={size}\n\tviewBox=\"0 0 16 16\"\n\tfill=\"none\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n>\n\t<path\n\t\td=\"M4 8L8 4L12 8\"\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"1.5\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t/>\n\t<path\n\t\td=\"M8 4V12\"\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"1.5\"\n\t\tstroke-linecap=\"round\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let size = 16;\n</script>\n\n<svg\n\twidth={size}\n\theight={size}\n\tviewBox=\"0 0 16 16\"\n\tfill=\"none\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n>\n\t<path\n\t\td=\"M4 8L8 12L12 8\"\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"1.5\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t/>\n\t<path\n\t\td=\"M8 12V4\"\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"1.5\"\n\t\tstroke-linecap=\"round\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let icon: string;\n</script>\n\n{#if icon == \"add-column-right\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<rect\n\t\t\tx=\"4\"\n\t\t\ty=\"6\"\n\t\t\twidth=\"4\"\n\t\t\theight=\"12\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M12 12H19M16 8L19 12L16 16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"add-column-left\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<rect\n\t\t\tx=\"16\"\n\t\t\ty=\"6\"\n\t\t\twidth=\"4\"\n\t\t\theight=\"12\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M12 12H5M8 8L5 12L8 16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"add-row-above\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<rect\n\t\t\tx=\"6\"\n\t\t\ty=\"16\"\n\t\t\twidth=\"12\"\n\t\t\theight=\"4\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M12 12V5M8 8L12 5L16 8\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"add-row-below\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<rect\n\t\t\tx=\"6\"\n\t\t\ty=\"4\"\n\t\t\twidth=\"12\"\n\t\t\theight=\"4\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M12 12V19M8 16L12 19L16 16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"delete-row\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<rect\n\t\t\tx=\"5\"\n\t\t\ty=\"10\"\n\t\t\twidth=\"14\"\n\t\t\theight=\"4\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M8 7L16 17M16 7L8 17\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"delete-column\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<rect\n\t\t\tx=\"10\"\n\t\t\ty=\"5\"\n\t\t\twidth=\"4\"\n\t\t\theight=\"14\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M7 8L17 16M17 8L7 16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"sort-asc\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<path\n\t\t\td=\"M8 16L12 12L16 16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t\tstroke-linecap=\"round\"\n\t\t\tstroke-linejoin=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M12 12V19\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5 7H19\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"sort-desc\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<path\n\t\t\td=\"M8 12L12 16L16 12\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tfill=\"none\"\n\t\t\tstroke-linecap=\"round\"\n\t\t\tstroke-linejoin=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M12 16V9\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5 5H19\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"clear-sort\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<path\n\t\t\td=\"M5 5H19\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5 9H15\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5 13H11\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5 17H7\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M17 17L21 21M21 17L17 21\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"filter\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<path\n\t\t\td=\"M5 5H19\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M8 9H16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M11 13H13\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{:else if icon == \"clear-filter\"}\n\t<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n\t\t<path\n\t\t\td=\"M5 5H19\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M8 9H16\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M11 13H13\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M17 17L21 21M21 17L17 21\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstroke-width=\"2\"\n\t\t\tstroke-linecap=\"round\"\n\t\t/>\n\t</svg>\n{/if}\n","<script lang=\"ts\">\n\timport EditableCell from \"./EditableCell.svelte\";\n\timport CellMenuButton from \"./CellMenuButton.svelte\";\n\timport type { I18nFormatter } from \"js/core/src/gradio_helper\";\n\timport { get_sort_status } from \"./utils/sort_utils\";\n\timport Padlock from \"./icons/Padlock.svelte\";\n\timport SortArrowUp from \"./icons/SortArrowUp.svelte\";\n\timport SortArrowDown from \"./icons/SortArrowDown.svelte\";\n\timport type { SortDirection } from \"./context/dataframe_context\";\n\timport CellMenuIcons from \"./CellMenuIcons.svelte\";\n\timport type { FilterDatatype } from \"./context/dataframe_context\";\n\timport type { Datatype } from \"./utils/utils\";\n\timport { BaseCheckbox } from \"@gradio/checkbox\";\n\texport let value: string;\n\texport let i: number;\n\texport let datatype: Datatype = \"str\";\n\texport let actual_pinned_columns: number;\n\texport let header_edit: number | false;\n\texport let selected_header: number | false;\n\texport let headers: string[];\n\texport let get_cell_width: (index: number) => string;\n\texport let handle_header_click: (event: MouseEvent, col: number) => void;\n\texport let toggle_header_menu: (event: MouseEvent, col: number) => void;\n\texport let end_header_edit: (event: CustomEvent<KeyboardEvent>) => void;\n\texport let sort_columns: { col: number; direction: SortDirection }[] = [];\n\texport let filter_columns: {\n\t\tcol: number;\n\t\tdatatype: FilterDatatype;\n\t\tfilter: string;\n\t\tvalue: string;\n\t}[] = [];\n\n\texport let latex_delimiters: {\n\t\tleft: string;\n\t\tright: string;\n\t\tdisplay: boolean;\n\t}[];\n\texport let line_breaks: boolean;\n\texport let max_chars: number | undefined;\n\texport let editable: boolean;\n\texport let i18n: I18nFormatter;\n\texport let el: HTMLTextAreaElement | null;\n\texport let is_static: boolean;\n\texport let col_count: [number, \"fixed\" | \"dynamic\"];\n\texport let data: any[] = [];\n\texport let on_select_all:\n\t\t| ((col: number, checked: boolean) => void)\n\t\t| undefined = undefined;\n\n\t$: can_add_columns = col_count && col_count[1] === \"dynamic\";\n\t$: is_bool_column = datatype === \"bool\";\n\n\t$: select_all_state = (() => {\n\t\tif (!is_bool_column || data.length === 0) return \"unchecked\";\n\t\tconst true_count = data.filter(\n\t\t\t(row) => row[i]?.value === true || row[i]?.value === \"true\"\n\t\t).length;\n\t\tif (true_count === 0) return \"unchecked\";\n\t\tif (true_count === data.length) return \"checked\";\n\t\treturn \"indeterminate\";\n\t})();\n\n\t$: sort_index = sort_columns.findIndex((item) => item.col === i);\n\t$: filter_index = filter_columns.findIndex((item) => item.col === i);\n\t$: sort_priority = sort_index !== -1 ? sort_index + 1 : null;\n\t$: current_direction =\n\t\tsort_index !== -1 ? sort_columns[sort_index].direction : null;\n\n\tfunction get_header_position(col_index: number): string {\n\t\tif (col_index >= actual_pinned_columns) {\n\t\t\treturn \"auto\";\n\t\t}\n\n\t\tif (col_index === 0) {\n\t\t\treturn \"0\";\n\t\t}\n\n\t\tconst previous_widths = Array(col_index)\n\t\t\t.fill(0)\n\t\t\t.map((_, idx) => {\n\t\t\t\treturn get_cell_width(idx);\n\t\t\t})\n\t\t\t.join(\" + \");\n\n\t\treturn `calc(${previous_widths})`;\n\t}\n</script>\n\n<th\n\tclass:pinned-column={i < actual_pinned_columns}\n\tclass:last-pinned={i === actual_pinned_columns - 1}\n\tclass:focus={header_edit === i || selected_header === i}\n\tclass:sorted={sort_index !== -1}\n\tclass:filtered={filter_index !== -1}\n\taria-sort={get_sort_status(value, sort_columns, headers) === \"none\"\n\t\t? \"none\"\n\t\t: get_sort_status(value, sort_columns, headers) === \"asc\"\n\t\t\t? \"ascending\"\n\t\t\t: \"descending\"}\n\tstyle=\"width: {get_cell_width(i)}; left: {get_header_position(i)};\"\n\ton:click={(event) => handle_header_click(event, i)}\n\ton:mousedown={(event) => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}}\n\ttitle={value}\n>\n\t<div class=\"cell-wrap\">\n\t\t<div class=\"header-content\">\n\t\t\t{#if is_bool_column && editable && on_select_all}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"select-all-checkbox\"\n\t\t\t\t\trole=\"button\"\n\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\ton:click|stopPropagation\n\t\t\t\t\ton:keydown|stopPropagation={(e) => {\n\t\t\t\t\t\tif (e.key === \"Enter\" || e.key === \" \") {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\ton:mousedown|stopPropagation\n\t\t\t\t>\n\t\t\t\t\t<BaseCheckbox\n\t\t\t\t\t\tvalue={select_all_state === \"checked\"}\n\t\t\t\t\t\tindeterminate={select_all_state === \"indeterminate\"}\n\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\tinteractive={true}\n\t\t\t\t\t\ton:select={() => {\n\t\t\t\t\t\t\tif (on_select_all) {\n\t\t\t\t\t\t\t\tconst new_value = select_all_state !== \"checked\";\n\t\t\t\t\t\t\t\ton_select_all(i, new_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<button\n\t\t\t\tclass=\"header-button\"\n\t\t\t\ton:click={(event) => handle_header_click(event, i)}\n\t\t\t\ton:mousedown={(event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}}\n\t\t\t\ttitle={value}\n\t\t\t>\n\t\t\t\t<EditableCell\n\t\t\t\t\t{max_chars}\n\t\t\t\t\tbind:value\n\t\t\t\t\tbind:el\n\t\t\t\t\t{latex_delimiters}\n\t\t\t\t\t{line_breaks}\n\t\t\t\t\tedit={header_edit === i}\n\t\t\t\t\ton:keydown={(event) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tevent.detail.key === \"Enter\" ||\n\t\t\t\t\t\t\tevent.detail.key === \"Escape\" ||\n\t\t\t\t\t\t\tevent.detail.key === \"Tab\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tend_header_edit(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\theader\n\t\t\t\t\t{editable}\n\t\t\t\t\t{is_static}\n\t\t\t\t\t{i18n}\n\t\t\t\t\tcoords={[i, 0]}\n\t\t\t\t/>\n\t\t\t\t{#if sort_index !== -1}\n\t\t\t\t\t<div class=\"sort-indicators\">\n\t\t\t\t\t\t<span class=\"sort-arrow\">\n\t\t\t\t\t\t\t{#if current_direction === \"asc\"}\n\t\t\t\t\t\t\t\t<SortArrowUp size={12} />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<SortArrowDown size={12} />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{#if sort_columns.length > 1}\n\t\t\t\t\t\t\t<span class=\"sort-priority\">\n\t\t\t\t\t\t\t\t{sort_priority}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if filter_index !== -1}\n\t\t\t\t\t<div class=\"filter-indicators\">\n\t\t\t\t\t\t<span class=\"filter-icon\">\n\t\t\t\t\t\t\t<CellMenuIcons icon=\"filter\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</button>\n\t\t\t{#if is_static}\n\t\t\t\t<Padlock />\n\t\t\t{/if}\n\t\t</div>\n\t\t{#if can_add_columns}\n\t\t\t<CellMenuButton on_click={(event) => toggle_header_menu(event, i)} />\n\t\t{/if}\n\t</div>\n</th>\n\n<style>\n\tth {\n\t\t--ring-color: transparent;\n\t\tposition: relative;\n\t\toutline: none;\n\t\tbox-shadow: inset 0 0 0 1px var(--ring-color);\n\t\tpadding: 0;\n\t\tbackground: var(--table-even-background-fill);\n\t\tborder-right-width: 0px;\n\t\tborder-left-width: 1px;\n\t\tborder-style: solid;\n\t\tborder-color: var(--border-color-primary);\n\t}\n\n\tth:first-child {\n\t\tborder-top-left-radius: var(--table-radius);\n\t\tborder-bottom-left-radius: var(--table-radius);\n\t\tborder-left-width: 0px;\n\t}\n\n\tth:last-child {\n\t\tborder-top-right-radius: var(--table-radius);\n\t\tborder-bottom-right-radius: var(--table-radius);\n\t}\n\n\tth.focus {\n\t\t--ring-color: var(--color-accent);\n\t\tbox-shadow: inset 0 0 0 2px var(--ring-color);\n\t\tz-index: 4;\n\t}\n\n\tth.focus :global(.cell-menu-button) {\n\t\tdisplay: flex;\n\t}\n\n\tth:hover :global(.cell-menu-button) {\n\t\tdisplay: flex;\n\t}\n\n\t.cell-wrap {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\toutline: none;\n\t\tmin-height: var(--size-9);\n\t\tposition: relative;\n\t\theight: 100%;\n\t\tpadding: var(--size-2);\n\t\tbox-sizing: border-box;\n\t\tmargin: 0;\n\t\tgap: var(--size-1);\n\t\toverflow: visible;\n\t\tmin-width: 0;\n\t\tborder-radius: var(--table-radius);\n\t}\n\n\t.header-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\toverflow: hidden;\n\t\tflex-grow: 1;\n\t\tmin-width: 0;\n\t\twhite-space: normal;\n\t\toverflow-wrap: break-word;\n\t\tword-break: normal;\n\t\theight: 100%;\n\t\tgap: var(--size-1);\n\t}\n\n\t.header-button {\n\t\tdisplay: flex;\n\t\ttext-align: left;\n\t\twidth: 100%;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t}\n\n\t.sort-indicators {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-left: var(--size-1);\n\t\tgap: var(--size-1);\n\t}\n\n\t.sort-arrow {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.sort-priority {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: var(--size-2);\n\t\tbackground-color: var(--button-secondary-background-fill);\n\t\tcolor: var(--body-text-color);\n\t\tborder-radius: var(--radius-sm);\n\t\twidth: var(--size-2-5);\n\t\theight: var(--size-2-5);\n\t\tpadding: var(--size-1-5);\n\t}\n\n\t.filter-indicators {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-left: var(--size-1);\n\t\tgap: var(--size-1);\n\t}\n\n\t.filter-icon {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.pinned-column {\n\t\tposition: sticky;\n\t\tz-index: 5;\n\t\tborder-right: none;\n\t}\n\n\t.select-all-checkbox {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-right: var(--size-1);\n\t\tflex-shrink: 0;\n\t}\n\n\t.select-all-checkbox :global(label) {\n\t\tmargin: 0;\n\t}\n\n\t.select-all-checkbox :global(span) {\n\t\tdisplay: none;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport EditableCell from \"./EditableCell.svelte\";\n\timport CellMenuButton from \"./CellMenuButton.svelte\";\n\timport type { I18nFormatter } from \"js/core/src/gradio_helper\";\n\timport type { Datatype } from \"./utils/utils\";\n\timport type { CellValue } from \"./types\";\n\timport { is_cell_in_selection } from \"./utils/selection_utils\";\n\n\texport let value: CellValue;\n\texport let index: number;\n\texport let j: number;\n\texport let actual_pinned_columns: number;\n\texport let get_cell_width: (index: number) => string;\n\texport let handle_cell_click: (\n\t\tevent: MouseEvent,\n\t\trow: number,\n\t\tcol: number\n\t) => void;\n\texport let handle_blur: (\n\t\tevent: CustomEvent<{\n\t\t\tblur_event: FocusEvent;\n\t\t\tcoords: [number, number];\n\t\t}>\n\t) => void;\n\texport let toggle_cell_menu: (\n\t\tevent: MouseEvent,\n\t\trow: number,\n\t\tcol: number\n\t) => void;\n\texport let is_cell_selected: (\n\t\tcoords: [number, number],\n\t\tselected_cells: [number, number][]\n\t) => string;\n\texport let should_show_cell_menu: (\n\t\tcoords: [number, number],\n\t\tselected_cells: [number, number][],\n\t\teditable: boolean\n\t) => boolean;\n\texport let selected_cells: [number, number][];\n\texport let copy_flash: boolean;\n\texport let active_cell_menu: {\n\t\trow: number;\n\t\tcol: number;\n\t\tx: number;\n\t\ty: number;\n\t} | null;\n\texport let styling: string | undefined;\n\texport let latex_delimiters: {\n\t\tleft: string;\n\t\tright: string;\n\t\tdisplay: boolean;\n\t}[];\n\texport let line_breaks: boolean;\n\texport let datatype: Datatype;\n\texport let editing: [number, number] | false;\n\texport let max_chars: number | undefined;\n\texport let editable: boolean;\n\texport let is_static = false;\n\texport let i18n: I18nFormatter;\n\texport let components: Record<string, any> = {};\n\texport let el: {\n\t\tcell: HTMLTableCellElement | null;\n\t\tinput: HTMLTextAreaElement | null;\n\t};\n\texport let handle_select_column: (col: number) => void;\n\texport let handle_select_row: (row: number) => void;\n\texport let is_dragging: boolean;\n\texport let display_value: string | undefined;\n\texport let wrap = false;\n\n\tfunction get_cell_position(col_index: number): string {\n\t\tif (col_index >= actual_pinned_columns) {\n\t\t\treturn \"auto\";\n\t\t}\n\n\t\tif (col_index === 0) {\n\t\t\treturn \"0\";\n\t\t}\n\n\t\tconst previous_widths = Array(col_index)\n\t\t\t.fill(0)\n\t\t\t.map((_, idx) => {\n\t\t\t\treturn get_cell_width(idx);\n\t\t\t})\n\t\t\t.join(\" + \");\n\n\t\treturn `calc(${previous_widths})`;\n\t}\n\n\t$: cell_classes = is_cell_selected([index, j], selected_cells || []);\n\t$: is_in_selection = is_cell_in_selection([index, j], selected_cells);\n\t$: has_no_top = cell_classes.includes(\"no-top\");\n\t$: has_no_bottom = cell_classes.includes(\"no-bottom\");\n\t$: has_no_left = cell_classes.includes(\"no-left\");\n\t$: has_no_right = cell_classes.includes(\"no-right\");\n</script>\n\n<td\n\tclass:pinned-column={j < actual_pinned_columns}\n\tclass:last-pinned={j === actual_pinned_columns - 1}\n\ttabindex={j < actual_pinned_columns ? -1 : 0}\n\tbind:this={el.cell}\n\tdata-row={index}\n\tdata-col={j}\n\tdata-testid={`cell-${index}-${j}`}\n\ton:mousedown={(e) => handle_cell_click(e, index, j)}\n\ton:contextmenu|preventDefault={(e) => toggle_cell_menu(e, index, j)}\n\tstyle=\"width: {get_cell_width(j)}; left: {get_cell_position(j)}; {styling ||\n\t\t''}\"\n\tclass:flash={copy_flash && is_in_selection}\n\tclass:cell-selected={is_in_selection}\n\tclass:no-top={has_no_top}\n\tclass:no-bottom={has_no_bottom}\n\tclass:no-left={has_no_left}\n\tclass:no-right={has_no_right}\n\tclass:menu-active={active_cell_menu &&\n\t\tactive_cell_menu.row === index &&\n\t\tactive_cell_menu.col === j}\n\tclass:dragging={is_dragging}\n>\n\t<div class=\"cell-wrap\">\n\t\t<EditableCell\n\t\t\tbind:value\n\t\t\tbind:el={el.input}\n\t\t\tdisplay_value={display_value !== undefined\n\t\t\t\t? display_value\n\t\t\t\t: String(value)}\n\t\t\t{latex_delimiters}\n\t\t\t{line_breaks}\n\t\t\t{editable}\n\t\t\t{is_static}\n\t\t\tedit={editing && editing[0] === index && editing[1] === j}\n\t\t\t{datatype}\n\t\t\ton:focus={() => {\n\t\t\t\tconst row = index;\n\t\t\t\tconst col = j;\n\t\t\t\tif (!selected_cells.some(([r, c]) => r === row && c === col)) {\n\t\t\t\t\tselected_cells = [[row, col]];\n\t\t\t\t}\n\t\t\t}}\n\t\t\ton:blur={handle_blur}\n\t\t\t{max_chars}\n\t\t\t{i18n}\n\t\t\t{components}\n\t\t\tshow_selection_buttons={selected_cells.length === 1 &&\n\t\t\t\tselected_cells[0][0] === index &&\n\t\t\t\tselected_cells[0][1] === j}\n\t\t\tcoords={[index, j]}\n\t\t\ton_select_column={handle_select_column}\n\t\t\ton_select_row={handle_select_row}\n\t\t\t{is_dragging}\n\t\t\twrap_text={wrap}\n\t\t/>\n\t\t{#if editable && should_show_cell_menu([index, j], selected_cells, editable)}\n\t\t\t<CellMenuButton on_click={(event) => toggle_cell_menu(event, index, j)} />\n\t\t{/if}\n\t</div>\n</td>\n\n<style>\n\ttd {\n\t\t--ring-color: transparent;\n\t\tposition: relative;\n\t\toutline: none;\n\t\tbox-shadow: inset 0 0 0 1px var(--ring-color);\n\t\tpadding: 0;\n\t\tborder-right-width: 0px;\n\t\tborder-left-width: 1px;\n\t\tborder-style: solid;\n\t\tborder-color: var(--border-color-primary);\n\t}\n\n\t.cell-wrap {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\toutline: none;\n\t\tmin-height: var(--size-9);\n\t\tposition: relative;\n\t\theight: 100%;\n\t\tpadding: var(--size-2);\n\t\tbox-sizing: border-box;\n\t\tmargin: 0;\n\t\tgap: var(--size-1);\n\t\toverflow: visible;\n\t\tmin-width: 0;\n\t\tborder-radius: var(--table-radius);\n\t}\n\n\t.cell-selected {\n\t\t--ring-color: var(--color-accent);\n\t\tbox-shadow: inset 0 0 0 2px var(--ring-color);\n\t\tz-index: 2;\n\t\tposition: relative;\n\t}\n\n\t.cell-selected :global(.cell-menu-button) {\n\t\tdisplay: flex;\n\t}\n\n\t.flash.cell-selected {\n\t\tanimation: flash-color 700ms ease-out;\n\t}\n\n\t@keyframes flash-color {\n\t\t0%,\n\t\t30% {\n\t\t\tbackground: var(--color-accent-copied);\n\t\t}\n\n\t\t100% {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n\n\t.pinned-column {\n\t\tposition: sticky;\n\t\tz-index: 3;\n\t\tborder-right: none;\n\t}\n\n\t.pinned-column:nth-child(odd) {\n\t\tbackground: var(--table-odd-background-fill);\n\t}\n\n\t.pinned-column:nth-child(even) {\n\t\tbackground: var(--table-even-background-fill);\n\t}\n\n\ttd:first-child {\n\t\tborder-left-width: 0px;\n\t}\n\n\t:global(tr:last-child) td:first-child {\n\t\tborder-bottom-left-radius: var(--table-radius);\n\t}\n\n\t:global(tr:last-child) td:last-child {\n\t\tborder-bottom-right-radius: var(--table-radius);\n\t}\n\n\t.dragging {\n\t\tcursor: crosshair;\n\t}\n\n\t/* Add back the cell selection border styles */\n\t.cell-selected.no-top {\n\t\tbox-shadow:\n\t\t\tinset 2px 0 0 var(--ring-color),\n\t\t\tinset -2px 0 0 var(--ring-color),\n\t\t\tinset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-bottom {\n\t\tbox-shadow:\n\t\t\tinset 2px 0 0 var(--ring-color),\n\t\t\tinset -2px 0 0 var(--ring-color),\n\t\t\tinset 0 2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-left {\n\t\tbox-shadow:\n\t\t\tinset 0 2px 0 var(--ring-color),\n\t\t\tinset -2px 0 0 var(--ring-color),\n\t\t\tinset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-right {\n\t\tbox-shadow:\n\t\t\tinset 0 2px 0 var(--ring-color),\n\t\t\tinset 2px 0 0 var(--ring-color),\n\t\t\tinset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-top.no-left {\n\t\tbox-shadow:\n\t\t\tinset -2px 0 0 var(--ring-color),\n\t\t\tinset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-top.no-right {\n\t\tbox-shadow:\n\t\t\tinset 2px 0 0 var(--ring-color),\n\t\t\tinset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-bottom.no-left {\n\t\tbox-shadow:\n\t\t\tinset -2px 0 0 var(--ring-color),\n\t\t\tinset 0 2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-bottom.no-right {\n\t\tbox-shadow:\n\t\t\tinset 2px 0 0 var(--ring-color),\n\t\t\tinset 0 2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-top.no-bottom {\n\t\tbox-shadow:\n\t\t\tinset 2px 0 0 var(--ring-color),\n\t\t\tinset -2px 0 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-left.no-right {\n\t\tbox-shadow:\n\t\t\tinset 0 2px 0 var(--ring-color),\n\t\t\tinset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-top.no-left.no-right {\n\t\tbox-shadow: inset 0 -2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-bottom.no-left.no-right {\n\t\tbox-shadow: inset 0 2px 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-left.no-top.no-bottom {\n\t\tbox-shadow: inset -2px 0 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-right.no-top.no-bottom {\n\t\tbox-shadow: inset 2px 0 0 var(--ring-color);\n\t}\n\n\t.cell-selected.no-top.no-bottom.no-left.no-right {\n\t\tbox-shadow: none;\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let on_click: () => void;\n</script>\n\n<button class=\"add-row-button\" on:click={on_click} aria-label=\"Add row\">\n\t+\n</button>\n\n<style>\n\t.add-row-button {\n\t\twidth: 100%;\n\t\tpadding: var(--size-1);\n\t\tbackground: transparent;\n\t\tborder: 1px dashed var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tcolor: var(--body-text-color);\n\t\tcursor: pointer;\n\t\ttransition: all 150ms;\n\t\tmargin-top: var(--size-2);\n\t\tz-index: 10;\n\t\tposition: relative;\n\t\tpointer-events: auto;\n\t}\n\n\t.add-row-button:hover {\n\t\tbackground: var(--background-fill-secondary);\n\t\tborder-style: solid;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount, tick, createEventDispatcher } from \"svelte\";\n\n\texport let items: any[][] = [];\n\n\texport let max_height: number;\n\texport let actual_height: number;\n\texport let table_scrollbar_width: number;\n\texport let start = 0;\n\texport let end = 20;\n\texport let selected: number | false;\n\texport let disable_scroll = false;\n\texport let show_scroll_button = false;\n\texport let viewport: HTMLTableElement;\n\texport let label: string | null = null;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tscroll_top: number;\n\t}>();\n\n\tlet height = \"100%\";\n\n\tlet average_height = 30;\n\tlet bottom = 0;\n\tlet contents: HTMLTableSectionElement;\n\tlet head_height = 0;\n\tlet foot_height = 0;\n\tlet height_map: number[] = [];\n\tlet mounted: boolean;\n\tlet rows: HTMLCollectionOf<HTMLTableRowElement>;\n\tlet top = 0;\n\tlet viewport_height = 200;\n\tlet visible: { index: number; data: any[] }[] = [];\n\tlet viewport_box: DOMRectReadOnly;\n\n\t$: viewport_height = viewport_box?.height || 200;\n\n\tconst is_browser = typeof window !== \"undefined\";\n\tconst raf = is_browser\n\t\t? window.requestAnimationFrame\n\t\t: (cb: (...args: any[]) => void) => cb();\n\n\t$: {\n\t\tif (mounted && viewport_height && viewport.offsetParent) {\n\t\t\tsortedItems, raf(refresh_height_map);\n\t\t}\n\t}\n\n\tasync function refresh_height_map(): Promise<void> {\n\t\tif (!viewport) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (sortedItems.length < start) {\n\t\t\tawait scroll_to_index(sortedItems.length - 1, { behavior: \"auto\" });\n\t\t}\n\n\t\tconst scrollTop = Math.max(0, viewport.scrollTop);\n\t\tshow_scroll_button = scrollTop > 100;\n\t\ttable_scrollbar_width = viewport.offsetWidth - viewport.clientWidth;\n\n\t\t// acquire height map for currently visible rows\n\t\tfor (let v = 0; v < rows.length; v += 1) {\n\t\t\theight_map[start + v] = rows[v].getBoundingClientRect().height;\n\t\t}\n\t\tlet i = 0;\n\t\tlet y = head_height;\n\t\t// loop items to find new start\n\t\twhile (i < sortedItems.length) {\n\t\t\tconst row_height = height_map[i] || average_height;\n\t\t\t// keep a page of rows buffered above\n\t\t\tif (y + row_height > scrollTop - max_height) {\n\t\t\t\tstart = i;\n\t\t\t\ttop = y - head_height;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ty += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\tlet content_height = head_height;\n\t\twhile (i < sortedItems.length) {\n\t\t\tconst row_height = height_map[i] || average_height;\n\t\t\tcontent_height += row_height;\n\t\t\ti += 1;\n\t\t\t// keep a page of rows buffered below\n\t\t\tif (content_height - head_height > 3 * max_height) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tend = i;\n\t\tconst remaining = sortedItems.length - end;\n\n\t\tconst scrollbar_height = viewport.offsetHeight - viewport.clientHeight;\n\t\tif (scrollbar_height > 0) {\n\t\t\tcontent_height += scrollbar_height;\n\t\t}\n\n\t\tlet filtered_height_map = height_map.filter((v) => typeof v === \"number\");\n\t\taverage_height =\n\t\t\tfiltered_height_map.reduce((a, b) => a + b, 0) /\n\t\t\t\tfiltered_height_map.length || 30;\n\n\t\tbottom = remaining * average_height;\n\t\tif (!isFinite(bottom)) {\n\t\t\tbottom = 200000;\n\t\t}\n\t\theight_map.length = sortedItems.length;\n\t\twhile (i < sortedItems.length) {\n\t\t\ti += 1;\n\t\t\theight_map[i] = average_height;\n\t\t}\n\t\tif (max_height && content_height > max_height) {\n\t\t\tactual_height = max_height;\n\t\t} else {\n\t\t\tactual_height = content_height;\n\t\t}\n\t}\n\n\t$: scroll_and_render(selected);\n\n\tasync function scroll_and_render(n: number | false): Promise<void> {\n\t\traf(async () => {\n\t\t\tif (typeof n !== \"number\") return;\n\t\t\tconst direction = typeof n !== \"number\" ? false : is_in_view(n);\n\t\t\tif (direction === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (direction === \"back\") {\n\t\t\t\tawait scroll_to_index(n, { behavior: \"instant\" });\n\t\t\t}\n\n\t\t\tif (direction === \"forwards\") {\n\t\t\t\tawait scroll_to_index(n, { behavior: \"instant\" }, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction is_in_view(n: number): \"back\" | \"forwards\" | true {\n\t\tconst current = rows && rows[n - start];\n\t\tif (!current && n < start) {\n\t\t\treturn \"back\";\n\t\t}\n\t\tif (!current && n >= end - 1) {\n\t\t\treturn \"forwards\";\n\t\t}\n\n\t\tconst { top: viewport_top } = viewport.getBoundingClientRect();\n\t\tconst { top, bottom } = current.getBoundingClientRect();\n\n\t\tif (top - viewport_top < 37) {\n\t\t\treturn \"back\";\n\t\t}\n\n\t\tif (bottom - viewport_top > viewport_height) {\n\t\t\treturn \"forwards\";\n\t\t}\n\n\t\treturn true;\n\t}\n\n\texport async function scroll_to_index(\n\t\tindex: number,\n\t\topts: ScrollToOptions,\n\t\talign_end = false\n\t): Promise<void> {\n\t\tawait tick();\n\n\t\tconst _itemHeight = average_height;\n\n\t\tlet distance = index * _itemHeight;\n\t\tif (align_end) {\n\t\t\tdistance = distance - viewport_height + _itemHeight + head_height;\n\t\t}\n\n\t\tconst scrollbar_height = viewport.offsetHeight - viewport.clientHeight;\n\t\tif (scrollbar_height > 0) {\n\t\t\tdistance += scrollbar_height;\n\t\t}\n\n\t\tconst _opts = {\n\t\t\ttop: distance,\n\t\t\tbehavior: \"smooth\" as ScrollBehavior,\n\t\t\t...opts\n\t\t};\n\n\t\tviewport.scrollTo(_opts);\n\t}\n\n\t$: sortedItems = items;\n\n\t$: visible = is_browser\n\t\t? sortedItems.slice(start, end).map((data, i) => {\n\t\t\t\treturn { index: i + start, data };\n\t\t\t})\n\t\t: sortedItems\n\t\t\t\t.slice(0, (max_height / sortedItems.length) * average_height + 1)\n\t\t\t\t.map((data, i) => {\n\t\t\t\t\treturn { index: i + start, data };\n\t\t\t\t});\n\n\tonMount(() => {\n\t\trows = contents.children as HTMLCollectionOf<HTMLTableRowElement>;\n\t\tmounted = true;\n\t});\n</script>\n\n<svelte-virtual-table-viewport>\n\t<div>\n\t\t<table\n\t\t\tclass=\"table\"\n\t\t\tclass:disable-scroll={disable_scroll}\n\t\t\tbind:this={viewport}\n\t\t\tbind:contentRect={viewport_box}\n\t\t\ton:scroll={refresh_height_map}\n\t\t\tstyle=\"height: {height}; --bw-svt-p-top: {top}px; --bw-svt-p-bottom: {bottom}px; --bw-svt-head-height: {head_height}px; --bw-svt-foot-height: {foot_height}px; --bw-svt-avg-row-height: {average_height}px; --max-height: {max_height}px\"\n\t\t>\n\t\t\t{#if label && label.length !== 0}\n\t\t\t\t<caption class=\"sr-only\">{label}</caption>\n\t\t\t{/if}\n\t\t\t<thead class=\"thead\" bind:offsetHeight={head_height}>\n\t\t\t\t<slot name=\"thead\" />\n\t\t\t</thead>\n\t\t\t<tbody bind:this={contents} class=\"tbody\">\n\t\t\t\t{#if visible.length && visible[0].data.length}\n\t\t\t\t\t{#each visible as item (item.data[0].id)}\n\t\t\t\t\t\t<slot name=\"tbody\" item={item.data} index={item.index}>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Missing Table Row</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t</tbody>\n\t\t\t<tfoot class=\"tfoot\" bind:offsetHeight={foot_height}>\n\t\t\t\t<slot name=\"tfoot\" />\n\t\t\t</tfoot>\n\t\t</table>\n\t</div>\n</svelte-virtual-table-viewport>\n\n<style type=\"text/css\">\n\ttable {\n\t\tposition: relative;\n\t\toverflow: auto;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tmax-height: var(--max-height);\n\t\tbox-sizing: border-box;\n\t\tdisplay: block;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tcolor: var(--body-text-color);\n\t\tfont-size: var(--input-text-size);\n\t\tline-height: var(--line-md);\n\t\tfont-family: var(--font-mono);\n\t\tborder-spacing: 0;\n\t\twidth: 100%;\n\t\tscroll-snap-type: x proximity;\n\t\tborder-collapse: separate;\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: rgba(128, 128, 128, 0.5) transparent;\n\t}\n\n\ttable::-webkit-scrollbar {\n\t\twidth: 4px;\n\t\theight: 4px;\n\t}\n\n\ttable::-webkit-scrollbar-track {\n\t\tbackground: transparent;\n\t}\n\n\ttable::-webkit-scrollbar-thumb {\n\t\tbackground-color: rgba(128, 128, 128, 0.5);\n\t\tborder-radius: 4px;\n\t}\n\n\ttable:hover {\n\t\tscrollbar-color: rgba(160, 160, 160, 0.7) transparent;\n\t}\n\n\ttable:hover::-webkit-scrollbar-thumb {\n\t\tbackground-color: rgba(160, 160, 160, 0.7);\n\t\tborder-radius: 4px;\n\t\twidth: 4px;\n\t}\n\n\t@media (hover: none) {\n\t\ttable {\n\t\t\tscrollbar-color: rgba(160, 160, 160, 0.7) transparent;\n\t\t}\n\n\t\ttable::-webkit-scrollbar-thumb {\n\t\t\tbackground-color: rgba(160, 160, 160, 0.7);\n\t\t\tborder-radius: 4px;\n\t\t}\n\t}\n\n\t@media (pointer: coarse) {\n\t\ttable::-webkit-scrollbar {\n\t\t\twidth: 8px;\n\t\t\theight: 8px;\n\t\t}\n\t}\n\n\ttable :is(thead, tfoot, tbody) {\n\t\tdisplay: table;\n\t\ttable-layout: fixed;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t}\n\n\ttbody {\n\t\toverflow-x: scroll;\n\t\toverflow-y: hidden;\n\t}\n\n\ttable tbody {\n\t\tpadding-top: var(--bw-svt-p-top);\n\t\tpadding-bottom: var(--bw-svt-p-bottom);\n\t}\n\ttbody {\n\t\tposition: relative;\n\t\tbox-sizing: border-box;\n\t\tborder: 0px solid currentColor;\n\t}\n\n\ttbody > :global(tr:last-child) {\n\t\tborder: none;\n\t}\n\n\ttable :global(td) {\n\t\tscroll-snap-align: start;\n\t}\n\n\ttbody :global(td.pinned-column) {\n\t\tposition: sticky;\n\t\tz-index: 3;\n\t}\n\n\ttbody :global(tr:nth-child(odd)) :global(td.pinned-column) {\n\t\tbackground: var(--table-odd-background-fill);\n\t}\n\n\ttbody :global(tr:nth-child(even)) :global(td.pinned-column) {\n\t\tbackground: var(--table-even-background-fill);\n\t}\n\n\ttbody :global(td.last-pinned) {\n\t\tborder-right: 1px solid var(--border-color-primary);\n\t}\n\n\tthead {\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbackground: var(--background-fill-primary);\n\t\tz-index: 7;\n\t}\n\n\tthead :global(th) {\n\t\tbackground: var(--table-even-background-fill) !important;\n\t}\n\n\tthead :global(th.pinned-column) {\n\t\tposition: sticky;\n\t\tz-index: 7;\n\t\tbackground: var(--table-even-background-fill) !important;\n\t}\n\n\tthead :global(th.last-pinned) {\n\t\tborder-right: 1px solid var(--border-color-primary);\n\t}\n\n\t.table.disable-scroll {\n\t\toverflow: hidden !important;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount } from \"svelte\";\n\timport { Check, DropdownArrow } from \"@gradio/icons\";\n\timport type { FilterDatatype } from \"./context/dataframe_context\";\n\n\texport let on_filter: (\n\t\tdatatype: FilterDatatype,\n\t\tselected_filter: string,\n\t\tvalue: string\n\t) => void = () => {};\n\n\tlet menu_element: HTMLDivElement;\n\tlet datatype: \"string\" | \"number\" = \"string\";\n\tlet current_filter = \"Contains\";\n\tlet filter_dropdown_open = false;\n\tlet filter_input_value = \"\";\n\n\tconst filter_options = {\n\t\tstring: [\n\t\t\t\"Contains\",\n\t\t\t\"Does not contain\",\n\t\t\t\"Starts with\",\n\t\t\t\"Ends with\",\n\t\t\t\"Is\",\n\t\t\t\"Is not\",\n\t\t\t\"Is empty\",\n\t\t\t\"Is not empty\"\n\t\t],\n\t\tnumber: [\"=\", \"≠\", \">\", \"<\", \"≥\", \"≤\", \"Is empty\", \"Is not empty\"]\n\t};\n\n\tonMount(() => {\n\t\tposition_menu();\n\t});\n\n\tfunction position_menu(): void {\n\t\tif (!menu_element) return;\n\n\t\tconst viewport_width = window.innerWidth;\n\t\tconst viewport_height = window.innerHeight;\n\t\tconst menu_rect = menu_element.getBoundingClientRect();\n\n\t\tconst x = (viewport_width - menu_rect.width) / 2;\n\t\tconst y = (viewport_height - menu_rect.height) / 2;\n\n\t\tmenu_element.style.left = `${x}px`;\n\t\tmenu_element.style.top = `${y}px`;\n\t}\n\n\tfunction handle_filter_input(e: Event): void {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tfilter_input_value = target.value;\n\t}\n</script>\n\n<div>\n\t<div class=\"background\"></div>\n\t<div bind:this={menu_element} class=\"filter-menu\">\n\t\t<div class=\"filter-datatype-container\">\n\t\t\t<span>Filter as</span>\n\t\t\t<button\n\t\t\t\ton:click|stopPropagation={() => {\n\t\t\t\t\tdatatype = datatype === \"string\" ? \"number\" : \"string\";\n\t\t\t\t\tcurrent_filter = filter_options[datatype][0];\n\t\t\t\t}}\n\t\t\t\taria-label={`Change filter type. Filtering ${datatype}s`}\n\t\t\t>\n\t\t\t\t{datatype}\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"input-container\">\n\t\t\t<div class=\"filter-dropdown\">\n\t\t\t\t<button\n\t\t\t\t\ton:click|stopPropagation={() =>\n\t\t\t\t\t\t(filter_dropdown_open = !filter_dropdown_open)}\n\t\t\t\t\taria-label={`Change filter. Using '${current_filter}'`}\n\t\t\t\t>\n\t\t\t\t\t{current_filter}\n\t\t\t\t\t<DropdownArrow />\n\t\t\t\t</button>\n\n\t\t\t\t{#if filter_dropdown_open}\n\t\t\t\t\t<div class=\"dropdown-filter-options\">\n\t\t\t\t\t\t{#each filter_options[datatype] as opt}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ton:click|stopPropagation={() => {\n\t\t\t\t\t\t\t\t\tcurrent_filter = opt;\n\t\t\t\t\t\t\t\t\tfilter_dropdown_open = !filter_dropdown_open;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclass=\"filter-option\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{opt}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={filter_input_value}\n\t\t\t\ton:click|stopPropagation\n\t\t\t\ton:input={handle_filter_input}\n\t\t\t\tplaceholder=\"Type a value\"\n\t\t\t\tclass=\"filter-input\"\n\t\t\t/>\n\t\t</div>\n\n\t\t<button\n\t\t\tclass=\"check-button\"\n\t\t\ton:click={() => on_filter(datatype, current_filter, filter_input_value)}\n\t\t>\n\t\t\t<Check />\n\t\t</button>\n\t</div>\n</div>\n\n<style>\n\t.background {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100vw;\n\t\theight: 100vh;\n\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t\tz-index: 20;\n\t}\n\n\t.filter-menu {\n\t\tposition: fixed;\n\t\tbackground: var(--background-fill-primary);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tpadding: var(--size-2);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--size-2);\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\twidth: 300px;\n\t\tz-index: 21;\n\t}\n\n\t.filter-datatype-container {\n\t\tdisplay: flex;\n\t\tgap: var(--size-2);\n\t\talign-items: center;\n\t}\n\n\t.filter-menu span {\n\t\tfont-size: var(--text-sm);\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.filter-menu button {\n\t\theight: var(--size-6);\n\t\tbackground: none;\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tpadding: var(--size-1) var(--size-2);\n\t\tcolor: var(--body-text-color);\n\t\tfont-size: var(--text-sm);\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: var(--size-2);\n\t}\n\n\t.filter-menu button:hover {\n\t\tbackground-color: var(--background-fill-secondary);\n\t}\n\n\t.filter-input {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-6);\n\t\tpadding: var(--size-2);\n\t\tpadding-right: var(--size-8);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--table-radius);\n\t\tfont-size: var(--text-sm);\n\t\tcolor: var(--body-text-color);\n\t\tbackground: var(--background-fill-secondary);\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.filter-input:hover {\n\t\tborder-color: var(--border-color-secondary);\n\t\tbackground: var(--background-fill-primary);\n\t}\n\n\t.filter-input:focus {\n\t\toutline: none;\n\t\tborder-color: var(--color-accent);\n\t\tbackground: var(--background-fill-primary);\n\t\tbox-shadow: 0 0 0 1px var(--color-accent);\n\t}\n\n\t.dropdown-filter-options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground: var(--background-fill-primary);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tbox-shadow: var(--shadow-drop-md);\n\t\tposition: absolute;\n\t\tz-index: var(--layer-1);\n\t}\n\n\t.dropdown-filter-options .filter-option {\n\t\tborder: none;\n\t\tjustify-content: flex-start;\n\t}\n\n\t.input-container {\n\t\tdisplay: flex;\n\t\tgap: var(--size-2);\n\t\talign-items: center;\n\t}\n\n\t.input-container button {\n\t\twidth: 130px;\n\t}\n\n\t:global(svg.dropdown-arrow) {\n\t\twidth: var(--size-4);\n\t\theight: var(--size-4);\n\t\tmargin-left: auto;\n\t}\n\n\t.filter-menu .check-button {\n\t\tbackground: var(--color-accent);\n\t\tcolor: white;\n\t\tborder: none;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-6);\n\t\tborder-radius: var(--radius-sm);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: var(--size-1);\n\t}\n\n\t.check-button:hover {\n\t\tbackground: var(--color-accent-soft);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount } from \"svelte\";\n\timport CellMenuIcons from \"./CellMenuIcons.svelte\";\n\timport FilterMenu from \"./FilterMenu.svelte\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport type {\n\t\tSortDirection,\n\t\tFilterDatatype\n\t} from \"./context/dataframe_context\";\n\n\texport let x: number;\n\texport let y: number;\n\texport let on_add_row_above: () => void;\n\texport let on_add_row_below: () => void;\n\texport let on_add_column_left: () => void;\n\texport let on_add_column_right: () => void;\n\texport let row: number;\n\texport let col_count: [number, \"fixed\" | \"dynamic\"];\n\texport let row_count: [number, \"fixed\" | \"dynamic\"];\n\texport let on_delete_row: () => void;\n\texport let on_delete_col: () => void;\n\texport let can_delete_rows: boolean;\n\texport let can_delete_cols: boolean;\n\texport let on_sort: (direction: SortDirection) => void = () => {};\n\texport let on_clear_sort: () => void = () => {};\n\texport let sort_direction: SortDirection | null = null;\n\texport let sort_priority: number | null = null;\n\texport let on_filter: (\n\t\tdatatype: FilterDatatype,\n\t\tselected_filter: string,\n\t\tvalue: string\n\t) => void = () => {};\n\texport let on_clear_filter: () => void = () => {};\n\texport let filter_active: boolean | null = null;\n\texport let editable = true;\n\n\texport let i18n: I18nFormatter;\n\tlet menu_element: HTMLDivElement;\n\tlet active_filter_menu: { x: number; y: number } | null = null;\n\n\t$: is_header = row === -1;\n\t$: can_add_rows = editable && row_count[1] === \"dynamic\";\n\t$: can_add_columns = editable && col_count[1] === \"dynamic\";\n\n\tonMount(() => {\n\t\tposition_menu();\n\t});\n\n\tfunction position_menu(): void {\n\t\tif (!menu_element) return;\n\n\t\tconst viewport_width = window.innerWidth;\n\t\tconst viewport_height = window.innerHeight;\n\t\tconst menu_rect = menu_element.getBoundingClientRect();\n\n\t\tlet new_x = x - 30;\n\t\tlet new_y = y - 20;\n\n\t\tif (new_x + menu_rect.width > viewport_width) {\n\t\t\tnew_x = x - menu_rect.width + 10;\n\t\t}\n\n\t\tif (new_y + menu_rect.height > viewport_height) {\n\t\t\tnew_y = y - menu_rect.height + 10;\n\t\t}\n\n\t\tmenu_element.style.left = `${new_x}px`;\n\t\tmenu_element.style.top = `${new_y}px`;\n\t}\n\n\tfunction toggle_filter_menu(): void {\n\t\tif (filter_active) {\n\t\t\ton_filter(\"string\", \"\", \"\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst menu_rect = menu_element.getBoundingClientRect();\n\t\tactive_filter_menu = {\n\t\t\tx: menu_rect.right,\n\t\t\ty: menu_rect.top + menu_rect.height / 2\n\t\t};\n\t}\n</script>\n\n<div bind:this={menu_element} class=\"cell-menu\" role=\"menu\">\n\t{#if is_header}\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click={() => on_sort(\"asc\")}\n\t\t\tclass:active={sort_direction === \"asc\"}\n\t\t>\n\t\t\t<CellMenuIcons icon=\"sort-asc\" />\n\t\t\t{i18n(\"dataframe.sort_ascending\")}\n\t\t\t{#if sort_direction === \"asc\" && sort_priority !== null}\n\t\t\t\t<span class=\"priority\">{sort_priority}</span>\n\t\t\t{/if}\n\t\t</button>\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click={() => on_sort(\"desc\")}\n\t\t\tclass:active={sort_direction === \"desc\"}\n\t\t>\n\t\t\t<CellMenuIcons icon=\"sort-desc\" />\n\t\t\t{i18n(\"dataframe.sort_descending\")}\n\t\t\t{#if sort_direction === \"desc\" && sort_priority !== null}\n\t\t\t\t<span class=\"priority\">{sort_priority}</span>\n\t\t\t{/if}\n\t\t</button>\n\t\t<button role=\"menuitem\" on:click={on_clear_sort}>\n\t\t\t<CellMenuIcons icon=\"clear-sort\" />\n\t\t\t{i18n(\"dataframe.clear_sort\")}\n\t\t</button>\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click|stopPropagation={toggle_filter_menu}\n\t\t\tclass:active={filter_active || active_filter_menu}\n\t\t>\n\t\t\t<CellMenuIcons icon=\"filter\" />\n\t\t\t{i18n(\"dataframe.filter\")}\n\t\t\t{#if filter_active}\n\t\t\t\t<span class=\"priority\">1</span>\n\t\t\t{/if}\n\t\t</button>\n\t\t<button role=\"menuitem\" on:click={on_clear_filter}>\n\t\t\t<CellMenuIcons icon=\"clear-filter\" />\n\t\t\t{i18n(\"dataframe.clear_filter\")}\n\t\t</button>\n\t{/if}\n\n\t{#if !is_header && can_add_rows}\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click={() => on_add_row_above()}\n\t\t\taria-label=\"Add row above\"\n\t\t>\n\t\t\t<CellMenuIcons icon=\"add-row-above\" />\n\t\t\t{i18n(\"dataframe.add_row_above\")}\n\t\t</button>\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click={() => on_add_row_below()}\n\t\t\taria-label=\"Add row below\"\n\t\t>\n\t\t\t<CellMenuIcons icon=\"add-row-below\" />\n\t\t\t{i18n(\"dataframe.add_row_below\")}\n\t\t</button>\n\t\t{#if can_delete_rows}\n\t\t\t<button\n\t\t\t\trole=\"menuitem\"\n\t\t\t\ton:click={on_delete_row}\n\t\t\t\tclass=\"delete\"\n\t\t\t\taria-label=\"Delete row\"\n\t\t\t>\n\t\t\t\t<CellMenuIcons icon=\"delete-row\" />\n\t\t\t\t{i18n(\"dataframe.delete_row\")}\n\t\t\t</button>\n\t\t{/if}\n\t{/if}\n\t{#if can_add_columns}\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click={() => on_add_column_left()}\n\t\t\taria-label=\"Add column to the left\"\n\t\t>\n\t\t\t<CellMenuIcons icon=\"add-column-left\" />\n\t\t\t{i18n(\"dataframe.add_column_left\")}\n\t\t</button>\n\t\t<button\n\t\t\trole=\"menuitem\"\n\t\t\ton:click={() => on_add_column_right()}\n\t\t\taria-label=\"Add column to the right\"\n\t\t>\n\t\t\t<CellMenuIcons icon=\"add-column-right\" />\n\t\t\t{i18n(\"dataframe.add_column_right\")}\n\t\t</button>\n\t\t{#if can_delete_cols}\n\t\t\t<button\n\t\t\t\trole=\"menuitem\"\n\t\t\t\ton:click={on_delete_col}\n\t\t\t\tclass=\"delete\"\n\t\t\t\taria-label=\"Delete column\"\n\t\t\t>\n\t\t\t\t<CellMenuIcons icon=\"delete-column\" />\n\t\t\t\t{i18n(\"dataframe.delete_column\")}\n\t\t\t</button>\n\t\t{/if}\n\t{/if}\n</div>\n\n{#if active_filter_menu}\n\t<FilterMenu {on_filter} />\n{/if}\n\n<style>\n\t.cell-menu {\n\t\tposition: fixed;\n\t\tz-index: 9;\n\t\tbackground: var(--background-fill-primary);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tpadding: var(--size-1);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--size-1);\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tmin-width: 150px;\n\t\tz-index: var(--layer-1);\n\t}\n\n\t.cell-menu button {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tcursor: pointer;\n\t\ttext-align: left;\n\t\tpadding: var(--size-1) var(--size-2);\n\t\tborder-radius: var(--radius-sm);\n\t\tcolor: var(--body-text-color);\n\t\tfont-size: var(--text-sm);\n\t\ttransition:\n\t\t\tbackground-color 0.2s,\n\t\t\tcolor 0.2s;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: var(--size-2);\n\t\tposition: relative;\n\t}\n\n\t.cell-menu button.active {\n\t\tbackground-color: var(--background-fill-secondary);\n\t}\n\n\t.cell-menu button:hover {\n\t\tbackground-color: var(--background-fill-secondary);\n\t}\n\n\t.cell-menu button :global(svg) {\n\t\tfill: currentColor;\n\t\ttransition: fill 0.2s;\n\t}\n\n\t.priority {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-left: auto;\n\t\tfont-size: var(--size-2);\n\t\tbackground-color: var(--button-secondary-background-fill);\n\t\tcolor: var(--body-text-color);\n\t\tborder-radius: var(--radius-sm);\n\t\twidth: var(--size-2-5);\n\t\theight: var(--size-2-5);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { Copy, Check } from \"@gradio/icons\";\n\timport { FullscreenButton } from \"@gradio/atoms\";\n\timport { onDestroy } from \"svelte\";\n\timport { createEventDispatcher } from \"svelte\";\n\n\texport let show_fullscreen_button = false;\n\texport let show_copy_button = false;\n\texport let show_search: \"none\" | \"search\" | \"filter\" = \"none\";\n\texport let fullscreen = false;\n\texport let on_copy: () => Promise<void>;\n\texport let on_commit_filter: () => void;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tsearch: string | null;\n\t}>();\n\n\tlet copied = false;\n\tlet timer: ReturnType<typeof setTimeout>;\n\texport let current_search_query: string | null = null;\n\tlet input_value = \"\";\n\n\tfunction handle_search_input(e: Event): void {\n\t\tconst target = e.target as HTMLTextAreaElement;\n\t\tinput_value = target.value;\n\t\tconst new_query = input_value || null;\n\t\tif (current_search_query !== new_query) {\n\t\t\tcurrent_search_query = new_query;\n\t\t\tdispatch(\"search\", current_search_query);\n\t\t}\n\t}\n\n\tfunction copy_feedback(): void {\n\t\tcopied = true;\n\t\tif (timer) clearTimeout(timer);\n\t\ttimer = setTimeout(() => {\n\t\t\tcopied = false;\n\t\t}, 2000);\n\t}\n\n\tasync function handle_copy(): Promise<void> {\n\t\tawait on_copy();\n\t\tcopy_feedback();\n\t}\n\n\tonDestroy(() => {\n\t\tif (timer) clearTimeout(timer);\n\t});\n</script>\n\n<div class=\"toolbar\" role=\"toolbar\" aria-label=\"Table actions\">\n\t<div class=\"toolbar-buttons\">\n\t\t{#if show_search !== \"none\"}\n\t\t\t<div class=\"search-container\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={current_search_query || \"\"}\n\t\t\t\t\ton:input={handle_search_input}\n\t\t\t\t\tplaceholder={show_search === \"filter\" ? \"Filter...\" : \"Search...\"}\n\t\t\t\t\tclass=\"search-input\"\n\t\t\t\t\tclass:filter-mode={show_search === \"filter\"}\n\t\t\t\t\ttitle={`Enter text to ${show_search} the table`}\n\t\t\t\t/>\n\t\t\t\t{#if current_search_query && show_search === \"filter\"}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"toolbar-button check-button\"\n\t\t\t\t\t\ton:click={on_commit_filter}\n\t\t\t\t\t\taria-label=\"Apply filter and update dataframe values\"\n\t\t\t\t\t\ttitle=\"Apply filter and update dataframe values\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Check />\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t\t{#if show_copy_button}\n\t\t\t<button\n\t\t\t\tclass=\"toolbar-button\"\n\t\t\t\ton:click={handle_copy}\n\t\t\t\taria-label={copied ? \"Copied to clipboard\" : \"Copy table data\"}\n\t\t\t\ttitle={copied ? \"Copied to clipboard\" : \"Copy table data\"}\n\t\t\t>\n\t\t\t\t{#if copied}\n\t\t\t\t\t<Check />\n\t\t\t\t{:else}\n\t\t\t\t\t<Copy />\n\t\t\t\t{/if}\n\t\t\t</button>\n\t\t{/if}\n\t\t{#if show_fullscreen_button}\n\t\t\t<FullscreenButton {fullscreen} on:fullscreen />\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.toolbar {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: var(--size-2);\n\t\tflex: 0 0 auto;\n\t\tfont-family: var(--font-sans);\n\t}\n\n\t.toolbar-buttons {\n\t\tdisplay: flex;\n\t\tgap: var(--size-1);\n\t\tflex-wrap: nowrap;\n\t}\n\n\t.toolbar-button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: var(--size-6);\n\t\theight: var(--size-6);\n\t\tpadding: var(--size-1);\n\t\tborder: none;\n\t\tborder-radius: var(--radius-sm);\n\t\tbackground: transparent;\n\t\tcolor: var(--body-text-color-subdued);\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.toolbar-button:hover {\n\t\tbackground: var(--background-fill-secondary);\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.toolbar-button :global(svg) {\n\t\twidth: var(--size-4);\n\t\theight: var(--size-4);\n\t}\n\n\t.search-container {\n\t\tposition: relative;\n\t}\n\n\t.search-input {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-6);\n\t\tpadding: var(--size-2);\n\t\tpadding-right: var(--size-8);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--table-radius);\n\t\tfont-size: var(--text-sm);\n\t\tcolor: var(--body-text-color);\n\t\tbackground: var(--background-fill-secondary);\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.search-input:hover {\n\t\tborder-color: var(--border-color-secondary);\n\t\tbackground: var(--background-fill-primary);\n\t}\n\n\t.search-input:focus {\n\t\toutline: none;\n\t\tborder-color: var(--color-accent);\n\t\tbackground: var(--background-fill-primary);\n\t\tbox-shadow: 0 0 0 1px var(--color-accent);\n\t}\n\n\t.check-button {\n\t\tposition: absolute;\n\t\tright: var(--size-1);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tbackground: var(--color-accent);\n\t\tcolor: white;\n\t\tborder: none;\n\t\twidth: var(--size-4);\n\t\theight: var(--size-4);\n\t\tborder-radius: var(--radius-sm);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: var(--size-1);\n\t}\n\n\t.check-button :global(svg) {\n\t\twidth: var(--size-3);\n\t\theight: var(--size-3);\n\t}\n\n\t.check-button:hover {\n\t\tbackground: var(--color-accent-soft);\n\t}\n</style>\n","import type { CellValue } from \"../types\";\n\nexport type Headers = string[];\nexport type Data = CellValue[][];\n\nexport type Datatype =\n\t| \"str\"\n\t| \"number\"\n\t| \"bool\"\n\t| \"date\"\n\t| \"markdown\"\n\t| \"html\"\n\t| \"image\";\n\nexport type Metadata = {\n\t[key: string]: string[][] | null;\n} | null;\nexport type HeadersWithIDs = { value: string; id: string }[];\nexport type DataframeValue = {\n\tdata: Data;\n\theaders: Headers;\n\tmetadata?: Metadata;\n};\n\n/**\n * Coerce a value to a given type.\n * @param v - The value to coerce.\n * @param t - The type to coerce to.\n * @returns The coerced value.\n */\nexport function cast_value_to_type(v: any, t: Datatype): CellValue {\n\tif (t === \"number\") {\n\t\tconst n = Number(v);\n\t\treturn isNaN(n) ? v : n;\n\t}\n\tif (t === \"bool\") {\n\t\tif (typeof v === \"boolean\") return v;\n\t\tif (typeof v === \"number\") return v !== 0;\n\t\tconst s = String(v).toLowerCase();\n\t\tif (s === \"true\" || s === \"1\") return true;\n\t\tif (s === \"false\" || s === \"0\") return false;\n\t\treturn v;\n\t}\n\tif (t === \"date\") {\n\t\tconst d = new Date(v);\n\t\treturn isNaN(d.getTime()) ? v : d.toISOString();\n\t}\n\treturn v;\n}\n\nexport interface EditData {\n\tindex: number | [number, number];\n\tvalue: string;\n\tprevious_value: string;\n}\n","import type { Datatype, Headers, HeadersWithIDs } from \"./utils\";\nimport type { CellValue } from \"../types\";\nimport { cast_value_to_type } from \"./utils\";\n\nexport function make_headers(\n\t_head: Headers,\n\tcol_count: [number, \"fixed\" | \"dynamic\"],\n\tels: Record<\n\t\tstring,\n\t\t{ cell: null | HTMLTableCellElement; input: null | HTMLTextAreaElement }\n\t>,\n\tmake_id: () => string\n): HeadersWithIDs {\n\tlet _h = _head || [];\n\tif (col_count[1] === \"fixed\" && _h.length < col_count[0]) {\n\t\tconst fill = Array(col_count[0] - _h.length)\n\t\t\t.fill(\"\")\n\t\t\t.map((_, i) => `${i + _h.length}`);\n\t\t_h = _h.concat(fill);\n\t}\n\n\tif (!_h || _h.length === 0) {\n\t\treturn Array(col_count[0])\n\t\t\t.fill(0)\n\t\t\t.map((_, i) => {\n\t\t\t\tconst _id = make_id();\n\t\t\t\tels[_id] = { cell: null, input: null };\n\t\t\t\treturn { id: _id, value: JSON.stringify(i + 1) };\n\t\t\t});\n\t}\n\n\treturn _h.map((h, i) => {\n\t\tconst _id = make_id();\n\t\tels[_id] = { cell: null, input: null };\n\t\treturn { id: _id, value: h ?? \"\" };\n\t});\n}\n\nexport function process_data(\n\tvalues: CellValue[][],\n\tels: Record<\n\t\tstring,\n\t\t{ cell: null | HTMLTableCellElement; input: null | HTMLTextAreaElement }\n\t>,\n\tdata_binding: Record<string, any>,\n\tmake_id: () => string,\n\tdisplay_value: string[][] | null = null,\n\tdatatype: Datatype | Datatype[]\n): { id: string; value: CellValue; display_value?: string }[][] {\n\tif (!values || values.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst result = values.map((row, i) => {\n\t\treturn row.map((value, j) => {\n\t\t\tconst _id = make_id();\n\t\t\tels[_id] = { cell: null, input: null };\n\t\t\tdata_binding[_id] = value;\n\n\t\t\tlet display = display_value?.[i]?.[j];\n\n\t\t\tif (display === undefined) {\n\t\t\t\tdisplay = String(value);\n\t\t\t}\n\n\t\t\tconst dtype = Array.isArray(datatype) ? datatype[j] : datatype;\n\n\t\t\treturn {\n\t\t\t\tid: _id,\n\t\t\t\tvalue: cast_value_to_type(value, dtype),\n\t\t\t\tdisplay_value: display\n\t\t\t};\n\t\t});\n\t});\n\n\treturn result;\n}\n","import { dequal } from \"dequal/lite\";\nimport { handle_delete_key } from \"../utils/selection_utils\";\nimport type { DataFrameContext } from \"../context/dataframe_context\";\nimport { tick } from \"svelte\";\nimport { get } from \"svelte/store\";\nimport { copy_table_data } from \"./table_utils\";\n\nasync function save_cell_value(\n\tinput_value: string,\n\tctx: DataFrameContext,\n\trow: number,\n\tcol: number\n): Promise<void> {\n\tif (!ctx.data || !ctx.data[row] || !ctx.data[row][col]) return;\n\n\tconst old_value = ctx.data[row][col].value;\n\tctx.data[row][col].value = input_value;\n\tif (ctx.data[row][col].display_value !== undefined) {\n\t\tctx.data[row][col].display_value = input_value;\n\t}\n\n\tif (old_value !== input_value && ctx.dispatch) {\n\t\tctx.dispatch(\"change\", {\n\t\t\tdata: ctx.data.map((row) => row.map((cell) => cell.value)),\n\t\t\theaders: ctx.headers?.map((h) => h.value) || [],\n\t\t\tmetadata: null\n\t\t});\n\t}\n\n\tctx.actions.set_selected([row, col]);\n}\n\nexport async function handle_cell_blur(\n\tevent: FocusEvent,\n\tctx: DataFrameContext,\n\tcoords: [number, number]\n): Promise<void> {\n\tif (!ctx.data || !ctx.headers || !ctx.els) return;\n\n\tconst input_el = event.target as HTMLInputElement;\n\tif (!input_el || input_el.value === undefined) return;\n\n\tawait save_cell_value(input_el.value, ctx, coords[0], coords[1]);\n}\n\nfunction handle_header_navigation(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext\n): boolean {\n\tconst state = get(ctx.state);\n\tconst selected_header = state.ui_state.selected_header;\n\tconst header_edit = state.ui_state.header_edit;\n\tconst headers = ctx.headers || [];\n\n\tif (selected_header === false || header_edit !== false) return false;\n\n\tswitch (event.key) {\n\t\tcase \"ArrowDown\":\n\t\t\tctx.actions.set_selected_header(false);\n\t\t\tctx.actions.set_selected([0, selected_header as number]);\n\t\t\tctx.actions.set_selected_cells([[0, selected_header as number]]);\n\t\t\treturn true;\n\t\tcase \"ArrowLeft\":\n\t\t\tctx.actions.set_selected_header(\n\t\t\t\tselected_header > 0 ? selected_header - 1 : selected_header\n\t\t\t);\n\t\t\treturn true;\n\t\tcase \"ArrowRight\":\n\t\t\tctx.actions.set_selected_header(\n\t\t\t\tselected_header < headers.length - 1\n\t\t\t\t\t? selected_header + 1\n\t\t\t\t\t: selected_header\n\t\t\t);\n\t\t\treturn true;\n\t\tcase \"Escape\":\n\t\t\tevent.preventDefault();\n\t\t\tctx.actions.set_selected_header(false);\n\t\t\treturn true;\n\t\tcase \"Enter\":\n\t\t\tevent.preventDefault();\n\t\t\tif (state.config.editable) {\n\t\t\t\tctx.actions.set_header_edit(selected_header);\n\t\t\t}\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\n// eslint-disable-next-line complexity\nfunction handle_delete_operation(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext\n): boolean {\n\tif (!ctx.data || !ctx.headers || !ctx.els || !ctx.dispatch) return false;\n\n\tconst state = get(ctx.state);\n\tif (!state.config.editable) return false;\n\tif (event.key !== \"Delete\" && event.key !== \"Backspace\") return false;\n\n\tconst editing = state.ui_state.editing;\n\tconst selected_cells = state.ui_state.selected_cells;\n\n\tconst static_columns = state.config.static_columns || [];\n\tif (selected_cells.some(([_, col]) => static_columns.includes(col))) {\n\t\treturn false;\n\t}\n\n\tif (editing) {\n\t\tconst [row, col] = editing;\n\t\tconst input_el = ctx.els[ctx.data[row][col].id]?.input;\n\t\tif (input_el && input_el.selectionStart !== input_el.selectionEnd) {\n\t\t\treturn false;\n\t\t}\n\t\tif (\n\t\t\tevent.key === \"Delete\" &&\n\t\t\tinput_el?.selectionStart !== input_el?.value.length\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\tif (event.key === \"Backspace\" && input_el?.selectionStart !== 0) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tevent.preventDefault();\n\tif (selected_cells.length > 0) {\n\t\tconst new_data = handle_delete_key(ctx.data, selected_cells);\n\t\tctx.dispatch(\"change\", {\n\t\t\tdata: new_data.map((row) => row.map((cell) => cell.value)),\n\t\t\theaders: ctx.headers.map((h) => h.value),\n\t\t\tmetadata: null\n\t\t});\n\t}\n\treturn true;\n}\n\nfunction handle_arrow_keys(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext,\n\ti: number,\n\tj: number\n): boolean {\n\tconst state = get(ctx.state);\n\tconst editing = state.ui_state.editing;\n\tconst selected_cells = state.ui_state.selected_cells;\n\n\tif (editing) return false;\n\tif (!ctx.data) return false;\n\n\tevent.preventDefault();\n\n\tconst next_coords = ctx.actions.move_cursor(event, [i, j], ctx.data);\n\tif (next_coords) {\n\t\tif (event.shiftKey) {\n\t\t\tctx.actions.set_selected_cells(\n\t\t\t\tctx.actions.get_range_selection(\n\t\t\t\t\tselected_cells.length > 0 ? selected_cells[0] : [i, j],\n\t\t\t\t\tnext_coords\n\t\t\t\t)\n\t\t\t);\n\t\t\tctx.actions.set_editing(false);\n\t\t} else {\n\t\t\tctx.actions.set_selected_cells([next_coords]);\n\t\t\tctx.actions.set_editing(false);\n\t\t}\n\t\tctx.actions.set_selected(next_coords);\n\t} else if (next_coords === false && event.key === \"ArrowUp\" && i === 0) {\n\t\tctx.actions.set_selected_header(j);\n\t\tctx.actions.set_selected(false);\n\t\tctx.actions.set_selected_cells([]);\n\t\tctx.actions.set_editing(false);\n\t}\n\treturn true;\n}\n\nasync function handle_enter_key(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext,\n\ti: number,\n\tj: number\n): Promise<boolean> {\n\tif (!ctx.data || !ctx.els) return false;\n\n\tconst state = get(ctx.state);\n\tif (!state.config.editable) return false;\n\n\tconst editing = state.ui_state.editing;\n\tif (editing && event.shiftKey) return false;\n\n\tevent.preventDefault();\n\n\tif (editing && dequal(editing, [i, j])) {\n\t\tconst cell_id = ctx.data[i][j].id;\n\t\tconst input_el = ctx.els[cell_id]?.input;\n\t\tif (input_el) {\n\t\t\tawait save_cell_value(input_el.value, ctx, i, j);\n\t\t}\n\t\tctx.actions.set_editing(false);\n\t\tawait tick();\n\t\tctx.parent_element?.focus();\n\t} else {\n\t\tctx.actions.set_editing([i, j]);\n\t}\n\n\treturn true;\n}\n\nfunction handle_tab_key(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext,\n\ti: number,\n\tj: number\n): boolean {\n\tif (!ctx.data) return false;\n\n\tevent.preventDefault();\n\tctx.actions.set_editing(false);\n\tconst next_cell = ctx.actions.get_next_cell_coordinates(\n\t\t[i, j],\n\t\tctx.data,\n\t\tevent.shiftKey\n\t);\n\tif (next_cell) {\n\t\tctx.actions.set_selected_cells([next_cell]);\n\t\tctx.actions.set_selected(next_cell);\n\t\tif (get(ctx.state).config.editable) {\n\t\t\tctx.actions.set_editing(next_cell);\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction handle_default_key(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext,\n\ti: number,\n\tj: number\n): boolean {\n\tconst state = get(ctx.state);\n\tif (!state.config.editable) return false;\n\n\tconst editing = state.ui_state.editing;\n\n\tif (event.key.length === 1 && (!editing || !dequal(editing, [i, j]))) {\n\t\tctx.actions.set_editing([i, j]);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nasync function handle_cell_navigation(\n\tevent: KeyboardEvent,\n\tctx: DataFrameContext\n): Promise<boolean> {\n\tif (!ctx.data) return false;\n\n\tconst state = get(ctx.state);\n\tconst selected = state.ui_state.selected;\n\tconst selected_cells = state.ui_state.selected_cells;\n\n\tif (!selected) return false;\n\tif (event.key === \"c\" && (event.metaKey || event.ctrlKey)) {\n\t\tevent.preventDefault();\n\t\tif (selected_cells.length > 0) {\n\t\t\tawait copy_table_data(ctx.data, selected_cells);\n\t\t}\n\t\tctx.actions.set_copy_flash(true);\n\t\treturn true;\n\t}\n\n\tconst [i, j] = selected;\n\n\tswitch (event.key) {\n\t\tcase \"ArrowRight\":\n\t\tcase \"ArrowLeft\":\n\t\tcase \"ArrowDown\":\n\t\tcase \"ArrowUp\":\n\t\t\treturn handle_arrow_keys(event, ctx, i, j);\n\t\tcase \"Escape\":\n\t\t\tif (!state.config.editable) return false;\n\t\t\tevent.preventDefault();\n\t\t\tctx.actions.set_editing(false);\n\t\t\ttick().then(() => {\n\t\t\t\tif (ctx.parent_element) {\n\t\t\t\t\tctx.parent_element.focus();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn true;\n\t\tcase \"Enter\":\n\t\t\treturn await handle_enter_key(event, ctx, i, j);\n\t\tcase \"Tab\":\n\t\t\treturn handle_tab_key(event, ctx, i, j);\n\t\tcase \"Delete\":\n\t\tcase \"Backspace\":\n\t\t\treturn handle_delete_operation(event, ctx);\n\t\tdefault:\n\t\t\treturn handle_default_key(event, ctx, i, j);\n\t}\n}\n\nexport async function handle_keydown(\n\tevent: KeyboardEvent,\n\tcontext: DataFrameContext\n): Promise<void> {\n\tif (handle_header_navigation(event, context)) return;\n\tif (handle_delete_operation(event, context)) return;\n\tawait handle_cell_navigation(event, context);\n}\n","import type { CellCoordinate } from \"../types\";\nimport { get_range_selection } from \"../utils/selection_utils\";\n\nexport type DragState = {\n\tis_dragging: boolean;\n\tdrag_start: CellCoordinate | null;\n\tmouse_down_pos: { x: number; y: number } | null;\n};\n\nexport type DragHandlers = {\n\thandle_mouse_down: (event: MouseEvent, row: number, col: number) => void;\n\thandle_mouse_move: (event: MouseEvent) => void;\n\thandle_mouse_up: (event: MouseEvent) => void;\n};\n\nexport function create_drag_handlers(\n\tstate: DragState,\n\tset_is_dragging: (value: boolean) => void,\n\tset_selected_cells: (cells: CellCoordinate[]) => void,\n\tset_selected: (cell: CellCoordinate | false) => void,\n\thandle_cell_click: (event: MouseEvent, row: number, col: number) => void,\n\tshow_row_numbers: boolean,\n\tparent_element?: HTMLElement\n): DragHandlers {\n\tconst start_drag = (event: MouseEvent, row: number, col: number): void => {\n\t\tconst target = event.target as HTMLElement;\n\t\tconst is_checkbox_click =\n\t\t\t(target as HTMLInputElement).type === \"checkbox\" ||\n\t\t\ttarget.closest('input[type=\"checkbox\"]') ||\n\t\t\ttarget.closest(\".bool-cell\");\n\n\t\tif (\n\t\t\tevent.target instanceof HTMLAnchorElement ||\n\t\t\t(show_row_numbers && col === -1) ||\n\t\t\tis_checkbox_click\n\t\t)\n\t\t\treturn;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tstate.mouse_down_pos = { x: event.clientX, y: event.clientY };\n\t\tstate.drag_start = [row, col];\n\n\t\tif (!event.shiftKey && !event.metaKey && !event.ctrlKey) {\n\t\t\tset_selected_cells([[row, col]]);\n\t\t\tset_selected([row, col]);\n\t\t\thandle_cell_click(event, row, col);\n\t\t}\n\t};\n\n\tconst update_selection = (event: MouseEvent): void => {\n\t\tconst cell = (event.target as HTMLElement).closest(\"td\");\n\t\tif (!cell) return;\n\n\t\tconst row = parseInt(cell.getAttribute(\"data-row\") || \"0\");\n\t\tconst col = parseInt(cell.getAttribute(\"data-col\") || \"0\");\n\n\t\tif (isNaN(row) || isNaN(col)) return;\n\n\t\tconst selection_range = get_range_selection(state.drag_start!, [row, col]);\n\t\tset_selected_cells(selection_range);\n\t\tset_selected([row, col]);\n\t};\n\n\tconst end_drag = (event: MouseEvent): void => {\n\t\tif (!state.is_dragging && state.drag_start) {\n\t\t\thandle_cell_click(event, state.drag_start[0], state.drag_start[1]);\n\t\t} else if (state.is_dragging && parent_element) {\n\t\t\tparent_element.focus();\n\t\t}\n\n\t\tstate.is_dragging = false;\n\t\tset_is_dragging(false);\n\t\tstate.drag_start = null;\n\t\tstate.mouse_down_pos = null;\n\t};\n\n\treturn {\n\t\thandle_mouse_down: start_drag,\n\n\t\thandle_mouse_move(event: MouseEvent): void {\n\t\t\tif (!state.drag_start || !state.mouse_down_pos) return;\n\n\t\t\tif (!(event.buttons & 1)) {\n\t\t\t\tend_drag(event);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst dx = Math.abs(event.clientX - state.mouse_down_pos.x);\n\t\t\tconst dy = Math.abs(event.clientY - state.mouse_down_pos.y);\n\n\t\t\tif (!state.is_dragging && (dx > 3 || dy > 3)) {\n\t\t\t\tstate.is_dragging = true;\n\t\t\t\tset_is_dragging(true);\n\t\t\t}\n\n\t\t\tif (state.is_dragging) {\n\t\t\t\tupdate_selection(event);\n\t\t\t}\n\t\t},\n\n\t\thandle_mouse_up: end_drag\n\t};\n}\n","<script lang=\"ts\" context=\"module\">\n\timport {\n\t\tcreate_dataframe_context,\n\t\ttype SortDirection,\n\t\ttype FilterDatatype\n\t} from \"./context/dataframe_context\";\n</script>\n\n<script lang=\"ts\">\n\timport { afterUpdate, createEventDispatcher, tick, onMount } from \"svelte\";\n\timport { dequal } from \"dequal/lite\";\n\timport { Upload } from \"@gradio/upload\";\n\n\timport EditableCell from \"./EditableCell.svelte\";\n\timport RowNumber from \"./RowNumber.svelte\";\n\timport TableHeader from \"./TableHeader.svelte\";\n\timport TableCell from \"./TableCell.svelte\";\n\timport EmptyRowButton from \"./EmptyRowButton.svelte\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport type { I18nFormatter } from \"js/core/src/gradio_helper\";\n\timport { type Client } from \"@gradio/client\";\n\timport VirtualTable from \"./VirtualTable.svelte\";\n\timport type {\n\t\tHeaders,\n\t\tDataframeValue,\n\t\tDatatype,\n\t\tEditData\n\t} from \"./utils/utils\";\n\timport CellMenu from \"./CellMenu.svelte\";\n\timport Toolbar from \"./Toolbar.svelte\";\n\timport type { CellCoordinate, CellValue } from \"./types\";\n\timport {\n\t\tis_cell_selected,\n\t\tshould_show_cell_menu,\n\t\tget_current_indices,\n\t\thandle_click_outside as handle_click_outside_util,\n\t\tcalculate_selection_positions\n\t} from \"./utils/selection_utils\";\n\timport {\n\t\tcopy_table_data,\n\t\tget_max,\n\t\thandle_file_upload\n\t} from \"./utils/table_utils\";\n\timport { make_headers, process_data } from \"./utils/data_processing\";\n\timport { handle_keydown, handle_cell_blur } from \"./utils/keyboard_utils\";\n\timport {\n\t\tcreate_drag_handlers,\n\t\ttype DragState,\n\t\ttype DragHandlers\n\t} from \"./utils/drag_utils\";\n\timport { sort_data_and_preserve_selection } from \"./utils/sort_utils\";\n\timport { filter_data_and_preserve_selection } from \"./utils/filter_utils\";\n\n\texport let datatype: Datatype | Datatype[];\n\texport let label: string | null = null;\n\texport let show_label = true;\n\texport let headers: Headers = [];\n\texport let values: CellValue[][] = [];\n\texport let col_count: [number, \"fixed\" | \"dynamic\"];\n\texport let row_count: [number, \"fixed\" | \"dynamic\"];\n\texport let latex_delimiters: {\n\t\tleft: string;\n\t\tright: string;\n\t\tdisplay: boolean;\n\t}[];\n\texport let components: Record<string, any> = {};\n\n\texport let editable = true;\n\texport let wrap = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\n\texport let max_height = 500;\n\texport let line_breaks = true;\n\texport let column_widths: string[] = [];\n\texport let show_row_numbers = false;\n\texport let upload: Client[\"upload\"];\n\texport let stream_handler: Client[\"stream\"];\n\texport let show_fullscreen_button = false;\n\texport let show_copy_button = false;\n\texport let value_is_output = false;\n\texport let max_chars: number | undefined = undefined;\n\texport let show_search: \"none\" | \"search\" | \"filter\" = \"none\";\n\texport let pinned_columns = 0;\n\texport let static_columns: (string | number)[] = [];\n\texport let fullscreen = false;\n\n\tconst df_ctx = create_dataframe_context({\n\t\tshow_fullscreen_button,\n\t\tshow_copy_button,\n\t\tshow_search,\n\t\tshow_row_numbers,\n\t\teditable,\n\t\tpinned_columns,\n\t\tshow_label,\n\t\tline_breaks,\n\t\twrap,\n\t\tmax_height,\n\t\tcolumn_widths,\n\t\tmax_chars,\n\t\tstatic_columns\n\t});\n\n\tconst { state: df_state, actions: df_actions } = df_ctx;\n\n\t$: selected_cells = $df_state.ui_state.selected_cells;\n\t$: selected = $df_state.ui_state.selected;\n\t$: editing = $df_state.ui_state.editing;\n\t$: header_edit = $df_state.ui_state.header_edit;\n\t$: selected_header = $df_state.ui_state.selected_header;\n\t$: active_cell_menu = $df_state.ui_state.active_cell_menu;\n\t$: active_header_menu = $df_state.ui_state.active_header_menu;\n\t$: copy_flash = $df_state.ui_state.copy_flash;\n\n\t$: actual_pinned_columns =\n\t\tpinned_columns && data?.[0]?.length\n\t\t\t? Math.min(pinned_columns, data[0].length)\n\t\t\t: 0;\n\n\tonMount(() => {\n\t\tdf_ctx.parent_element = parent;\n\t\tdf_ctx.get_data_at = get_data_at;\n\t\tdf_ctx.get_column = get_column;\n\t\tdf_ctx.get_row = get_row;\n\t\tdf_ctx.dispatch = dispatch;\n\t\tinit_drag_handlers();\n\n\t\tconst observer = new IntersectionObserver((entries) => {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (entry.isIntersecting && !is_visible) {\n\t\t\t\t\twidth_calculated = false;\n\t\t\t\t}\n\t\t\t\tis_visible = entry.isIntersecting;\n\t\t\t});\n\t\t});\n\t\tobserver.observe(parent);\n\t\tdocument.addEventListener(\"click\", handle_click_outside);\n\t\twindow.addEventListener(\"resize\", handle_resize);\n\n\t\tconst global_mouse_up = (event: MouseEvent): void => {\n\t\t\tif (is_dragging || drag_start) {\n\t\t\t\thandle_mouse_up(event);\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener(\"mouseup\", global_mouse_up);\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t\tdocument.removeEventListener(\"click\", handle_click_outside);\n\t\t\twindow.removeEventListener(\"resize\", handle_resize);\n\t\t\tdocument.removeEventListener(\"mouseup\", global_mouse_up);\n\t\t};\n\t});\n\n\t$: {\n\t\tif (data || _headers || els) {\n\t\t\tdf_ctx.data = data;\n\t\t\tdf_ctx.headers = _headers;\n\t\t\tdf_ctx.els = els;\n\t\t\tdf_ctx.display_value = display_value;\n\t\t\tdf_ctx.styling = styling;\n\t\t}\n\t}\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: DataframeValue;\n\t\tinput: undefined;\n\t\tselect: SelectData;\n\t\tsearch: string | null;\n\t\tedit: EditData;\n\t}>();\n\n\tlet els: Record<\n\t\tstring,\n\t\t{ cell: null | HTMLTableCellElement; input: null | HTMLTextAreaElement }\n\t> = {};\n\tlet data_binding: Record<string, (typeof data)[0][0]> = {};\n\tlet _headers = make_headers(headers, col_count, els, make_id);\n\tlet old_headers: string[] = headers;\n\tlet data: { id: string; value: CellValue; display_value?: string }[][] = [[]];\n\tlet old_val: undefined | CellValue[][] = undefined;\n\tlet search_results: {\n\t\tid: string;\n\t\tvalue: CellValue;\n\t\tdisplay_value?: string;\n\t\tstyling?: string;\n\t}[][] = [[]];\n\tlet dragging = false;\n\tlet color_accent_copied: string;\n\tlet filtered_to_original_map: number[] = [];\n\n\tonMount(() => {\n\t\tconst color = getComputedStyle(document.documentElement)\n\t\t\t.getPropertyValue(\"--color-accent\")\n\t\t\t.trim();\n\t\tcolor_accent_copied = color + \"40\"; // 80 is 50% opacity in hex\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--color-accent-copied\",\n\t\t\tcolor_accent_copied\n\t\t);\n\t});\n\n\tconst get_data_at = (row: number, col: number): CellValue =>\n\t\tdata?.[row]?.[col]?.value;\n\n\tconst get_column = (col: number): CellValue[] =>\n\t\tdata?.map((row) => row[col]?.value) ?? [];\n\n\tconst get_row = (row: number): CellValue[] =>\n\t\tdata?.[row]?.map((cell) => cell.value) ?? [];\n\n\t$: {\n\t\tif (!dequal(headers, old_headers)) {\n\t\t\t_headers = make_headers(headers, col_count, els, make_id);\n\t\t\told_headers = JSON.parse(JSON.stringify(headers));\n\t\t}\n\t}\n\n\tfunction make_id(): string {\n\t\treturn Math.random().toString(36).substring(2, 15);\n\t}\n\n\texport let display_value: string[][] | null = null;\n\texport let styling: string[][] | null = null;\n\n\t$: if (!dequal(values, old_val)) {\n\t\tif (parent) {\n\t\t\t// only clear column widths when the data structure changes\n\t\t\tconst is_reset =\n\t\t\t\tvalues.length === 0 || (values.length === 1 && values[0].length === 0);\n\t\t\tconst is_different_structure =\n\t\t\t\told_val !== undefined &&\n\t\t\t\t(values.length !== old_val.length ||\n\t\t\t\t\t(values[0] && old_val[0] && values[0].length !== old_val[0].length));\n\n\t\t\tif (is_reset || is_different_structure) {\n\t\t\t\tfor (let i = 0; i < 50; i++) {\n\t\t\t\t\tparent.style.removeProperty(`--cell-width-${i}`);\n\t\t\t\t}\n\t\t\t\tlast_width_data_length = 0;\n\t\t\t\tlast_width_column_count = 0;\n\t\t\t\twidth_calculated = false;\n\t\t\t}\n\t\t}\n\n\t\t// only reset sort state when values are changed\n\t\tconst is_reset =\n\t\t\tvalues.length === 0 || (values.length === 1 && values[0].length === 0);\n\t\tconst is_different_structure =\n\t\t\told_val !== undefined &&\n\t\t\t(values.length !== old_val.length ||\n\t\t\t\t(values[0] && old_val[0] && values[0].length !== old_val[0].length));\n\n\t\tdata = process_data(\n\t\t\tvalues as CellValue[][],\n\t\t\tels,\n\t\t\tdata_binding,\n\t\t\tmake_id,\n\t\t\tdisplay_value,\n\t\t\tdatatype\n\t\t);\n\t\told_val = JSON.parse(JSON.stringify(values)) as CellValue[][];\n\n\t\tif (is_reset || is_different_structure) {\n\t\t\tdf_actions.reset_sort_state();\n\t\t} else if ($df_state.sort_state.sort_columns.length > 0) {\n\t\t\tsort_data(data, display_value, styling);\n\t\t} else {\n\t\t\tdf_actions.handle_sort(-1, \"asc\");\n\t\t\tdf_actions.reset_sort_state();\n\t\t}\n\n\t\tif ($df_state.filter_state.filter_columns.length > 0) {\n\t\t\tfilter_data(data, display_value, styling);\n\t\t} else {\n\t\t\tdf_actions.reset_filter_state();\n\t\t}\n\n\t\tif ($df_state.current_search_query) {\n\t\t\tdf_actions.handle_search(null);\n\t\t}\n\n\t\tif (parent && cells.length > 0 && (is_reset || is_different_structure)) {\n\t\t\twidth_calculated = false;\n\t\t}\n\t}\n\n\t$: if ($df_state.current_search_query !== undefined) {\n\t\tconst cell_map = new Map();\n\t\tfiltered_to_original_map = [];\n\n\t\tdata.forEach((row, row_idx) => {\n\t\t\tif (\n\t\t\t\trow.some((cell) =>\n\t\t\t\t\tString(cell?.value)\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes($df_state.current_search_query?.toLowerCase() || \"\")\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tfiltered_to_original_map.push(row_idx);\n\t\t\t}\n\t\t\trow.forEach((cell, col_idx) => {\n\t\t\t\tcell_map.set(cell.id, {\n\t\t\t\t\tvalue: cell.value,\n\t\t\t\t\tdisplay_value:\n\t\t\t\t\t\tcell.display_value !== undefined\n\t\t\t\t\t\t\t? cell.display_value\n\t\t\t\t\t\t\t: String(cell.value),\n\t\t\t\t\tstyling: styling?.[row_idx]?.[col_idx] || \"\"\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tconst filtered = df_actions.filter_data(data);\n\n\t\tsearch_results = filtered.map((row) =>\n\t\t\trow.map((cell) => {\n\t\t\t\tconst original = cell_map.get(cell.id);\n\t\t\t\treturn {\n\t\t\t\t\t...cell,\n\t\t\t\t\tdisplay_value:\n\t\t\t\t\t\toriginal?.display_value !== undefined\n\t\t\t\t\t\t\t? original.display_value\n\t\t\t\t\t\t\t: String(cell.value),\n\t\t\t\t\tstyling: original?.styling || \"\"\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t} else {\n\t\tfiltered_to_original_map = [];\n\t}\n\n\tlet previous_headers = _headers.map((h) => h.value);\n\tlet previous_data = data.map((row) => row.map((cell) => cell.value));\n\n\t$: {\n\t\tif (data || _headers) {\n\t\t\tdf_actions.trigger_change(\n\t\t\t\tdata,\n\t\t\t\t_headers,\n\t\t\t\tprevious_data,\n\t\t\t\tprevious_headers,\n\t\t\t\tvalue_is_output,\n\t\t\t\tdispatch\n\t\t\t);\n\t\t\tprevious_data = data.map((row) => row.map((cell) => cell.value));\n\t\t\tprevious_headers = _headers.map((h) => h.value);\n\t\t}\n\t}\n\n\tfunction handle_sort(col: number, direction: SortDirection): void {\n\t\tdf_actions.handle_sort(col, direction);\n\t\tsort_data(data, display_value, styling);\n\t}\n\n\tfunction clear_sort(): void {\n\t\tdf_actions.reset_sort_state();\n\t\tsort_data(data, display_value, styling);\n\t}\n\n\t$: {\n\t\tif ($df_state.filter_state.filter_columns.length > 0) {\n\t\t\tfilter_data(data, display_value, styling);\n\t\t}\n\n\t\tif ($df_state.sort_state.sort_columns.length > 0) {\n\t\t\tsort_data(data, display_value, styling);\n\t\t\tdf_actions.update_row_order(data);\n\t\t}\n\t}\n\n\tfunction handle_filter(\n\t\tcol: number,\n\t\tdatatype: FilterDatatype,\n\t\tfilter: string,\n\t\tvalue: string\n\t): void {\n\t\tdf_actions.handle_filter(col, datatype, filter, value);\n\t\tfilter_data(data, display_value, styling);\n\t}\n\n\tfunction clear_filter(): void {\n\t\tdf_actions.reset_filter_state();\n\t\tfilter_data(data, display_value, styling);\n\t}\n\n\tasync function edit_header(i: number, _select = false): Promise<void> {\n\t\tif (!editable || header_edit === i || col_count[1] !== \"dynamic\") return;\n\t\tdf_actions.set_header_edit(i);\n\t}\n\n\tfunction handle_header_click(event: MouseEvent, col: number): void {\n\t\tif (event.target instanceof HTMLAnchorElement) {\n\t\t\treturn;\n\t\t}\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (!editable) return;\n\t\tdf_actions.set_editing(false);\n\t\tdf_actions.handle_header_click(col, editable);\n\t\tparent.focus();\n\t}\n\n\tfunction end_header_edit(event: CustomEvent<KeyboardEvent>): void {\n\t\tif (!editable) return;\n\t\tdf_actions.end_header_edit(event.detail.key);\n\t\tparent.focus();\n\t}\n\n\tasync function add_row(index?: number): Promise<void> {\n\t\tparent.focus();\n\n\t\tif (row_count[1] !== \"dynamic\") return;\n\n\t\tconst new_row = Array(data[0]?.length || headers.length)\n\t\t\t.fill(0)\n\t\t\t.map((_, i) => {\n\t\t\t\tconst _id = make_id();\n\t\t\t\tels[_id] = { cell: null, input: null };\n\t\t\t\treturn { id: _id, value: \"\" };\n\t\t\t});\n\n\t\tif (data.length === 0) {\n\t\t\tdata = [new_row];\n\t\t} else if (index !== undefined && index >= 0 && index <= data.length) {\n\t\t\tdata.splice(index, 0, new_row);\n\t\t} else {\n\t\t\tdata.push(new_row);\n\t\t}\n\n\t\tselected = [index !== undefined ? index : data.length - 1, 0];\n\t}\n\n\tasync function add_col(index?: number): Promise<void> {\n\t\tparent.focus();\n\t\tif (col_count[1] !== \"dynamic\") return;\n\n\t\tconst result = df_actions.add_col(data, headers, make_id, index);\n\n\t\tresult.data.forEach((row) => {\n\t\t\trow.forEach((cell) => {\n\t\t\t\tif (!els[cell.id]) {\n\t\t\t\t\tels[cell.id] = { cell: null, input: null };\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tdata = result.data;\n\t\theaders = result.headers;\n\n\t\tawait tick();\n\n\t\trequestAnimationFrame(() => {\n\t\t\tedit_header(index !== undefined ? index : data[0].length - 1, true);\n\t\t\tconst new_w = parent.querySelectorAll(\"tbody\")[1].offsetWidth;\n\t\t\tparent.querySelectorAll(\"table\")[1].scrollTo({ left: new_w });\n\t\t});\n\t}\n\n\tfunction handle_click_outside(event: Event): void {\n\t\tif (handle_click_outside_util(event, parent)) {\n\t\t\tdf_actions.clear_ui_state();\n\t\t\theader_edit = false;\n\t\t\tselected_header = false;\n\t\t}\n\t}\n\n\t$: max = get_max(data);\n\n\tlet width_calc_timeout: ReturnType<typeof setTimeout>;\n\t$: if (cells[0] && cells[0]?.clientWidth) {\n\t\tclearTimeout(width_calc_timeout);\n\t\twidth_calc_timeout = setTimeout(() => set_cell_widths(), 100);\n\t}\n\n\tlet width_calculated = false;\n\t$: if (cells[0] && !width_calculated) {\n\t\tset_cell_widths();\n\t\twidth_calculated = true;\n\t}\n\tlet cells: HTMLTableCellElement[] = [];\n\tlet parent: HTMLDivElement;\n\tlet table: HTMLTableElement;\n\tlet last_width_data_length = 0;\n\tlet last_width_column_count = 0;\n\n\tfunction set_cell_widths(): void {\n\t\tconst column_count = data[0]?.length || 0;\n\t\tif ($df_state.filter_state.filter_columns.length > 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tlast_width_data_length === data.length &&\n\t\t\tlast_width_column_count === column_count &&\n\t\t\t$df_state.sort_state.sort_columns.length > 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!parent) {\n\t\t\treturn;\n\t\t}\n\n\t\tlast_width_data_length = data.length;\n\t\tlast_width_column_count = column_count;\n\n\t\tconst widths = cells.map((el) => el?.clientWidth || 0);\n\t\tif (widths.length === 0) return;\n\n\t\tif (show_row_numbers) {\n\t\t\tparent.style.setProperty(`--cell-width-row-number`, `${widths[0]}px`);\n\t\t}\n\n\t\tfor (let i = 0; i < 50; i++) {\n\t\t\tif (!column_widths[i]) {\n\t\t\t\tparent.style.removeProperty(`--cell-width-${i}`);\n\t\t\t} else if (column_widths[i].endsWith(\"%\")) {\n\t\t\t\tconst percentage = parseFloat(column_widths[i]);\n\t\t\t\tconst pixel_width = Math.floor((percentage / 100) * parent.clientWidth);\n\t\t\t\tparent.style.setProperty(`--cell-width-${i}`, `${pixel_width}px`);\n\t\t\t} else {\n\t\t\t\tparent.style.setProperty(`--cell-width-${i}`, column_widths[i]);\n\t\t\t}\n\t\t}\n\n\t\twidths.forEach((width, i) => {\n\t\t\tif (!column_widths[i]) {\n\t\t\t\tconst calculated_width = `${Math.max(width, 45)}px`;\n\t\t\t\tparent.style.setProperty(`--cell-width-${i}`, calculated_width);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction get_cell_width(index: number): string {\n\t\treturn `var(--cell-width-${index})`;\n\t}\n\n\tlet table_height: number =\n\t\tvalues.slice(0, (max_height / values.length) * 37).length * 37 + 37;\n\tlet scrollbar_width = 0;\n\n\tfunction sort_data(\n\t\t_data: typeof data,\n\t\t_display_value: string[][] | null,\n\t\t_styling: string[][] | null\n\t): void {\n\t\tconst result = sort_data_and_preserve_selection(\n\t\t\t_data,\n\t\t\t_display_value,\n\t\t\t_styling,\n\t\t\t$df_state.sort_state.sort_columns,\n\t\t\tselected,\n\t\t\tget_current_indices\n\t\t);\n\n\t\tdata = result.data;\n\t\tselected = result.selected;\n\t}\n\n\tfunction filter_data(\n\t\t_data: typeof data,\n\t\t_display_value: string[][] | null,\n\t\t_styling: string[][] | null\n\t): void {\n\t\tconst result = filter_data_and_preserve_selection(\n\t\t\t_data,\n\t\t\t_display_value,\n\t\t\t_styling,\n\t\t\t$df_state.filter_state.filter_columns,\n\t\t\tselected,\n\t\t\tget_current_indices,\n\t\t\t$df_state.filter_state.initial_data?.data,\n\t\t\t$df_state.filter_state.initial_data?.display_value,\n\t\t\t$df_state.filter_state.initial_data?.styling\n\t\t);\n\t\tdata = result.data;\n\t\tselected = result.selected;\n\t}\n\n\t$: selected_index = !!selected && selected[0];\n\n\tlet is_visible = false;\n\n\tconst set_copy_flash = (value: boolean): void => {\n\t\tdf_actions.set_copy_flash(value);\n\t\tif (value) {\n\t\t\tsetTimeout(() => df_actions.set_copy_flash(false), 800);\n\t\t}\n\t};\n\n\tlet previous_selected_cells: [number, number][] = [];\n\n\t$: {\n\t\tif (copy_flash && !dequal(selected_cells, previous_selected_cells)) {\n\t\t\tset_copy_flash(false);\n\t\t}\n\t\tprevious_selected_cells = selected_cells;\n\t}\n\n\tfunction handle_blur(\n\t\tevent: CustomEvent<{\n\t\t\tblur_event: FocusEvent;\n\t\t\tcoords: [number, number];\n\t\t}>\n\t): void {\n\t\tconst { blur_event, coords } = event.detail;\n\t\thandle_cell_blur(blur_event, df_ctx, coords);\n\t}\n\n\tfunction toggle_header_menu(event: MouseEvent, col: number): void {\n\t\tevent.stopPropagation();\n\t\tif (active_header_menu && active_header_menu.col === col) {\n\t\t\tdf_actions.set_active_header_menu(null);\n\t\t} else {\n\t\t\tconst header = (event.target as HTMLElement).closest(\"th\");\n\t\t\tif (header) {\n\t\t\t\tconst rect = header.getBoundingClientRect();\n\t\t\t\tdf_actions.set_active_header_menu({\n\t\t\t\t\tcol,\n\t\t\t\t\tx: rect.right,\n\t\t\t\t\ty: rect.bottom\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tafterUpdate(() => {\n\t\tvalue_is_output = false;\n\t});\n\n\tfunction delete_col_at(index: number): void {\n\t\tif (col_count[1] !== \"dynamic\") return;\n\t\tif (data[0].length <= 1) return;\n\n\t\tconst result = df_actions.delete_col_at(data, headers, index);\n\t\tdata = result.data;\n\t\theaders = result.headers;\n\t\t_headers = make_headers(headers, col_count, els, make_id);\n\t\tdf_actions.set_active_cell_menu(null);\n\t\tdf_actions.set_active_header_menu(null);\n\t\tdf_actions.set_selected(false);\n\t\tdf_actions.set_selected_cells([]);\n\t\tdf_actions.set_editing(false);\n\t}\n\n\tfunction delete_row_at(index: number): void {\n\t\tdata = df_actions.delete_row_at(data, index);\n\t\tdf_actions.set_active_cell_menu(null);\n\t\tdf_actions.set_active_header_menu(null);\n\t}\n\n\tlet selected_cell_coords: CellCoordinate;\n\t$: if (selected !== false) selected_cell_coords = selected;\n\n\t$: if (selected !== false) {\n\t\tconst positions = calculate_selection_positions(\n\t\t\tselected,\n\t\t\tdata,\n\t\t\tels,\n\t\t\tparent,\n\t\t\ttable\n\t\t);\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--selected-col-pos\",\n\t\t\tpositions.col_pos\n\t\t);\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--selected-row-pos\",\n\t\t\tpositions.row_pos || \"0px\"\n\t\t);\n\t}\n\n\tfunction commit_filter(): void {\n\t\tif ($df_state.current_search_query && show_search === \"filter\") {\n\t\t\tconst filtered_data: CellValue[][] = [];\n\t\t\tconst filtered_display_values: string[][] = [];\n\t\t\tconst filtered_styling: string[][] = [];\n\n\t\t\tsearch_results.forEach((row) => {\n\t\t\t\tconst data_row: CellValue[] = [];\n\t\t\t\tconst display_row: string[] = [];\n\t\t\t\tconst styling_row: string[] = [];\n\n\t\t\t\trow.forEach((cell) => {\n\t\t\t\t\tdata_row.push(cell.value);\n\t\t\t\t\tdisplay_row.push(\n\t\t\t\t\t\tcell.display_value !== undefined\n\t\t\t\t\t\t\t? cell.display_value\n\t\t\t\t\t\t\t: String(cell.value)\n\t\t\t\t\t);\n\t\t\t\t\tstyling_row.push(cell.styling || \"\");\n\t\t\t\t});\n\n\t\t\t\tfiltered_data.push(data_row);\n\t\t\t\tfiltered_display_values.push(display_row);\n\t\t\t\tfiltered_styling.push(styling_row);\n\t\t\t});\n\n\t\t\tconst change_payload = {\n\t\t\t\tdata: filtered_data,\n\t\t\t\theaders: _headers.map((h) => h.value),\n\t\t\t\tmetadata: {\n\t\t\t\t\tdisplay_value: filtered_display_values,\n\t\t\t\t\tstyling: filtered_styling\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdispatch(\"change\", change_payload);\n\n\t\t\tif (!value_is_output) {\n\t\t\t\tdispatch(\"input\");\n\t\t\t}\n\n\t\t\tdf_actions.handle_search(null);\n\t\t}\n\t}\n\n\tlet viewport: HTMLTableElement;\n\tlet show_scroll_button = false;\n\n\tfunction scroll_to_top(): void {\n\t\tviewport.scrollTo({\n\t\t\ttop: 0\n\t\t});\n\t}\n\n\tfunction handle_resize(): void {\n\t\tdf_actions.set_active_cell_menu(null);\n\t\tdf_actions.set_active_header_menu(null);\n\t\tselected_cells = [];\n\t\tselected = false;\n\t\tediting = false;\n\t\twidth_calculated = false;\n\t\tset_cell_widths();\n\t}\n\n\tfunction add_row_at(index: number, position: \"above\" | \"below\"): void {\n\t\tconst row_index = position === \"above\" ? index : index + 1;\n\t\tadd_row(row_index);\n\t\tactive_cell_menu = null;\n\t\tactive_header_menu = null;\n\t}\n\n\tfunction add_col_at(index: number, position: \"left\" | \"right\"): void {\n\t\tconst col_index = position === \"left\" ? index : index + 1;\n\t\tadd_col(col_index);\n\t\tactive_cell_menu = null;\n\t\tactive_header_menu = null;\n\t}\n\n\texport function reset_sort_state(): void {\n\t\tdf_actions.reset_sort_state();\n\t}\n\n\tfunction handle_select_all(col: number, checked: boolean): void {\n\t\tdata = data.map((row) => {\n\t\t\tconst new_row = [...row];\n\t\t\tif (new_row[col]) {\n\t\t\t\tnew_row[col] = {\n\t\t\t\t\t...new_row[col],\n\t\t\t\t\tvalue: checked.toString()\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn new_row;\n\t\t});\n\t}\n\n\tlet is_dragging = false;\n\tlet drag_start: [number, number] | null = null;\n\tlet mouse_down_pos: { x: number; y: number } | null = null;\n\n\tconst drag_state: DragState = {\n\t\tis_dragging,\n\t\tdrag_start,\n\t\tmouse_down_pos\n\t};\n\n\t$: {\n\t\tis_dragging = drag_state.is_dragging;\n\t\tdrag_start = drag_state.drag_start;\n\t\tmouse_down_pos = drag_state.mouse_down_pos;\n\t}\n\n\tlet drag_handlers: DragHandlers;\n\n\tfunction init_drag_handlers(): void {\n\t\tdrag_handlers = create_drag_handlers(\n\t\t\tdrag_state,\n\t\t\t(value) => (is_dragging = value),\n\t\t\t(cells) => df_actions.set_selected_cells(cells),\n\t\t\t(cell) => df_actions.set_selected(cell),\n\t\t\t(event, row, col) => df_actions.handle_cell_click(event, row, col),\n\t\t\tshow_row_numbers,\n\t\t\tparent\n\t\t);\n\t}\n\n\t$: if (parent) init_drag_handlers();\n\n\t$: handle_mouse_down = drag_handlers?.handle_mouse_down || (() => {});\n\t$: handle_mouse_move = drag_handlers?.handle_mouse_move || (() => {});\n\t$: handle_mouse_up = drag_handlers?.handle_mouse_up || (() => {});\n\n\tfunction get_cell_display_value(row: number, col: number): string {\n\t\tconst is_search_active = $df_state.current_search_query !== undefined;\n\n\t\tif (is_search_active && search_results?.[row]?.[col]) {\n\t\t\treturn search_results[row][col].display_value !== undefined\n\t\t\t\t? search_results[row][col].display_value\n\t\t\t\t: String(search_results[row][col].value);\n\t\t}\n\n\t\tif (data?.[row]?.[col]) {\n\t\t\treturn data[row][col].display_value !== undefined\n\t\t\t\t? data[row][col].display_value\n\t\t\t\t: String(data[row][col].value);\n\t\t}\n\n\t\treturn \"\";\n\t}\n</script>\n\n<svelte:window on:resize={() => set_cell_widths()} />\n\n<div class=\"table-container\">\n\t{#if (label && label.length !== 0 && show_label) || show_fullscreen_button || show_copy_button || show_search !== \"none\"}\n\t\t<div class=\"header-row\">\n\t\t\t{#if label && label.length !== 0 && show_label}\n\t\t\t\t<div class=\"label\">\n\t\t\t\t\t<p>{label}</p>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<Toolbar\n\t\t\t\t{show_fullscreen_button}\n\t\t\t\t{fullscreen}\n\t\t\t\ton_copy={async () => await copy_table_data(data, null)}\n\t\t\t\t{show_copy_button}\n\t\t\t\t{show_search}\n\t\t\t\ton:search={(e) => df_actions.handle_search(e.detail)}\n\t\t\t\ton:fullscreen\n\t\t\t\ton_commit_filter={commit_filter}\n\t\t\t\tcurrent_search_query={$df_state.current_search_query}\n\t\t\t/>\n\t\t</div>\n\t{/if}\n\t<div\n\t\tbind:this={parent}\n\t\tclass=\"table-wrap\"\n\t\tclass:dragging={is_dragging}\n\t\tclass:no-wrap={!wrap}\n\t\tclass:menu-open={active_cell_menu || active_header_menu}\n\t\ton:keydown={(e) => handle_keydown(e, df_ctx)}\n\t\ton:mousemove={handle_mouse_move}\n\t\ton:mouseup={handle_mouse_up}\n\t\ton:mouseleave={handle_mouse_up}\n\t\trole=\"grid\"\n\t\ttabindex=\"0\"\n\t>\n\t\t<table bind:this={table} aria-hidden=\"true\">\n\t\t\t{#if label && label.length !== 0}\n\t\t\t\t<caption class=\"sr-only\">{label}</caption>\n\t\t\t{/if}\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t{#if show_row_numbers}\n\t\t\t\t\t\t<RowNumber is_header={true} />\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#each _headers as { value, id }, i (id)}\n\t\t\t\t\t\t<TableHeader\n\t\t\t\t\t\t\tbind:value={_headers[i].value}\n\t\t\t\t\t\t\t{i}\n\t\t\t\t\t\t\t{actual_pinned_columns}\n\t\t\t\t\t\t\t{header_edit}\n\t\t\t\t\t\t\t{selected_header}\n\t\t\t\t\t\t\t{headers}\n\t\t\t\t\t\t\t{get_cell_width}\n\t\t\t\t\t\t\t{handle_header_click}\n\t\t\t\t\t\t\t{toggle_header_menu}\n\t\t\t\t\t\t\t{end_header_edit}\n\t\t\t\t\t\t\tsort_columns={$df_state.sort_state.sort_columns}\n\t\t\t\t\t\t\tfilter_columns={$df_state.filter_state.filter_columns}\n\t\t\t\t\t\t\t{latex_delimiters}\n\t\t\t\t\t\t\t{line_breaks}\n\t\t\t\t\t\t\t{max_chars}\n\t\t\t\t\t\t\t{editable}\n\t\t\t\t\t\t\tis_static={static_columns.includes(i)}\n\t\t\t\t\t\t\t{i18n}\n\t\t\t\t\t\t\tbind:el={els[id].input}\n\t\t\t\t\t\t\t{col_count}\n\t\t\t\t\t\t\tdatatype={Array.isArray(datatype) ? datatype[i] : datatype}\n\t\t\t\t\t\t\t{data}\n\t\t\t\t\t\t\ton_select_all={handle_select_all}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/each}\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t{#if show_row_numbers}\n\t\t\t\t\t\t<RowNumber index={0} />\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#each max as { value, id }, j (id)}\n\t\t\t\t\t\t<td tabindex=\"-1\" bind:this={cells[j]}>\n\t\t\t\t\t\t\t<div class=\"cell-wrap\">\n\t\t\t\t\t\t\t\t<EditableCell\n\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t\t{latex_delimiters}\n\t\t\t\t\t\t\t\t\t{line_breaks}\n\t\t\t\t\t\t\t\t\tdatatype={Array.isArray(datatype) ? datatype[j] : datatype}\n\t\t\t\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\t\t\t\tel={null}\n\t\t\t\t\t\t\t\t\t{editable}\n\t\t\t\t\t\t\t\t\t{i18n}\n\t\t\t\t\t\t\t\t\tshow_selection_buttons={selected_cells.length === 1 &&\n\t\t\t\t\t\t\t\t\t\tselected_cells[0][0] === 0 &&\n\t\t\t\t\t\t\t\t\t\tselected_cells[0][1] === j}\n\t\t\t\t\t\t\t\t\tcoords={selected_cell_coords}\n\t\t\t\t\t\t\t\t\ton_select_column={df_actions.handle_select_column}\n\t\t\t\t\t\t\t\t\ton_select_row={df_actions.handle_select_row}\n\t\t\t\t\t\t\t\t\t{is_dragging}\n\t\t\t\t\t\t\t\t\ton:blur={handle_blur}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t{/each}\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t<Upload\n\t\t\t{upload}\n\t\t\t{stream_handler}\n\t\t\tflex={false}\n\t\t\tcenter={false}\n\t\t\tboundedheight={false}\n\t\t\tdisable_click={true}\n\t\t\t{root}\n\t\t\ton:load={({ detail }) =>\n\t\t\t\thandle_file_upload(\n\t\t\t\t\tdetail.data,\n\t\t\t\t\t(head) => {\n\t\t\t\t\t\t_headers = make_headers(\n\t\t\t\t\t\t\thead.map((h) => h ?? \"\"),\n\t\t\t\t\t\t\tcol_count,\n\t\t\t\t\t\t\tels,\n\t\t\t\t\t\t\tmake_id\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn _headers;\n\t\t\t\t\t},\n\t\t\t\t\t(vals) => {\n\t\t\t\t\t\tvalues = vals;\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\tbind:dragging\n\t\t\taria_label={i18n(\"dataframe.drop_to_upload\")}\n\t\t>\n\t\t\t<div class=\"table-wrap\">\n\t\t\t\t<VirtualTable\n\t\t\t\t\tbind:items={search_results}\n\t\t\t\t\t{max_height}\n\t\t\t\t\tbind:actual_height={table_height}\n\t\t\t\t\tbind:table_scrollbar_width={scrollbar_width}\n\t\t\t\t\tselected={selected_index}\n\t\t\t\t\tdisable_scroll={active_cell_menu !== null ||\n\t\t\t\t\t\tactive_header_menu !== null}\n\t\t\t\t\tbind:viewport\n\t\t\t\t\tbind:show_scroll_button\n\t\t\t\t\t{label}\n\t\t\t\t\ton:scroll_top={(_) => {}}\n\t\t\t\t>\n\t\t\t\t\t<tr slot=\"thead\">\n\t\t\t\t\t\t{#if show_row_numbers}\n\t\t\t\t\t\t\t<RowNumber is_header={true} />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#each _headers as { value, id }, i (id)}\n\t\t\t\t\t\t\t<TableHeader\n\t\t\t\t\t\t\t\tbind:value={_headers[i].value}\n\t\t\t\t\t\t\t\t{i}\n\t\t\t\t\t\t\t\t{actual_pinned_columns}\n\t\t\t\t\t\t\t\t{header_edit}\n\t\t\t\t\t\t\t\t{selected_header}\n\t\t\t\t\t\t\t\t{headers}\n\t\t\t\t\t\t\t\t{get_cell_width}\n\t\t\t\t\t\t\t\t{handle_header_click}\n\t\t\t\t\t\t\t\t{toggle_header_menu}\n\t\t\t\t\t\t\t\t{end_header_edit}\n\t\t\t\t\t\t\t\tsort_columns={$df_state.sort_state.sort_columns}\n\t\t\t\t\t\t\t\tfilter_columns={$df_state.filter_state.filter_columns}\n\t\t\t\t\t\t\t\t{latex_delimiters}\n\t\t\t\t\t\t\t\t{line_breaks}\n\t\t\t\t\t\t\t\t{max_chars}\n\t\t\t\t\t\t\t\t{editable}\n\t\t\t\t\t\t\t\tis_static={static_columns.includes(i)}\n\t\t\t\t\t\t\t\t{i18n}\n\t\t\t\t\t\t\t\tbind:el={els[id].input}\n\t\t\t\t\t\t\t\t{col_count}\n\t\t\t\t\t\t\t\tdatatype={Array.isArray(datatype) ? datatype[i] : datatype}\n\t\t\t\t\t\t\t\t{data}\n\t\t\t\t\t\t\t\ton_select_all={handle_select_all}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr slot=\"tbody\" let:item let:index class:row-odd={index % 2 === 0}>\n\t\t\t\t\t\t{#if show_row_numbers}\n\t\t\t\t\t\t\t<RowNumber {index} />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#each item as { value, id }, j (id)}\n\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\tbind:value={search_results[index][j].value}\n\t\t\t\t\t\t\t\tdisplay_value={get_cell_display_value(index, j)}\n\t\t\t\t\t\t\t\tindex={$df_state.current_search_query !== undefined &&\n\t\t\t\t\t\t\t\tfiltered_to_original_map[index] !== undefined\n\t\t\t\t\t\t\t\t\t? filtered_to_original_map[index]\n\t\t\t\t\t\t\t\t\t: index}\n\t\t\t\t\t\t\t\t{j}\n\t\t\t\t\t\t\t\t{actual_pinned_columns}\n\t\t\t\t\t\t\t\t{get_cell_width}\n\t\t\t\t\t\t\t\thandle_cell_click={(e, r, c) => handle_mouse_down(e, r, c)}\n\t\t\t\t\t\t\t\t{handle_blur}\n\t\t\t\t\t\t\t\ttoggle_cell_menu={df_actions.toggle_cell_menu}\n\t\t\t\t\t\t\t\t{is_cell_selected}\n\t\t\t\t\t\t\t\t{should_show_cell_menu}\n\t\t\t\t\t\t\t\t{selected_cells}\n\t\t\t\t\t\t\t\t{copy_flash}\n\t\t\t\t\t\t\t\t{active_cell_menu}\n\t\t\t\t\t\t\t\tstyling={search_results[index][j].styling}\n\t\t\t\t\t\t\t\t{latex_delimiters}\n\t\t\t\t\t\t\t\t{line_breaks}\n\t\t\t\t\t\t\t\tdatatype={Array.isArray(datatype) ? datatype[j] : datatype}\n\t\t\t\t\t\t\t\t{editing}\n\t\t\t\t\t\t\t\t{max_chars}\n\t\t\t\t\t\t\t\t{editable}\n\t\t\t\t\t\t\t\tis_static={static_columns.includes(j)}\n\t\t\t\t\t\t\t\t{i18n}\n\t\t\t\t\t\t\t\t{components}\n\t\t\t\t\t\t\t\thandle_select_column={df_actions.handle_select_column}\n\t\t\t\t\t\t\t\thandle_select_row={df_actions.handle_select_row}\n\t\t\t\t\t\t\t\tbind:el={els[id]}\n\t\t\t\t\t\t\t\t{is_dragging}\n\t\t\t\t\t\t\t\t{wrap}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tr>\n\t\t\t\t</VirtualTable>\n\t\t\t</div>\n\t\t</Upload>\n\t\t{#if show_scroll_button}\n\t\t\t<button class=\"scroll-top-button\" on:click={scroll_to_top}>\n\t\t\t\t&uarr;\n\t\t\t</button>\n\t\t{/if}\n\t</div>\n</div>\n{#if data.length === 0 && editable && row_count[1] === \"dynamic\"}\n\t<EmptyRowButton on_click={() => add_row()} />\n{/if}\n\n{#if active_cell_menu || active_header_menu}\n\t<CellMenu\n\t\tx={active_cell_menu?.x ?? active_header_menu?.x ?? 0}\n\t\ty={active_cell_menu?.y ?? active_header_menu?.y ?? 0}\n\t\trow={active_header_menu ? -1 : active_cell_menu?.row ?? 0}\n\t\t{col_count}\n\t\t{row_count}\n\t\ton_add_row_above={() => add_row_at(active_cell_menu?.row ?? -1, \"above\")}\n\t\ton_add_row_below={() => add_row_at(active_cell_menu?.row ?? -1, \"below\")}\n\t\ton_add_column_left={() =>\n\t\t\tadd_col_at(\n\t\t\t\tactive_cell_menu?.col ?? active_header_menu?.col ?? -1,\n\t\t\t\t\"left\"\n\t\t\t)}\n\t\ton_add_column_right={() =>\n\t\t\tadd_col_at(\n\t\t\t\tactive_cell_menu?.col ?? active_header_menu?.col ?? -1,\n\t\t\t\t\"right\"\n\t\t\t)}\n\t\ton_delete_row={() => delete_row_at(active_cell_menu?.row ?? -1)}\n\t\ton_delete_col={() =>\n\t\t\tdelete_col_at(active_cell_menu?.col ?? active_header_menu?.col ?? -1)}\n\t\t{editable}\n\t\tcan_delete_rows={!active_header_menu && data.length > 1 && editable}\n\t\tcan_delete_cols={data.length > 0 && data[0]?.length > 1 && editable}\n\t\t{i18n}\n\t\ton_sort={active_header_menu\n\t\t\t? (direction) => {\n\t\t\t\t\tif (active_header_menu) {\n\t\t\t\t\t\thandle_sort(active_header_menu.col, direction);\n\t\t\t\t\t\tdf_actions.set_active_header_menu(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t: undefined}\n\t\ton_clear_sort={active_header_menu\n\t\t\t? () => {\n\t\t\t\t\tclear_sort();\n\t\t\t\t\tdf_actions.set_active_header_menu(null);\n\t\t\t\t}\n\t\t\t: undefined}\n\t\tsort_direction={active_header_menu\n\t\t\t? $df_state.sort_state.sort_columns.find(\n\t\t\t\t\t(item) => item.col === (active_header_menu?.col ?? -1)\n\t\t\t\t)?.direction ?? null\n\t\t\t: null}\n\t\tsort_priority={active_header_menu\n\t\t\t? $df_state.sort_state.sort_columns.findIndex(\n\t\t\t\t\t(item) => item.col === (active_header_menu?.col ?? -1)\n\t\t\t\t) + 1 || null\n\t\t\t: null}\n\t\ton_filter={active_header_menu\n\t\t\t? (datatype, filter, value) => {\n\t\t\t\t\tif (active_header_menu) {\n\t\t\t\t\t\thandle_filter(active_header_menu.col, datatype, filter, value);\n\t\t\t\t\t\tdf_actions.set_active_header_menu(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t: undefined}\n\t\ton_clear_filter={active_header_menu\n\t\t\t? () => {\n\t\t\t\t\tclear_filter();\n\t\t\t\t\tdf_actions.set_active_header_menu(null);\n\t\t\t\t}\n\t\t\t: undefined}\n\t\tfilter_active={active_header_menu\n\t\t\t? $df_state.filter_state.filter_columns.some(\n\t\t\t\t\t(c) => c.col === (active_header_menu?.col ?? -1)\n\t\t\t\t)\n\t\t\t: null}\n\t/>\n{/if}\n\n<style>\n\t.table-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--size-2);\n\t\tposition: relative;\n\t}\n\n\t.table-wrap {\n\t\tposition: relative;\n\t\ttransition: 150ms;\n\t}\n\n\t.table-wrap.menu-open {\n\t\toverflow: hidden;\n\t}\n\n\t.table-wrap:focus-within {\n\t\toutline: none;\n\t}\n\n\t.table-wrap.dragging {\n\t\tcursor: crosshair !important;\n\t\tuser-select: none;\n\t}\n\n\t.table-wrap.dragging * {\n\t\tcursor: crosshair !important;\n\t\tuser-select: none;\n\t}\n\n\t.table-wrap > :global(button) {\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--table-radius);\n\t\toverflow: hidden;\n\t}\n\n\ttable {\n\t\tposition: absolute;\n\t\topacity: 0;\n\t\tz-index: -1;\n\t\ttransition: 150ms;\n\t\twidth: var(--size-full);\n\t\ttable-layout: auto;\n\t\tcolor: var(--body-text-color);\n\t\tfont-size: var(--input-text-size);\n\t\tline-height: var(--line-md);\n\t\tfont-family: var(--font-mono);\n\t\tborder-spacing: 0;\n\t\tborder-collapse: separate;\n\t}\n\n\tthead {\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 5;\n\t\tbox-shadow: var(--shadow-drop);\n\t}\n\n\tthead :global(th.pinned-column) {\n\t\tposition: sticky;\n\t\tz-index: 6;\n\t\tbackground: var(--table-even-background-fill) !important;\n\t}\n\n\t.dragging {\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.no-wrap {\n\t\twhite-space: nowrap;\n\t}\n\n\tdiv:not(.no-wrap) td {\n\t\toverflow-wrap: anywhere;\n\t}\n\n\tdiv.no-wrap td {\n\t\toverflow-x: hidden;\n\t}\n\n\ttr {\n\t\tbackground: var(--table-even-background-fill);\n\t}\n\n\ttr.row-odd {\n\t\tbackground: var(--table-odd-background-fill);\n\t}\n\n\t.header-row {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\talign-items: center;\n\t\tgap: var(--size-2);\n\t\tmin-height: var(--size-6);\n\t\tflex-wrap: nowrap;\n\t\twidth: 100%;\n\t}\n\n\t.header-row .label {\n\t\tflex: 1 1 auto;\n\t\tmargin-right: auto;\n\t\tfont-family: var(--font-sans);\n\t}\n\n\t.header-row .label p {\n\t\tmargin: 0;\n\t\tcolor: var(--block-label-text-color);\n\t\tfont-size: var(--block-label-text-size);\n\t\tline-height: var(--line-sm);\n\t\tposition: relative;\n\t\tz-index: 4;\n\t}\n\n\t.scroll-top-button {\n\t\tposition: absolute;\n\t\tright: var(--size-4);\n\t\tbottom: var(--size-4);\n\t\twidth: var(--size-8);\n\t\theight: var(--size-8);\n\t\tborder-radius: var(--table-radius);\n\t\tbackground: var(--color-accent);\n\t\tcolor: white;\n\t\tborder: none;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: var(--text-lg);\n\t\tz-index: 9;\n\t\topacity: 0.5;\n\t}\n\n\t.scroll-top-button:hover {\n\t\topacity: 1;\n\t}\n\n\ttr {\n\t\tborder-bottom: 1px solid var(--border-color-primary);\n\t\ttext-align: left;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as BaseDataFrame } from \"./shared/Table.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport type { Gradio, SelectData } from \"@gradio/utils\";\n\timport { Block } from \"@gradio/atoms\";\n\timport Table from \"./shared/Table.svelte\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport type { LoadingStatus } from \"@gradio/statustracker\";\n\timport type { Datatype, DataframeValue } from \"./shared/utils/utils\";\n\timport Image from \"@gradio/image\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible: boolean | \"hidden\" = true;\n\texport let value: DataframeValue = {\n\t\tdata: [[\"\", \"\", \"\"]],\n\t\theaders: [\"1\", \"2\", \"3\"],\n\t\tmetadata: null\n\t};\n\texport let value_is_output = false;\n\texport let col_count: [number, \"fixed\" | \"dynamic\"];\n\texport let row_count: [number, \"fixed\" | \"dynamic\"];\n\texport let label: string | null = null;\n\texport let show_label = true;\n\texport let wrap: boolean;\n\texport let datatype: Datatype | Datatype[];\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let root: string;\n\n\texport let line_breaks = true;\n\texport let column_widths: string[] = [];\n\texport let gradio: Gradio<{\n\t\tchange: never;\n\t\tselect: SelectData;\n\t\tinput: never;\n\t\tclear_status: LoadingStatus;\n\t\tsearch: string | null;\n\t\tedit: SelectData;\n\t}>;\n\texport let latex_delimiters: {\n\t\tleft: string;\n\t\tright: string;\n\t\tdisplay: boolean;\n\t}[];\n\texport let max_height: number | undefined = undefined;\n\texport let loading_status: LoadingStatus;\n\texport let interactive: boolean;\n\texport let show_fullscreen_button = false;\n\texport let max_chars: number | undefined = undefined;\n\texport let show_copy_button = false;\n\texport let show_row_numbers = false;\n\texport let show_search: \"none\" | \"search\" | \"filter\" = \"none\";\n\texport let pinned_columns = 0;\n\texport let static_columns: (string | number)[] = [];\n\texport let fullscreen = false;\n</script>\n\n<Block\n\t{visible}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\tcontainer={false}\n\t{scale}\n\t{min_width}\n\toverflow_behavior=\"visible\"\n\tbind:fullscreen\n>\n\t<StatusTracker\n\t\tautoscroll={gradio.autoscroll}\n\t\ti18n={gradio.i18n}\n\t\t{...loading_status}\n\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t/>\n\t<Table\n\t\t{root}\n\t\t{label}\n\t\t{show_label}\n\t\t{row_count}\n\t\t{col_count}\n\t\tvalues={value.data}\n\t\tdisplay_value={value.metadata?.display_value}\n\t\tstyling={value.metadata?.styling}\n\t\theaders={value.headers}\n\t\t{fullscreen}\n\t\ton:change={(e) => {\n\t\t\tvalue.data = e.detail.data;\n\t\t\tvalue.headers = e.detail.headers;\n\t\t\tgradio.dispatch(\"change\");\n\t\t}}\n\t\ton:input={(e) => gradio.dispatch(\"input\")}\n\t\ton:select={(e) => gradio.dispatch(\"select\", e.detail)}\n\t\ton:edit={(e) => gradio.dispatch(\"edit\", e.detail)}\n\t\ton:fullscreen={({ detail }) => {\n\t\t\tfullscreen = detail;\n\t\t}}\n\t\t{wrap}\n\t\t{datatype}\n\t\t{latex_delimiters}\n\t\teditable={interactive}\n\t\t{max_height}\n\t\ti18n={gradio.i18n}\n\t\t{line_breaks}\n\t\t{column_widths}\n\t\tupload={(...args) => gradio.client.upload(...args)}\n\t\tstream_handler={(...args) => gradio.client.stream(...args)}\n\t\tbind:value_is_output\n\t\t{show_fullscreen_button}\n\t\t{max_chars}\n\t\t{show_copy_button}\n\t\t{show_row_numbers}\n\t\t{show_search}\n\t\t{pinned_columns}\n\t\tcomponents={{ image: Image }}\n\t\t{static_columns}\n\t/>\n</Block>\n"],"names":["get_sort_status","name","sort_columns","headers","sort_item","item","col","sort_data","data","row_indices","_","row_a_idx","row_b_idx","row_a","row_b","sort_by","direction","val_a","val_b","comparison","i","sort_data_and_preserve_selection","display_value","styling","selected","get_current_indices","id","sort_table_data","new_selected","j","filter_data","filter_columns","column","_a","_b","filter_data_and_preserve_selection","original_data","original_display_value","original_styling","filter_table_data","get_max","max","indices","new_data","new_display","new_styling","base_data","base_display_value","base_styling","row","copy_table_data","selected_cells","csv","r","c","acc","value","rows","b","cols","text","err","guess_delimiter","possibleDelimiters","weedOut","delimiter","cache","checkLength","line","length","data_uri_to_blob","data_uri","byte_str","mime_str","ab","ia","handle_file_upload","update_headers","update_values","blob","reader","e","head","rest","dsvFormat","is_cell_in_selection","coords","is_cell_selected","cell","up","down","left","right","get_range_selection","start","end","start_row","start_col","end_row","end_col","min_row","max_row","min_col","max_col","cells","handle_selection","current","event","is_cell_match","index","handle_delete_key","should_show_cell_menu","editable","get_next_cell_coordinates","shift_key","next_row","prev_row","_c","move_cursor","current_coords","key","dir","arr","_acc","_data","k","handle_click_outside","parent","trigger","calculate_selection_positions","els","table","cell_id","cell_el","cell_rect","table_rect","col_pos","row_pos","DATAFRAME_KEY","create_actions","state","context","update_state","updater","s","add_row","make_id","new_row","add_col","new_headers","update_array","source","target","query","sort_cols","initial_data","datatype","filter","filter_cols","get","a","comp","_d","position","previous_data","previous_headers","value_is_output","dispatch","current_headers","h","current_data","dequal","original","menu","editing","header_index","button","actual_row","filtered_indices","dataRow","idx","tick","current_menu","rect","current_button","new_button","create_dataframe_context","config","writable","instance_id","setContext","ctx","attr","button_class_value","insert_hydration","anchor","append_hydration","span","svg","path","dirty","$$props","on_click","click_handler","$$invalidate","is_first_position","div","on_change","handle_change","textarea","toggle_class","markdowncode_changes","switch_value","func","switch_instance_changes","create_if_block_5","if_block2","create_if_block","truncate_text","max_length","is_image","str","use_focus","node","edit","header","latex_delimiters","line_breaks","is_static","max_chars","components","i18n","is_dragging","wrap_text","show_selection_buttons","on_select_column","on_select_row","el","createEventDispatcher","handle_blur","handle_keydown","commit_change","checked","$$value","should_truncate","display_content","display_text","t_value","td","set_data","t","th","is_header","is_function","touch","mouseEvent","path0","path1","size","path2","path3","path4","create_if_block_1","create_if_block_2","create_if_block_3","create_if_block_4","create_if_block_6","create_if_block_7","create_if_block_8","create_if_block_9","create_if_block_10","icon","basecheckbox_changes","if_block1","th_aria_sort_value","set_style","div1","div0","editablecell_changes","actual_pinned_columns","header_edit","selected_header","get_cell_width","handle_header_click","toggle_header_menu","end_header_edit","col_count","on_select_all","get_header_position","col_index","select_all_state","click_handler_1","click_handler_2","can_add_columns","is_bool_column","true_count","sort_index","filter_index","sort_priority","current_direction","editablecell_props","td_tabindex_value","td_data_testid_value","handle_cell_click","toggle_cell_menu","copy_flash","active_cell_menu","handle_select_column","handle_select_row","wrap","get_cell_position","$$self","mousedown_handler","contextmenu_handler","cell_classes","is_in_selection","has_no_top","has_no_bottom","has_no_left","has_no_right","caption","get_key","tr","if_block0","height","svelte_virtual_table_viewport","thead","tbody","tfoot","items","max_height","actual_height","table_scrollbar_width","disable_scroll","show_scroll_button","viewport","label","average_height","bottom","contents","head_height","foot_height","height_map","mounted","top","viewport_height","visible","viewport_box","is_browser","raf","cb","refresh_height_map","sortedItems","scroll_to_index","scrollTop","v","y","row_height","content_height","remaining","scrollbar_height","filtered_height_map","scroll_and_render","n","is_in_view","viewport_top","opts","align_end","_itemHeight","distance","_opts","onMount","ResizeObserverSingleton","each_value","ensure_array_like","t0","t0_value","div5","div4","button0","div3","div2","button1","input","button2","on_filter","menu_element","current_filter","filter_dropdown_open","filter_input_value","filter_options","position_menu","viewport_width","menu_rect","x","handle_filter_input","opt","click_handler_4","t1_value","t5_value","t9_value","t12_value","t16_value","button3","button4","t1","t5","t9","t12","t16","t4_value","t4","on_add_row_above","on_add_row_below","on_add_column_left","on_add_column_right","row_count","on_delete_row","on_delete_col","can_delete_rows","can_delete_cols","on_sort","on_clear_sort","sort_direction","on_clear_filter","filter_active","active_filter_menu","new_x","new_y","toggle_filter_menu","can_add_rows","input_value_value","input_placeholder_value","show_fullscreen_button","show_copy_button","show_search","fullscreen","on_copy","on_commit_filter","copied","timer","current_search_query","input_value","handle_search_input","new_query","copy_feedback","handle_copy","onDestroy","cast_value_to_type","d","make_headers","_head","_h","fill","_id","process_data","values","data_binding","display","dtype","save_cell_value","old_value","handle_cell_blur","input_el","handle_header_navigation","handle_delete_operation","static_columns","handle_arrow_keys","next_coords","handle_enter_key","handle_tab_key","next_cell","handle_default_key","handle_cell_navigation","create_drag_handlers","set_is_dragging","set_selected_cells","set_selected","show_row_numbers","parent_element","start_drag","is_checkbox_click","update_selection","selection_range","end_drag","dx","dy","if_block","toolbar_changes","p","tablecell_props","tablecell_changes","virtualtable_changes","_e","_f","_g","cellmenu_changes","if_block6","table_1","tr0","tr1","upload_1_changes","show_label","root","column_widths","upload","stream_handler","pinned_columns","df_ctx","df_state","df_actions","get_data_at","get_column","get_row","init_drag_handlers","observer","entries","entry","is_visible","width_calculated","handle_resize","global_mouse_up","drag_start","handle_mouse_up","_headers","old_headers","old_val","search_results","dragging","color_accent_copied","filtered_to_original_map","handle_sort","clear_sort","handle_filter","clear_filter","edit_header","_select","result","new_w","handle_click_outside_util","width_calc_timeout","last_width_data_length","last_width_column_count","set_cell_widths","column_count","$df_state","widths","percentage","pixel_width","width","calculated_width","table_height","scrollbar_width","_display_value","_styling","set_copy_flash","previous_selected_cells","blur_event","active_header_menu","afterUpdate","delete_col_at","delete_row_at","selected_cell_coords","commit_filter","filtered_data","filtered_display_values","filtered_styling","data_row","display_row","styling_row","change_payload","scroll_to_top","add_row_at","row_index","add_col_at","reset_sort_state","handle_select_all","mouse_down_pos","drag_state","drag_handlers","get_cell_display_value","search_handler","handle_mouse_down","load_handler","detail","vals","keydown_handler","func_3","func_4","func_7","is_reset","is_different_structure","cell_map","row_idx","col_idx","filtered","selected_index","positions","handle_mouse_move","Image","table_changes","elem_id","elem_classes","scale","min_width","gradio","loading_status","interactive","clear_status_handler","args","func_1","input_handler"],"mappings":"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"}