import{u as ct,B as _t,d as Fe,E as mt,I as ht,j as Ge,k as Se,a as ae,b as dt,F as gt,S as bt,l as pt}from"./FullscreenButton-BoNylw4k.js";import{M as wt,U as kt}from"./ModifyUpload-C1BBLG7J.js";import{I as ce}from"./Image-0bVIZe-w.js";import"./ImagePreview-BDiqfxBO.js";import{V as _e}from"./Video-NpeJCQXG.js";import{d as vt}from"./index-tFQomdd2.js";import"./index-sqki5BVz.js";import"./init-CYs0NWnS.js";import"./MarkdownCode-azIzFEvA.js";import"./prism-python-BVLPtsXx.js";import"./hls-C7-VjdhD.js";import"./svelte/svelte.js";async function yt(n){return n?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(n.map(async([l,t])=>l===null||!l.url?"":await ct(l.url)))).map(l=>`<img src="${l}" style="height: 400px" />`).join("")}</div>`:""}const{SvelteComponent:zt,add_flush_callback:jt,add_render_callback:$t,append:N,attr:$,bind:Bt,binding_callbacks:ne,bubble:ue,check_outros:D,create_component:B,destroy_component:E,destroy_each:qe,detach:T,element:S,empty:me,ensure_array_like:ie,flush:j,globals:Et,group_outros:C,init:It,insert:U,is_function:Lt,listen:K,mount_component:I,noop:Mt,run_all:Tt,safe_not_equal:Ut,set_data:He,set_style:H,space:A,stop_propagation:Nt,text:Oe,toggle_class:F,transition_in:m,transition_out:g}=window.__gradio__svelte__internal,{window:Pe}=Et,{createEventDispatcher:Rt,onMount:Dt}=window.__gradio__svelte__internal,{tick:Ct}=window.__gradio__svelte__internal;function je(n,e,l){const t=n.slice();return t[63]=e[l],t[65]=l,t}function $e(n,e,l){const t=n.slice();return t[66]=e[l],t[67]=e,t[65]=l,t}function Be(n){let e,l;return e=new _t({props:{show_label:n[2],Icon:Fe,label:n[3]||"Gallery"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&4&&(o.show_label=t[2]),i[0]&8&&(o.label=t[3]||"Gallery"),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function At(n){let e,l,t,i,o,s,u=n[30]&&n[6]&&Ee(n),f=n[11]&&n[1]===null&&Re(n),h=ie(n[21]),a=[];for(let c=0;c<h.length;c+=1)a[c]=We(je(n,h,c));const p=c=>g(a[c],1,1,()=>{a[c]=null});return{c(){e=S("div"),u&&u.c(),l=A(),t=S("div"),f&&f.c(),i=A(),o=S("div");for(let c=0;c<a.length;c+=1)a[c].c();$(o,"class","grid-container svelte-1svp6w8"),H(o,"--grid-cols",n[25]),H(o,"--grid-rows",n[4]),H(o,"--object-fit",n[7]),H(o,"height",n[5]),F(o,"pt-6",n[2]),$(t,"class","grid-wrap svelte-1svp6w8"),F(t,"minimal",n[12]==="minimal"),F(t,"fixed-height",n[12]!=="minimal"&&(!n[5]||n[5]=="auto")),F(t,"hidden",n[23]),$(e,"class","gallery-container")},m(c,d){U(c,e,d),u&&u.m(e,null),N(e,l),N(e,t),f&&f.m(t,null),N(t,i),N(t,o);for(let b=0;b<a.length;b+=1)a[b]&&a[b].m(o,null);n[58](e),s=!0},p(c,d){if(c[30]&&c[6]?u?(u.p(c,d),d[0]&1073741888&&m(u,1)):(u=Ee(c),u.c(),m(u,1),u.m(e,l)):u&&(C(),g(u,1,1,()=>{u=null}),D()),c[11]&&c[1]===null?f?(f.p(c,d),d[0]&2050&&m(f,1)):(f=Re(c),f.c(),m(f,1),f.m(t,i)):f&&(C(),g(f,1,1,()=>{f=null}),D()),d[0]&2099266|d[1]&17){h=ie(c[21]);let b;for(b=0;b<h.length;b+=1){const z=je(c,h,b);a[b]?(a[b].p(z,d),m(a[b],1)):(a[b]=We(z),a[b].c(),m(a[b],1),a[b].m(o,null))}for(C(),b=h.length;b<a.length;b+=1)p(b);D()}(!s||d[0]&33554432)&&H(o,"--grid-cols",c[25]),(!s||d[0]&16)&&H(o,"--grid-rows",c[4]),(!s||d[0]&128)&&H(o,"--object-fit",c[7]),(!s||d[0]&32)&&H(o,"height",c[5]),(!s||d[0]&4)&&F(o,"pt-6",c[2]),(!s||d[0]&4096)&&F(t,"minimal",c[12]==="minimal"),(!s||d[0]&4128)&&F(t,"fixed-height",c[12]!=="minimal"&&(!c[5]||c[5]=="auto")),(!s||d[0]&8388608)&&F(t,"hidden",c[23])},i(c){if(!s){m(u),m(f);for(let d=0;d<h.length;d+=1)m(a[d]);s=!0}},o(c){g(u),g(f),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)g(a[d]);s=!1},d(c){c&&T(e),u&&u.d(),f&&f.d(),qe(a,c),n[58](null)}}}function Wt(n){let e,l;return e=new mt({props:{unpadded_box:!0,size:"large",$$slots:{default:[Jt]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[2]&64&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ee(n){let e,l,t,i,o,s,u,f,h,a,p,c;l=new ht({props:{display_top_corner:n[14],$$slots:{default:[Ft]},$$scope:{ctx:n}}});const d=[St,Gt],b=[];function z(k,y){return"image"in k[30]?0:1}o=z(n),s=b[o]=d[o](n);let v=n[30]?.caption&&Ue(n),w=ie(n[21]),_=[];for(let k=0;k<w.length;k+=1)_[k]=Ne($e(n,w,k));const R=k=>g(_[k],1,1,()=>{_[k]=null});return{c(){e=S("button"),B(l.$$.fragment),t=A(),i=S("button"),s.c(),u=A(),v&&v.c(),f=A(),h=S("div");for(let k=0;k<_.length;k+=1)_[k].c();$(i,"class","media-button svelte-1svp6w8"),H(i,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),$(i,"aria-label","detailed view of selected image"),$(h,"class","thumbnails scroll-hide svelte-1svp6w8"),$(h,"data-testid","container_el"),H(h,"justify-content",n[28]?"flex-start":"center"),$(e,"class","preview svelte-1svp6w8"),F(e,"minimal",n[12]==="minimal")},m(k,y){U(k,e,y),I(l,e,null),N(e,t),N(e,i),b[o].m(i,null),N(e,u),v&&v.m(e,null),N(e,f),N(e,h);for(let O=0;O<_.length;O+=1)_[O]&&_[O].m(h,null);n[51](h),a=!0,p||(c=[K(i,"click",function(){Lt("image"in n[30]?n[48]:null)&&("image"in n[30]?n[48]:null).apply(this,arguments)}),K(e,"keydown",n[33])],p=!0)},p(k,y){n=k;const O={};y[0]&16384&&(O.display_top_corner=n[14]),y[0]&1084270338|y[2]&64&&(O.$$scope={dirty:y,ctx:n}),l.$set(O);let V=o;if(o=z(n),o===V?b[o].p(n,y):(C(),g(b[V],1,1,()=>{b[V]=null}),D(),s=b[o],s?s.p(n,y):(s=b[o]=d[o](n),s.c()),m(s,1),s.m(i,null)),(!a||y[0]&1073741824)&&H(i,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),n[30]?.caption?v?v.p(n,y):(v=Ue(n),v.c(),v.m(e,f)):v&&(v.d(1),v=null),y[0]&69210114){w=ie(n[21]);let L;for(L=0;L<w.length;L+=1){const Q=$e(n,w,L);_[L]?(_[L].p(Q,y),m(_[L],1)):(_[L]=Ne(Q),_[L].c(),m(_[L],1),_[L].m(h,null))}for(C(),L=w.length;L<_.length;L+=1)R(L);D()}(!a||y[0]&268435456)&&H(h,"justify-content",n[28]?"flex-start":"center"),(!a||y[0]&4096)&&F(e,"minimal",n[12]==="minimal")},i(k){if(!a){m(l.$$.fragment,k),m(s);for(let y=0;y<w.length;y+=1)m(_[y]);a=!0}},o(k){g(l.$$.fragment,k),g(s),_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)g(_[y]);a=!1},d(k){k&&T(e),E(l),b[o].d(),v&&v.d(),qe(_,k),n[51](null),p=!1,Tt(c)}}}function Ie(n){let e,l;return e=new ae({props:{Icon:dt,label:n[10]("common.download")}}),e.$on("click",n[43]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&1024&&(o.label=t[10]("common.download")),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Le(n){let e,l;return e=new gt({props:{fullscreen:n[15]}}),e.$on("fullscreen",n[44]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&32768&&(o.fullscreen=t[15]),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Me(n){let e,l,t;return l=new bt({props:{i18n:n[10],value:n[21],formatter:yt}}),l.$on("share",n[45]),l.$on("error",n[46]),{c(){e=S("div"),B(l.$$.fragment),$(e,"class","icon-button")},m(i,o){U(i,e,o),I(l,e,null),t=!0},p(i,o){const s={};o[0]&1024&&(s.i18n=i[10]),o[0]&2097152&&(s.value=i[21]),l.$set(s)},i(i){t||(m(l.$$.fragment,i),t=!0)},o(i){g(l.$$.fragment,i),t=!1},d(i){i&&T(e),E(l)}}}function Te(n){let e,l;return e=new ae({props:{Icon:Se,label:"Close"}}),e.$on("click",n[47]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p:Mt,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ft(n){let e,l,t,i,o,s=n[9]&&Ie(n),u=n[13]&&Le(n),f=n[8]&&Me(n),h=!n[23]&&Te(n);return{c(){s&&s.c(),e=A(),u&&u.c(),l=A(),f&&f.c(),t=A(),h&&h.c(),i=me()},m(a,p){s&&s.m(a,p),U(a,e,p),u&&u.m(a,p),U(a,l,p),f&&f.m(a,p),U(a,t,p),h&&h.m(a,p),U(a,i,p),o=!0},p(a,p){a[9]?s?(s.p(a,p),p[0]&512&&m(s,1)):(s=Ie(a),s.c(),m(s,1),s.m(e.parentNode,e)):s&&(C(),g(s,1,1,()=>{s=null}),D()),a[13]?u?(u.p(a,p),p[0]&8192&&m(u,1)):(u=Le(a),u.c(),m(u,1),u.m(l.parentNode,l)):u&&(C(),g(u,1,1,()=>{u=null}),D()),a[8]?f?(f.p(a,p),p[0]&256&&m(f,1)):(f=Me(a),f.c(),m(f,1),f.m(t.parentNode,t)):f&&(C(),g(f,1,1,()=>{f=null}),D()),a[23]?h&&(C(),g(h,1,1,()=>{h=null}),D()):h?(h.p(a,p),p[0]&8388608&&m(h,1)):(h=Te(a),h.c(),m(h,1),h.m(i.parentNode,i))},i(a){o||(m(s),m(u),m(f),m(h),o=!0)},o(a){g(s),g(u),g(f),g(h),o=!1},d(a){a&&(T(e),T(l),T(t),T(i)),s&&s.d(a),u&&u.d(a),f&&f.d(a),h&&h.d(a)}}}function Gt(n){let e,l;return e=new _e({props:{src:n[30].video.url,"data-testid":"detailed-video",alt:n[30].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&1073741824&&(o.src=t[30].video.url),i[0]&1073741824&&(o.alt=t[30].caption||""),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function St(n){let e,l;return e=new ce({props:{"data-testid":"detailed-image",src:n[30].image.url,alt:n[30].caption||"",title:n[30].caption||null,class:n[30].caption&&"with-caption",loading:"lazy"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&1073741824&&(o.src=t[30].image.url),i[0]&1073741824&&(o.alt=t[30].caption||""),i[0]&1073741824&&(o.title=t[30].caption||null),i[0]&1073741824&&(o.class=t[30].caption&&"with-caption"),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ue(n){let e,l=n[30].caption+"",t;return{c(){e=S("caption"),t=Oe(l),$(e,"class","caption svelte-1svp6w8")},m(i,o){U(i,e,o),N(e,t)},p(i,o){o[0]&1073741824&&l!==(l=i[30].caption+"")&&He(t,l)},d(i){i&&T(e)}}}function qt(n){let e,l,t,i;return e=new Ge({}),t=new _e({props:{src:n[66].video.url,title:n[66].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[65]+1),alt:"",loading:"lazy",loop:!1}}),{c(){B(e.$$.fragment),l=A(),B(t.$$.fragment)},m(o,s){I(e,o,s),U(o,l,s),I(t,o,s),i=!0},p(o,s){const u={};s[0]&2097152&&(u.src=o[66].video.url),s[0]&2097152&&(u.title=o[66].caption||null),t.$set(u)},i(o){i||(m(e.$$.fragment,o),m(t.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),i=!1},d(o){o&&T(l),E(e,o),E(t,o)}}}function Ht(n){let e,l;return e=new ce({props:{src:n[66].image.url,title:n[66].caption||null,"data-testid":"thumbnail "+(n[65]+1),alt:"",loading:"lazy"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&2097152&&(o.src=t[66].image.url),i[0]&2097152&&(o.title=t[66].caption||null),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ne(n){let e,l,t,i,o,s=n[65],u,f,h;const a=[Ht,qt],p=[];function c(v,w){return"image"in v[66]?0:1}l=c(n),t=p[l]=a[l](n);const d=()=>n[49](e,s),b=()=>n[49](null,s);function z(){return n[50](n[65])}return{c(){e=S("button"),t.c(),i=A(),$(e,"class","thumbnail-item thumbnail-small svelte-1svp6w8"),$(e,"aria-label",o="Thumbnail "+(n[65]+1)+" of "+n[21].length),F(e,"selected",n[1]===n[65]&&n[12]!=="minimal")},m(v,w){U(v,e,w),p[l].m(e,null),N(e,i),d(),u=!0,f||(h=K(e,"click",z),f=!0)},p(v,w){n=v;let _=l;l=c(n),l===_?p[l].p(n,w):(C(),g(p[_],1,1,()=>{p[_]=null}),D(),t=p[l],t?t.p(n,w):(t=p[l]=a[l](n),t.c()),m(t,1),t.m(e,i)),(!u||w[0]&2097152&&o!==(o="Thumbnail "+(n[65]+1)+" of "+n[21].length))&&$(e,"aria-label",o),s!==n[65]&&(b(),s=n[65],d()),(!u||w[0]&4098)&&F(e,"selected",n[1]===n[65]&&n[12]!=="minimal")},i(v){u||(m(t),u=!0)},o(v){g(t),u=!1},d(v){v&&T(e),p[l].d(),b(),f=!1,h()}}}function Re(n){let e,l;return e=new wt({props:{i18n:n[10],$$slots:{default:[Pt]},$$scope:{ctx:n}}}),e.$on("clear",n[55]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&1024&&(o.i18n=t[10]),i[0]&538903552|i[2]&64&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function De(n){let e,l;return e=new ae({props:{Icon:pt,label:n[10]("common.upload"),$$slots:{default:[Ot]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&1024&&(o.label=t[10]("common.upload")),i[0]&538902528|i[2]&64&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ot(n){let e,l,t;function i(s){n[52](s)}let o={icon_upload:!0,filetype:n[17],file_count:"multiple",max_file_size:n[18],root:n[16],stream_handler:n[20],upload:n[19]};return n[29]!==void 0&&(o.uploading=n[29]),e=new kt({props:o}),ne.push(()=>Bt(e,"uploading",i)),e.$on("load",n[53]),e.$on("error",n[54]),{c(){B(e.$$.fragment)},m(s,u){I(e,s,u),t=!0},p(s,u){const f={};u[0]&131072&&(f.filetype=s[17]),u[0]&262144&&(f.max_file_size=s[18]),u[0]&65536&&(f.root=s[16]),u[0]&1048576&&(f.stream_handler=s[20]),u[0]&524288&&(f.upload=s[19]),!l&&u[0]&536870912&&(l=!0,f.uploading=s[29],jt(()=>l=!1)),e.$set(f)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){E(e,s)}}}function Pt(n){let e,l,t=n[19]&&n[20]&&De(n);return{c(){t&&t.c(),e=me()},m(i,o){t&&t.m(i,o),U(i,e,o),l=!0},p(i,o){i[19]&&i[20]?t?(t.p(i,o),o[0]&1572864&&m(t,1)):(t=De(i),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(C(),g(t,1,1,()=>{t=null}),D())},i(i){l||(m(t),l=!0)},o(i){g(t),l=!1},d(i){i&&T(e),t&&t.d(i)}}}function Vt(n){let e,l,t,i;return e=new Ge({}),t=new _e({props:{src:n[63].video.url,title:n[63].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[65]+1),alt:"",loading:"lazy",loop:!1}}),{c(){B(e.$$.fragment),l=A(),B(t.$$.fragment)},m(o,s){I(e,o,s),U(o,l,s),I(t,o,s),i=!0},p(o,s){const u={};s[0]&2097152&&(u.src=o[63].video.url),s[0]&2097152&&(u.title=o[63].caption||null),t.$set(u)},i(o){i||(m(e.$$.fragment,o),m(t.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),i=!1},d(o){o&&T(l),E(e,o),E(t,o)}}}function Xt(n){let e,l;return e=new ce({props:{alt:n[63].caption||"",src:typeof n[63].image=="string"?n[63].image:n[63].image.url,loading:"lazy"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},p(t,i){const o={};i[0]&2097152&&(o.alt=t[63].caption||""),i[0]&2097152&&(o.src=typeof t[63].image=="string"?t[63].image:t[63].image.url),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ce(n){let e,l=n[63].caption+"",t;return{c(){e=S("div"),t=Oe(l),$(e,"class","caption-label svelte-1svp6w8")},m(i,o){U(i,e,o),N(e,t)},p(i,o){o[0]&2097152&&l!==(l=i[63].caption+"")&&He(t,l)},d(i){i&&T(e)}}}function Ae(n){let e,l,t,i,o;l=new Se({});function s(){return n[57](n[65])}return{c(){e=S("button"),B(l.$$.fragment),$(e,"class","delete-button svelte-1svp6w8"),$(e,"aria-label","Delete image")},m(u,f){U(u,e,f),I(l,e,null),t=!0,i||(o=K(e,"click",Nt(s)),i=!0)},p(u,f){n=u},i(u){t||(m(l.$$.fragment,u),t=!0)},o(u){g(l.$$.fragment,u),t=!1},d(u){u&&T(e),E(l),i=!1,o()}}}function We(n){let e,l,t,i,o,s,u,f,h,a,p;const c=[Xt,Vt],d=[];function b(_,R){return"image"in _[63]?0:1}t=b(n),i=d[t]=c[t](n);let z=n[63].caption&&Ce(n);function v(){return n[56](n[65])}let w=n[11]&&Ae(n);return{c(){e=S("div"),l=S("button"),i.c(),o=A(),z&&z.c(),u=A(),w&&w.c(),f=A(),$(l,"class","thumbnail-item thumbnail-lg svelte-1svp6w8"),$(l,"aria-label",s="Thumbnail "+(n[65]+1)+" of "+n[21].length),F(l,"selected",n[1]===n[65]),$(e,"class","gallery-item svelte-1svp6w8")},m(_,R){U(_,e,R),N(e,l),d[t].m(l,null),N(l,o),z&&z.m(l,null),N(e,u),w&&w.m(e,null),N(e,f),h=!0,a||(p=K(l,"click",v),a=!0)},p(_,R){n=_;let k=t;t=b(n),t===k?d[t].p(n,R):(C(),g(d[k],1,1,()=>{d[k]=null}),D(),i=d[t],i?i.p(n,R):(i=d[t]=c[t](n),i.c()),m(i,1),i.m(l,o)),n[63].caption?z?z.p(n,R):(z=Ce(n),z.c(),z.m(l,null)):z&&(z.d(1),z=null),(!h||R[0]&2097152&&s!==(s="Thumbnail "+(n[65]+1)+" of "+n[21].length))&&$(l,"aria-label",s),(!h||R[0]&2)&&F(l,"selected",n[1]===n[65]),n[11]?w?(w.p(n,R),R[0]&2048&&m(w,1)):(w=Ae(n),w.c(),m(w,1),w.m(e,f)):w&&(C(),g(w,1,1,()=>{w=null}),D())},i(_){h||(m(i),m(w),h=!0)},o(_){g(i),g(w),h=!1},d(_){_&&T(e),d[t].d(),z&&z.d(),w&&w.d(),a=!1,p()}}}function Jt(n){let e,l;return e=new Fe({}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Kt(n){let e,l,t,i,o,s,u;$t(n[42]);let f=n[2]&&Be(n);const h=[Wt,At],a=[];function p(c,d){return c[0]==null||c[21]==null||c[21].length===0?0:1}return l=p(n),t=a[l]=h[l](n),{c(){f&&f.c(),e=A(),t.c(),i=me()},m(c,d){f&&f.m(c,d),U(c,e,d),a[l].m(c,d),U(c,i,d),o=!0,s||(u=K(Pe,"resize",n[42]),s=!0)},p(c,d){c[2]?f?(f.p(c,d),d[0]&4&&m(f,1)):(f=Be(c),f.c(),m(f,1),f.m(e.parentNode,e)):f&&(C(),g(f,1,1,()=>{f=null}),D());let b=l;l=p(c),l===b?a[l].p(c,d):(C(),g(a[b],1,1,()=>{a[b]=null}),D(),t=a[l],t?t.p(c,d):(t=a[l]=h[l](c),t.c()),m(t,1),t.m(i.parentNode,i))},i(c){o||(m(f),m(t),o=!0)},o(c){g(f),g(t),o=!1},d(c){c&&(T(e),T(i)),f&&f.d(c),a[l].d(c),s=!1,u()}}}function Qt(n,e,l){let t,i,o,{show_label:s=!0}=e,{label:u}=e,{value:f=null}=e,{columns:h=[2]}=e,{rows:a=void 0}=e,{height:p="auto"}=e,{preview:c}=e,{allow_preview:d=!0}=e,{object_fit:b="cover"}=e,{show_share_button:z=!1}=e,{show_download_button:v=!1}=e,{i18n:w}=e,{selected_index:_=null}=e,{interactive:R}=e,{_fetch:k}=e,{mode:y="normal"}=e,{show_fullscreen_button:O=!0}=e,{display_icon_button_wrapper_top_corner:V=!1}=e,{fullscreen:L=!1}=e,{root:Q=""}=e,{file_types:he=["image","video"]}=e,{max_file_size:de=null}=e,{upload:ge=void 0}=e,{stream_handler:be=void 0}=e,pe=!1,oe;const P=Rt();let Y=!0,W=null,ee=h,re=f;_==null&&c&&f?.length&&(_=0);let se=_;function we(r){const M=r.target,G=r.offsetX,J=M.offsetWidth/2;G<J?l(1,_=t):l(1,_=i)}function Ve(r){switch(r.code){case"Escape":r.preventDefault(),l(1,_=null);break;case"ArrowLeft":r.preventDefault(),l(1,_=t);break;case"ArrowRight":r.preventDefault(),l(1,_=i);break}}let X=[],q;async function Xe(r){if(typeof r!="number"||(await Ct(),X[r]===void 0))return;X[r]?.focus();const{left:M,width:G}=q.getBoundingClientRect(),{left:te,width:J}=X[r].getBoundingClientRect(),x=te-M+J/2-G/2+q.scrollLeft;q&&typeof q.scrollTo=="function"&&q.scrollTo({left:x<0?0:x,behavior:"smooth"})}let ke=0;async function ve(r,M){let G;try{G=await k(r)}catch(x){if(x instanceof TypeError){window.open(r,"_blank","noreferrer");return}throw x}const te=await G.blob(),J=URL.createObjectURL(te),le=document.createElement("a");le.href=J,le.download=M,le.click(),URL.revokeObjectURL(J)}let ye=!1;function Z(){q&&l(28,ye=q.scrollWidth>q.clientWidth)}Dt(()=>(Z(),document.addEventListener("fullscreenchange",()=>{l(23,pe=!!document.fullscreenElement)}),window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)));function ze(r){if(!f||!W)return;const M=W[r];let G;"image"in M?G={file:M.image,index:r}:"video"in M&&(G={file:M.video,index:r}),G&&P("delete",G)}let fe=!1;function Je(){l(27,ke=Pe.innerHeight)}const Ke=()=>{const r="image"in o?o?.image:o?.video;if(r==null)return;const{url:M,orig_name:G}=r;M&&ve(M,G??"image")};function Qe(r){ue.call(this,n,r)}function Ye(r){ue.call(this,n,r)}function Ze(r){ue.call(this,n,r)}const xe=()=>{l(1,_=null),P("preview_close")},et=r=>we(r);function tt(r,M){ne[r?"unshift":"push"](()=>{X[M]=r,l(26,X)})}const lt=r=>l(1,_=r);function nt(r){ne[r?"unshift":"push"](()=>{q=r,l(22,q)})}function it(r){fe=r,l(29,fe)}const ot=r=>P("upload",r.detail),rt=r=>P("error",r.detail),st=()=>l(0,f=[]),ft=r=>{_===null&&d&&P("preview_open"),l(1,_=r)},ut=r=>ze(r);function at(r){ne[r?"unshift":"push"](()=>{oe=r,l(24,oe)})}return n.$$set=r=>{"show_label"in r&&l(2,s=r.show_label),"label"in r&&l(3,u=r.label),"value"in r&&l(0,f=r.value),"columns"in r&&l(36,h=r.columns),"rows"in r&&l(4,a=r.rows),"height"in r&&l(5,p=r.height),"preview"in r&&l(37,c=r.preview),"allow_preview"in r&&l(6,d=r.allow_preview),"object_fit"in r&&l(7,b=r.object_fit),"show_share_button"in r&&l(8,z=r.show_share_button),"show_download_button"in r&&l(9,v=r.show_download_button),"i18n"in r&&l(10,w=r.i18n),"selected_index"in r&&l(1,_=r.selected_index),"interactive"in r&&l(11,R=r.interactive),"_fetch"in r&&l(38,k=r._fetch),"mode"in r&&l(12,y=r.mode),"show_fullscreen_button"in r&&l(13,O=r.show_fullscreen_button),"display_icon_button_wrapper_top_corner"in r&&l(14,V=r.display_icon_button_wrapper_top_corner),"fullscreen"in r&&l(15,L=r.fullscreen),"root"in r&&l(16,Q=r.root),"file_types"in r&&l(17,he=r.file_types),"max_file_size"in r&&l(18,de=r.max_file_size),"upload"in r&&l(19,ge=r.upload),"stream_handler"in r&&l(20,be=r.stream_handler)},n.$$.update=()=>{if(n.$$.dirty[0]&1|n.$$.dirty[1]&256&&l(39,Y=f==null||f.length===0?!0:Y),n.$$.dirty[0]&1&&l(21,W=f==null?null:f.map(r=>"video"in r?{video:r.video,caption:r.caption}:"image"in r?{image:r.image,caption:r.caption}:{})),n.$$.dirty[0]&2097152|n.$$.dirty[1]&32)if(W&&h){const r=W.length;Array.isArray(h)?l(25,ee=h.map(M=>Math.min(M,r))):l(25,ee=Math.min(h,r))}else l(25,ee=h);n.$$.dirty[0]&3|n.$$.dirty[1]&832&&(vt(re,f)||(Y?(l(1,_=c&&f?.length?0:null),l(39,Y=!1)):_!==null&&f!==null?l(1,_=Math.max(0,Math.min(_,f.length-1))):l(1,_=null),P("change"),l(40,re=f))),n.$$.dirty[0]&2097154|n.$$.dirty[1]&1024&&_!==se&&(l(41,se=_),_!==null&&(W!=null&&l(1,_=Math.max(0,Math.min(_,W.length-1))),P("select",{index:_,value:W?.[_]}))),n.$$.dirty[0]&2097154&&(t=((_??0)+(W?.length??0)-1)%(W?.length??0)),n.$$.dirty[0]&2097154&&(i=((_??0)+1)%(W?.length??0)),n.$$.dirty[0]&66&&d&&Xe(_),n.$$.dirty[0]&2097154&&l(30,o=_!=null&&W!=null?W[_]:null),n.$$.dirty[0]&2097152&&Z(),n.$$.dirty[0]&4194304&&q&&Z()},[f,_,s,u,a,p,d,b,z,v,w,R,y,O,V,L,Q,he,de,ge,be,W,q,pe,oe,ee,X,ke,ye,fe,o,P,we,Ve,ve,ze,h,c,k,Y,re,se,Je,Ke,Qe,Ye,Ze,xe,et,tt,lt,nt,it,ot,rt,st,ft,ut,at]}class ul extends zt{constructor(e){super(),It(this,e,Qt,Kt,Ut,{show_label:2,label:3,value:0,columns:36,rows:4,height:5,preview:37,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9,i18n:10,selected_index:1,interactive:11,_fetch:38,mode:12,show_fullscreen_button:13,display_icon_button_wrapper_top_corner:14,fullscreen:15,root:16,file_types:17,max_file_size:18,upload:19,stream_handler:20},null,[-1,-1,-1])}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),j()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),j()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),j()}get columns(){return this.$$.ctx[36]}set columns(e){this.$$set({columns:e}),j()}get rows(){return this.$$.ctx[4]}set rows(e){this.$$set({rows:e}),j()}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),j()}get preview(){return this.$$.ctx[37]}set preview(e){this.$$set({preview:e}),j()}get allow_preview(){return this.$$.ctx[6]}set allow_preview(e){this.$$set({allow_preview:e}),j()}get object_fit(){return this.$$.ctx[7]}set object_fit(e){this.$$set({object_fit:e}),j()}get show_share_button(){return this.$$.ctx[8]}set show_share_button(e){this.$$set({show_share_button:e}),j()}get show_download_button(){return this.$$.ctx[9]}set show_download_button(e){this.$$set({show_download_button:e}),j()}get i18n(){return this.$$.ctx[10]}set i18n(e){this.$$set({i18n:e}),j()}get selected_index(){return this.$$.ctx[1]}set selected_index(e){this.$$set({selected_index:e}),j()}get interactive(){return this.$$.ctx[11]}set interactive(e){this.$$set({interactive:e}),j()}get _fetch(){return this.$$.ctx[38]}set _fetch(e){this.$$set({_fetch:e}),j()}get mode(){return this.$$.ctx[12]}set mode(e){this.$$set({mode:e}),j()}get show_fullscreen_button(){return this.$$.ctx[13]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),j()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[14]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),j()}get fullscreen(){return this.$$.ctx[15]}set fullscreen(e){this.$$set({fullscreen:e}),j()}get root(){return this.$$.ctx[16]}set root(e){this.$$set({root:e}),j()}get file_types(){return this.$$.ctx[17]}set file_types(e){this.$$set({file_types:e}),j()}get max_file_size(){return this.$$.ctx[18]}set max_file_size(e){this.$$set({max_file_size:e}),j()}get upload(){return this.$$.ctx[19]}set upload(e){this.$$set({upload:e}),j()}get stream_handler(){return this.$$.ctx[20]}set stream_handler(e){this.$$set({stream_handler:e}),j()}}export{ul as default};
//# sourceMappingURL=Gallery-Cjii2j9G.js.map
