import{c as ce,B as he,d as y,E as ge,I as me,F as be}from"./FullscreenButton-BoNylw4k.js";import{S as de}from"./StreamingBar-DuwzVLwP.js";import"./index-sqki5BVz.js";import"./MarkdownCode-azIzFEvA.js";import"./prism-python-BVLPtsXx.js";import"./init-CYs0NWnS.js";import"./svelte/svelte.js";const{SvelteComponent:we,add_flush_callback:ke,append:A,assign:ve,attr:k,bind:Be,binding_callbacks:x,check_outros:ee,create_component:z,destroy_component:E,destroy_each:le,detach:I,element:C,empty:te,ensure_array_like:G,flush:w,get_spread_object:Ie,get_spread_update:Me,group_outros:ne,init:Se,insert:M,listen:W,mount_component:F,run_all:qe,safe_not_equal:ze,set_data:Ee,set_style:U,space:j,src_url_equal:H,text:Fe,toggle_class:q,transition_in:v,transition_out:B}=window.__gradio__svelte__internal;function V(t,e,n){const l=t.slice();return l[32]=e[n],l[34]=n,l}function X(t,e,n){const l=t.slice();return l[32]=e[n],l[34]=n,l}function Ne(t){let e,n,l,s,a,i,f,_,b;n=new me({props:{$$slots:{default:[Ce]},$$scope:{ctx:t}}});let m=G(t[15]?t[15]?.annotations:[]),c=[];for(let r=0;r<m.length;r+=1)c[r]=Z(X(t,m,r));let h=t[6]&&t[15]&&p(t);return{c(){e=C("div"),z(n.$$.fragment),l=j(),s=C("img"),i=j();for(let r=0;r<c.length;r+=1)c[r].c();f=j(),h&&h.c(),_=te(),k(s,"class","base-image svelte-303fln"),H(s.src,a=t[15]?t[15].image.url:null)||k(s,"src",a),k(s,"alt","the base file that is annotated"),q(s,"fit-height",t[7]&&!t[18]),k(e,"class","image-container svelte-303fln")},m(r,u){M(r,e,u),F(n,e,null),A(e,l),A(e,s),A(e,i);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);t[25](e),M(r,f,u),h&&h.m(r,u),M(r,_,u),b=!0},p(r,u){const g={};if(u[0]&278528|u[1]&32&&(g.$$scope={dirty:u,ctx:r}),n.$set(g),(!b||u[0]&32768&&!H(s.src,a=r[15]?r[15].image.url:null))&&k(s,"src",a),(!b||u[0]&262272)&&q(s,"fit-height",r[7]&&!r[18]),u[0]&360976){m=G(r[15]?r[15]?.annotations:[]);let d;for(d=0;d<m.length;d+=1){const S=X(r,m,d);c[d]?c[d].p(S,u):(c[d]=Z(S),c[d].c(),c[d].m(e,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=m.length}r[6]&&r[15]?h?h.p(r,u):(h=p(r),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},i(r){b||(v(n.$$.fragment,r),b=!0)},o(r){B(n.$$.fragment,r),b=!1},d(r){r&&(I(e),I(f),I(_)),E(n),le(c,r),t[25](null),h&&h.d(r)}}}function je(t){let e,n;return e=new ge({props:{size:"large",unpadded_box:!0,$$slots:{default:[Le]},$$scope:{ctx:t}}}),{c(){z(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},p(l,s){const a={};s[1]&32&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Y(t){let e,n;return e=new be({props:{fullscreen:t[18]}}),e.$on("fullscreen",t[24]),{c(){z(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},p(l,s){const a={};s[0]&262144&&(a.fullscreen=l[18]),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Ce(t){let e,n,l=t[14]&&Y(t);return{c(){l&&l.c(),e=te()},m(s,a){l&&l.m(s,a),M(s,e,a),n=!0},p(s,a){s[14]?l?(l.p(s,a),a[0]&16384&&v(l,1)):(l=Y(s),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ne(),B(l,1,1,()=>{l=null}),ee())},i(s){n||(v(l),n=!0)},o(s){B(l),n=!1},d(s){s&&I(e),l&&l.d(s)}}}function Z(t){let e,n,l,s;return{c(){e=C("img"),k(e,"alt",n="segmentation mask identifying "+t[4]+" within the uploaded file"),k(e,"class","mask fit-height svelte-303fln"),H(e.src,l=t[32].image.url)||k(e,"src",l),k(e,"style",s=t[9]&&t[32].label in t[9]?null:`filter: hue-rotate(${Math.round(t[34]*360/t[15]?.annotations.length)}deg);`),q(e,"fit-height",!t[18]),q(e,"active",t[16]==t[32].label),q(e,"inactive",t[16]!=t[32].label&&t[16]!=null)},m(a,i){M(a,e,i)},p(a,i){i[0]&16&&n!==(n="segmentation mask identifying "+a[4]+" within the uploaded file")&&k(e,"alt",n),i[0]&32768&&!H(e.src,l=a[32].image.url)&&k(e,"src",l),i[0]&33280&&s!==(s=a[9]&&a[32].label in a[9]?null:`filter: hue-rotate(${Math.round(a[34]*360/a[15]?.annotations.length)}deg);`)&&k(e,"style",s),i[0]&262144&&q(e,"fit-height",!a[18]),i[0]&98304&&q(e,"active",a[16]==a[32].label),i[0]&98304&&q(e,"inactive",a[16]!=a[32].label&&a[16]!=null)},d(a){a&&I(e)}}}function p(t){let e,n=G(t[15].annotations),l=[];for(let s=0;s<n.length;s+=1)l[s]=$(V(t,n,s));return{c(){e=C("div");for(let s=0;s<l.length;s+=1)l[s].c();k(e,"class","legend svelte-303fln")},m(s,a){M(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a[0]&3703296){n=G(s[15].annotations);let i;for(i=0;i<n.length;i+=1){const f=V(s,n,i);l[i]?l[i].p(f,a):(l[i]=$(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&I(e),le(l,s)}}}function $(t){let e,n=t[32].label+"",l,s,a,i;function f(){return t[26](t[32])}function _(){return t[27](t[32])}function b(){return t[30](t[34],t[32])}return{c(){e=C("button"),l=Fe(n),s=j(),k(e,"class","legend-item svelte-303fln"),U(e,"background-color",t[9]&&t[32].label in t[9]?t[9][t[32].label]+"88":`hsla(${Math.round(t[34]*360/t[15].annotations.length)}, 100%, 50%, 0.3)`)},m(m,c){M(m,e,c),A(e,l),A(e,s),a||(i=[W(e,"mouseover",f),W(e,"focus",_),W(e,"mouseout",t[28]),W(e,"blur",t[29]),W(e,"click",b)],a=!0)},p(m,c){t=m,c[0]&32768&&n!==(n=t[32].label+"")&&Ee(l,n),c[0]&33280&&U(e,"background-color",t[9]&&t[32].label in t[9]?t[9][t[32].label]+"88":`hsla(${Math.round(t[34]*360/t[15].annotations.length)}, 100%, 50%, 0.3)`)},d(m){m&&I(e),a=!1,qe(i)}}}function Le(t){let e,n;return e=new y({}),{c(){z(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function We(t){let e,n,l,s,a,i,f,_;const b=[{autoscroll:t[3].autoscroll},{i18n:t[3].i18n},t[13]];let m={};for(let u=0;u<b.length;u+=1)m=ve(m,b[u]);e=new de({props:m}),l=new he({props:{show_label:t[5],Icon:y,label:t[4]||t[3].i18n("image.image")}});const c=[je,Ne],h=[];function r(u,g){return u[15]==null?0:1}return i=r(t),f=h[i]=c[i](t),{c(){z(e.$$.fragment),n=j(),z(l.$$.fragment),s=j(),a=C("div"),f.c(),k(a,"class","container svelte-303fln")},m(u,g){F(e,u,g),M(u,n,g),F(l,u,g),M(u,s,g),M(u,a,g),h[i].m(a,null),_=!0},p(u,g){const d=g[0]&8200?Me(b,[g[0]&8&&{autoscroll:u[3].autoscroll},g[0]&8&&{i18n:u[3].i18n},g[0]&8192&&Ie(u[13])]):{};e.$set(d);const S={};g[0]&32&&(S.show_label=u[5]),g[0]&24&&(S.label=u[4]||u[3].i18n("image.image")),l.$set(S);let N=i;i=r(u),i===N?h[i].p(u,g):(ne(),B(h[N],1,1,()=>{h[N]=null}),ee(),f=h[i],f?f.p(u,g):(f=h[i]=c[i](u),f.c()),v(f,1),f.m(a,null))},i(u){_||(v(e.$$.fragment,u),v(l.$$.fragment,u),v(f),_=!0)},o(u){B(e.$$.fragment,u),B(l.$$.fragment,u),B(f),_=!1},d(u){u&&(I(n),I(s),I(a)),E(e,u),E(l,u),h[i].d()}}}function Ae(t){let e,n,l;function s(i){t[31](i)}let a={visible:t[2],elem_id:t[0],elem_classes:t[1],padding:!1,height:t[7],width:t[8],allow_overflow:!1,container:t[10],scale:t[11],min_width:t[12],$$slots:{default:[We]},$$scope:{ctx:t}};return t[18]!==void 0&&(a.fullscreen=t[18]),e=new ce({props:a}),x.push(()=>Be(e,"fullscreen",s)),{c(){z(e.$$.fragment)},m(i,f){F(e,i,f),l=!0},p(i,f){const _={};f[0]&4&&(_.visible=i[2]),f[0]&1&&(_.elem_id=i[0]),f[0]&2&&(_.elem_classes=i[1]),f[0]&128&&(_.height=i[7]),f[0]&256&&(_.width=i[8]),f[0]&1024&&(_.container=i[10]),f[0]&2048&&(_.scale=i[11]),f[0]&4096&&(_.min_width=i[12]),f[0]&516856|f[1]&32&&(_.$$scope={dirty:f,ctx:i}),!n&&f[0]&262144&&(n=!0,_.fullscreen=i[18],ke(()=>n=!1)),e.$set(_)},i(i){l||(v(e.$$.fragment,i),l=!0)},o(i){B(e.$$.fragment,i),l=!1},d(i){E(e,i)}}}function De(t,e,n){let{elem_id:l=""}=e,{elem_classes:s=[]}=e,{visible:a=!0}=e,{value:i=null}=e,f=null,_=null,{gradio:b}=e,{label:m=b.i18n("annotated_image.annotated_image")}=e,{show_label:c=!0}=e,{show_legend:h=!0}=e,{height:r}=e,{width:u}=e,{color_map:g}=e,{container:d=!0}=e,{scale:S=null}=e,{min_width:N=void 0}=e,J=null,{loading_status:Q}=e,{show_fullscreen_button:R=!0}=e,K,D=!1;function O(o){n(16,J=o)}function P(){n(16,J=null)}function T(o,L){b.dispatch("select",{value:m,index:o})}const ie=({detail:o})=>{n(18,D=o)};function se(o){x[o?"unshift":"push"](()=>{K=o,n(17,K)})}const ae=o=>O(o.label),oe=o=>O(o.label),ue=()=>P(),re=()=>P(),fe=(o,L)=>T(o,L.label);function _e(o){D=o,n(18,D)}return t.$$set=o=>{"elem_id"in o&&n(0,l=o.elem_id),"elem_classes"in o&&n(1,s=o.elem_classes),"visible"in o&&n(2,a=o.visible),"value"in o&&n(22,i=o.value),"gradio"in o&&n(3,b=o.gradio),"label"in o&&n(4,m=o.label),"show_label"in o&&n(5,c=o.show_label),"show_legend"in o&&n(6,h=o.show_legend),"height"in o&&n(7,r=o.height),"width"in o&&n(8,u=o.width),"color_map"in o&&n(9,g=o.color_map),"container"in o&&n(10,d=o.container),"scale"in o&&n(11,S=o.scale),"min_width"in o&&n(12,N=o.min_width),"loading_status"in o&&n(13,Q=o.loading_status),"show_fullscreen_button"in o&&n(14,R=o.show_fullscreen_button)},t.$$.update=()=>{if(t.$$.dirty[0]&12582920)if(i!==f&&(n(23,f=i),b.dispatch("change")),i){const o={image:i.image,annotations:i.annotations.map(L=>({image:L.image,label:L.label}))};n(15,_=o)}else n(15,_=null)},[l,s,a,b,m,c,h,r,u,g,d,S,N,Q,R,_,J,K,D,O,P,T,i,f,ie,se,ae,oe,ue,re,fe,_e]}class Re extends we{constructor(e){super(),Se(this,e,De,Ae,ze,{elem_id:0,elem_classes:1,visible:2,value:22,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,loading_status:13,show_fullscreen_button:14},null,[-1,-1])}get elem_id(){return this.$$.ctx[0]}set elem_id(e){this.$$set({elem_id:e}),w()}get elem_classes(){return this.$$.ctx[1]}set elem_classes(e){this.$$set({elem_classes:e}),w()}get visible(){return this.$$.ctx[2]}set visible(e){this.$$set({visible:e}),w()}get value(){return this.$$.ctx[22]}set value(e){this.$$set({value:e}),w()}get gradio(){return this.$$.ctx[3]}set gradio(e){this.$$set({gradio:e}),w()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),w()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),w()}get show_legend(){return this.$$.ctx[6]}set show_legend(e){this.$$set({show_legend:e}),w()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),w()}get width(){return this.$$.ctx[8]}set width(e){this.$$set({width:e}),w()}get color_map(){return this.$$.ctx[9]}set color_map(e){this.$$set({color_map:e}),w()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),w()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),w()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),w()}get loading_status(){return this.$$.ctx[13]}set loading_status(e){this.$$set({loading_status:e}),w()}get show_fullscreen_button(){return this.$$.ctx[14]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),w()}}export{Re as default};
//# sourceMappingURL=Index-C9BnCBra.js.map
