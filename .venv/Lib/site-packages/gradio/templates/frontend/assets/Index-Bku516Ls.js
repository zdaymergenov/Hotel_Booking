import{e as Wt,I as Ft,g as Gt,a as Kt,C as qe,f as He,T as Qt,w as Vt,c as Xt}from"./FullscreenButton-BoNylw4k.js";import{f as ae,S as Yt}from"./StreamingBar-DuwzVLwP.js";import{BaseDropdownOptions as ot,BaseDropdown as Zt}from"./Index-lXBBoEPp.js";import{default as ss}from"./Example-Bx762nxc.js";import"./MarkdownCode-azIzFEvA.js";import"./index-sqki5BVz.js";import"./svelte/svelte.js";import"./prism-python-BVLPtsXx.js";import"./init-CYs0NWnS.js";import"./Example-CXKuTmQ6.js";const{SvelteComponent:xt,append:Ie,attr:we,detach:$t,element:ye,flush:Be,init:en,insert:tn,listen:nn,noop:Je,safe_not_equal:sn,set_data:ln,set_style:on,space:rn,text:un}=window.__gradio__svelte__internal,{createEventDispatcher:an}=window.__gradio__svelte__internal;function fn(n){let e,t,s,i,l,r,a;return{c(){e=ye("div"),t=ye("button"),s=rn(),i=ye("span"),l=un(n[1]),we(t,"role","switch"),we(t,"aria-checked",n[0]),t.disabled=n[2],we(t,"class","svelte-1wr5wa"),we(e,"class","s s--slider svelte-1wr5wa"),on(e,"font-size","var(--font-size-sm)px")},m(u,_){tn(u,e,_),Ie(e,t),Ie(e,s),Ie(e,i),Ie(i,l),r||(a=nn(t,"click",n[3]),r=!0)},p(u,[_]){_&1&&we(t,"aria-checked",u[0]),_&4&&(t.disabled=u[2]),_&2&&ln(l,u[1])},i:Je,o:Je,d(u){u&&$t(e),r=!1,a()}}}function _n(n,e,t){let{label:s}=e,{checked:i=!1}=e,{disabled:l=!1}=e;const r=an();function a(u){const f=u.target.getAttribute("aria-checked");t(0,i=f!=="true"),r("click",{checked:i})}return n.$$set=u=>{"label"in u&&t(1,s=u.label),"checked"in u&&t(0,i=u.checked),"disabled"in u&&t(2,l=u.disabled)},[i,s,l,a]}class cn extends xt{constructor(e){super(),en(this,e,_n,fn,sn,{label:1,checked:0,disabled:2})}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),Be()}get checked(){return this.$$.ctx[0]}set checked(e){this.$$set({checked:e}),Be()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),Be()}}const{SvelteComponent:hn,add_flush_callback:rt,add_render_callback:De,append:N,attr:k,bind:ut,binding_callbacks:ke,check_outros:ee,create_bidirectional_transition:fe,create_component:ie,destroy_component:oe,destroy_each:dn,detach:Y,element:P,ensure_array_like:je,flush:U,group_outros:te,init:gn,insert:Z,listen:F,mount_component:re,noop:ze,run_all:at,safe_not_equal:mn,set_data:bn,set_input_value:ge,set_style:Ue,space:x,text:pn,toggle_class:X,transition_in:p,transition_out:C}=window.__gradio__svelte__internal,{createEventDispatcher:wn,tick:he,onMount:kn}=window.__gradio__svelte__internal;function We(n,e,t){const s=n.slice();return s[77]=e[t],s[78]=e,s[79]=t,s}function Fe(n){let e,t;return e=new Ft({props:{$$slots:{default:[vn]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},m(s,i){re(e,s,i),t=!0},p(s,i){const l={};i[0]&16777216|i[2]&262144&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function vn(n){let e,t;return e=new Kt({props:{Icon:n[24]?qe:He,label:n[24]?"Copied":"Copy"}}),e.$on("click",n[38]),{c(){ie(e.$$.fragment)},m(s,i){re(e,s,i),t=!0},p(s,i){const l={};i[0]&16777216&&(l.Icon=s[24]?qe:He),i[0]&16777216&&(l.label=s[24]?"Copied":"Copy"),e.$set(l)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function Cn(n){let e;return{c(){e=pn(n[4])},m(t,s){Z(t,e,s)},p(t,s){s[0]&16&&bn(e,t[4])},d(t){t&&Y(e)}}}function Ge(n){let e,t,s,i;function l(a){n[44](a)}let r={label:"Plain Text",disabled:n[28]||n[27]};return n[14]!==void 0&&(r.checked=n[14]),t=new cn({props:r}),ke.push(()=>ut(t,"checked",l)),t.$on("click",n[45]),{c(){e=P("div"),ie(t.$$.fragment),k(e,"class","switch-container top-switch svelte-1de6p8m"),X(e,"switch-disabled",n[28]||n[27])},m(a,u){Z(a,e,u),re(t,e,null),i=!0},p(a,u){const _={};u[0]&402653184&&(_.disabled=a[28]||a[27]),!s&&u[0]&16384&&(s=!0,_.checked=a[14],rt(()=>s=!1)),t.$set(_),(!i||u[0]&402653184)&&X(e,"switch-disabled",a[28]||a[27])},i(a){i||(p(t.$$.fragment,a),i=!0)},o(a){C(t.$$.fragment,a),i=!1},d(a){a&&Y(e),oe(t)}}}function Sn(n){let e,t,s,i,l,r,a,u=n[28]&&Ke(),_=n[18]&&Qe(n);return{c(){e=P("div"),u&&u.c(),t=x(),s=P("textarea"),i=x(),_&&_.c(),k(s,"data-testid","textbox"),k(s,"placeholder",n[3]),k(s,"rows",5),s.disabled=n[6],k(s,"class","svelte-1de6p8m"),k(e,"class","textarea-container svelte-1de6p8m"),X(e,"loading",n[28])},m(f,g){Z(f,e,g),u&&u.m(e,null),N(e,t),N(e,s),ge(s,n[25]),n[66](s),N(e,i),_&&_.m(e,null),l=!0,r||(a=[F(s,"input",n[62]),F(s,"input",n[63]),F(s,"focus",n[64]),F(s,"keydown",n[65])],r=!0)},p(f,g){f[28]?u?g[0]&268435456&&p(u,1):(u=Ke(),u.c(),p(u,1),u.m(e,t)):u&&(te(),C(u,1,1,()=>{u=null}),ee()),(!l||g[0]&8)&&k(s,"placeholder",f[3]),(!l||g[0]&64)&&(s.disabled=f[6]),g[0]&33554432&&ge(s,f[25]),f[18]?_?(_.p(f,g),g[0]&262144&&p(_,1)):(_=Qe(f),_.c(),p(_,1),_.m(e,null)):_&&(te(),C(_,1,1,()=>{_=null}),ee()),(!l||g[0]&268435456)&&X(e,"loading",f[28])},i(f){l||(p(u),p(_),l=!0)},o(f){C(u),C(_),l=!1},d(f){f&&Y(e),u&&u.d(),n[66](null),_&&_.d(),r=!1,at(a)}}}function In(n){let e,t,s,i=n[27]&&Ve(),l=je(n[15]),r=[];for(let u=0;u<l.length;u+=1)r[u]=Ze(We(n,l,u));const a=u=>C(r[u],1,1,()=>{r[u]=null});return{c(){e=P("div"),i&&i.c(),t=x();for(let u=0;u<r.length;u+=1)r[u].c();k(e,"class","dialogue-container svelte-1de6p8m"),X(e,"loading",n[27])},m(u,_){Z(u,e,_),i&&i.m(e,null),N(e,t);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);n[61](e),s=!0},p(u,_){if(u[27]?i?_[0]&134217728&&p(i,1):(i=Ve(),i.c(),p(i,1),i.m(e,t)):i&&(te(),C(i,1,1,()=>{i=null}),ee()),_[0]&1690141262|_[1]&31){l=je(u[15]);let f;for(f=0;f<l.length;f+=1){const g=We(u,l,f);r[f]?(r[f].p(g,_),p(r[f],1)):(r[f]=Ze(g),r[f].c(),p(r[f],1),r[f].m(e,null))}for(te(),f=l.length;f<r.length;f+=1)a(f);ee()}(!s||_[0]&134217728)&&X(e,"loading",u[27])},i(u){if(!s){p(i);for(let _=0;_<l.length;_+=1)p(r[_]);s=!0}},o(u){C(i),r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)C(r[_]);s=!1},d(u){u&&Y(e),i&&i.d(),dn(r,u),n[61](null)}}}function Ke(n){let e,t,s;return{c(){e=P("div"),e.innerHTML='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to plain text...</div>',k(e,"class","loading-overlay svelte-1de6p8m")},m(i,l){Z(i,e,l),s=!0},i(i){s||(i&&De(()=>{s&&(t||(t=fe(e,ae,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=fe(e,ae,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&Y(e),i&&t&&t.end()}}}function Qe(n){let e,t,s,i;return t=new ot({props:{choices:n[2].map(tt),filtered_indices:n[21].map(n[67]),active_index:n[21].map(n[68])[n[20]],show_options:!0}}),t.$on("change",n[69]),{c(){e=P("div"),ie(t.$$.fragment),k(e,"id","tag-menu"),k(e,"class","tag-menu-plain-text svelte-1de6p8m")},m(l,r){Z(l,e,r),re(t,e,null),i=!0},p(l,r){const a={};r[0]&4&&(a.choices=l[2].map(tt)),r[0]&2097156&&(a.filtered_indices=l[21].map(l[67])),r[0]&3145732&&(a.active_index=l[21].map(l[68])[l[20]]),t.$set(a)},i(l){i||(p(t.$$.fragment,l),l&&De(()=>{i&&(s||(s=fe(e,ae,{duration:100},!0)),s.run(1))}),i=!0)},o(l){C(t.$$.fragment,l),l&&(s||(s=fe(e,ae,{duration:100},!1)),s.run(0)),i=!1},d(l){l&&Y(e),oe(t),l&&s&&s.end()}}}function Ve(n){let e,t,s;return{c(){e=P("div"),e.innerHTML='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to dialogue format...</div>',k(e,"class","loading-overlay svelte-1de6p8m")},m(i,l){Z(i,e,l),s=!0},i(i){s||(i&&De(()=>{s&&(t||(t=fe(e,ae,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=fe(e,ae,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&Y(e),i&&t&&t.end()}}}function Dn(n){let e,t,s;function i(a){n[47](a,n[77])}function l(){return n[48](n[79],n[77])}let r={choices:n[1].map($e),show_label:!1,container:!0,label:""};return n[77].speaker!==void 0&&(r.value=n[77].speaker),e=new Zt({props:r}),ke.push(()=>ut(e,"value",i)),e.$on("change",l),{c(){ie(e.$$.fragment)},m(a,u){re(e,a,u),s=!0},p(a,u){n=a;const _={};u[0]&2&&(_.choices=n[1].map($e)),!t&&u[0]&32768&&(t=!0,_.value=n[77].speaker,rt(()=>t=!1)),e.$set(_)},i(a){s||(p(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){oe(e,a)}}}function Tn(n){let e,t,s;function i(){n[46].call(e,n[78],n[79])}return{c(){e=P("textarea"),e.disabled=n[6],k(e,"rows","1"),e.readOnly=!0,k(e,"class","svelte-1de6p8m")},m(l,r){Z(l,e,r),ge(e,n[77].speaker),t||(s=F(e,"input",i),t=!0)},p(l,r){n=l,r[0]&64&&(e.disabled=n[6]),r[0]&32768&&ge(e,n[77].speaker)},i:ze,o:ze,d(l){l&&Y(e),t=!1,s()}}}function Xe(n){let e,t,s,i;return t=new ot({props:{choices:n[2].map(et),filtered_indices:n[21].map(n[56]),active_index:n[21].map(n[57])[n[20]],show_options:!0,offset_from_top:n[23],from_top:!0}}),t.$on("change",n[58]),{c(){e=P("div"),ie(t.$$.fragment),k(e,"id","tag-menu"),k(e,"class","tag-menu svelte-1de6p8m")},m(l,r){Z(l,e,r),re(t,e,null),i=!0},p(l,r){const a={};r[0]&4&&(a.choices=l[2].map(et)),r[0]&2097156&&(a.filtered_indices=l[21].map(l[56])),r[0]&3145732&&(a.active_index=l[21].map(l[57])[l[20]]),r[0]&8388608&&(a.offset_from_top=l[23]),t.$set(a)},i(l){i||(p(t.$$.fragment,l),l&&De(()=>{i&&(s||(s=fe(e,ae,{duration:100},!0)),s.run(1))}),i=!0)},o(l){C(t.$$.fragment,l),l&&(s||(s=fe(e,ae,{duration:100},!1)),s.run(0)),i=!1},d(l){l&&Y(e),oe(t),l&&s&&s.end()}}}function Ye(n){let e,t,s,i,l,r;s=new Vt({});function a(){return n[59](n[79])}return{c(){e=P("div"),t=P("button"),ie(s.$$.fragment),k(t,"class","add-button svelte-1de6p8m"),k(t,"aria-label","Add new line"),t.disabled=n[6],k(e,"class","svelte-1de6p8m"),X(e,"action-column",n[79]==0),X(e,"hidden",n[6])},m(u,_){Z(u,e,_),N(e,t),re(s,t,null),i=!0,l||(r=F(t,"click",a),l=!0)},p(u,_){n=u,(!i||_[0]&64)&&(t.disabled=n[6]),(!i||_[0]&64)&&X(e,"hidden",n[6])},i(u){i||(p(s.$$.fragment,u),i=!0)},o(u){C(s.$$.fragment,u),i=!1},d(u){u&&Y(e),oe(s),l=!1,r()}}}function Ze(n){let e,t,s,i,l,r,a,u,_=n[79],f,g,m,v,j,M,K,w,h,S;const b=[Tn,Dn],O=[];function R(B,L){return B[6]?0:1}s=R(n),i=O[s]=b[s](n);function z(){return n[49](n[77])}function y(){n[51].call(u,n[78],n[79])}function G(...B){return n[52](n[79],...B)}function I(...B){return n[53](n[79],...B)}function W(...B){return n[54](n[79],...B)}const Q=()=>n[55](u,_),_e=()=>n[55](null,_);let D=n[18]&&n[19]===n[79]&&Xe(n),T=(n[9]==null||n[9]&&n[79]<n[9]-1)&&Ye(n);M=new Qt({});function q(){return n[60](n[79])}return{c(){e=P("div"),t=P("div"),i.c(),l=x(),r=P("div"),a=P("div"),u=P("textarea"),f=x(),D&&D.c(),g=x(),T&&T.c(),m=x(),v=P("div"),j=P("button"),ie(M.$$.fragment),K=x(),k(t,"class","speaker-column svelte-1de6p8m"),k(t,"role","button"),k(t,"tabindex","0"),k(u,"placeholder",n[3]),u.disabled=n[6],k(u,"rows","1"),k(u,"class","svelte-1de6p8m"),k(a,"class","input-container svelte-1de6p8m"),k(r,"class","text-column svelte-1de6p8m"),k(j,"class","delete-button svelte-1de6p8m"),k(j,"aria-label","Remove current line"),j.disabled=n[6],k(v,"class","action-column svelte-1de6p8m"),X(v,"hidden",n[6]||n[79]==0),k(e,"class","dialogue-line svelte-1de6p8m"),Ue(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},m(B,L){Z(B,e,L),N(e,t),O[s].m(t,null),N(e,l),N(e,r),N(r,a),N(a,u),ge(u,n[77].text),Q(),N(a,f),D&&D.m(a,null),N(e,g),T&&T.m(e,null),N(e,m),N(e,v),N(v,j),re(M,j,null),N(e,K),w=!0,h||(S=[F(t,"mouseenter",z),F(t,"mouseleave",n[50]),F(u,"input",y),F(u,"input",G),F(u,"focus",I),F(u,"keydown",W),F(j,"click",q)],h=!0)},p(B,L){n=B;let c=s;s=R(n),s===c?O[s].p(n,L):(te(),C(O[c],1,1,()=>{O[c]=null}),ee(),i=O[s],i?i.p(n,L):(i=O[s]=b[s](n),i.c()),p(i,1),i.m(t,null)),(!w||L[0]&8)&&k(u,"placeholder",n[3]),(!w||L[0]&64)&&(u.disabled=n[6]),L[0]&32768&&ge(u,n[77].text),_!==n[79]&&(_e(),_=n[79],Q()),n[18]&&n[19]===n[79]?D?(D.p(n,L),L[0]&786432&&p(D,1)):(D=Xe(n),D.c(),p(D,1),D.m(a,null)):D&&(te(),C(D,1,1,()=>{D=null}),ee()),n[9]==null||n[9]&&n[79]<n[9]-1?T?(T.p(n,L),L[0]&512&&p(T,1)):(T=Ye(n),T.c(),p(T,1),T.m(e,m)):T&&(te(),C(T,1,1,()=>{T=null}),ee()),(!w||L[0]&64)&&(j.disabled=n[6]),(!w||L[0]&64)&&X(v,"hidden",n[6]||n[79]==0),(!w||L[0]&604012608)&&Ue(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},i(B){w||(p(i),p(D),p(T),p(M.$$.fragment,B),w=!0)},o(B){C(i),C(D),C(T),C(M.$$.fragment,B),w=!1},d(B){B&&Y(e),O[s].d(),_e(),D&&D.d(),T&&T.d(),oe(M),h=!1,at(S)}}}function xe(n){let e,t,s,i,l,r;return s=new Gt({}),{c(){e=P("div"),t=P("button"),ie(s.$$.fragment),k(t,"class","submit-button svelte-1de6p8m"),t.disabled=n[6],k(e,"class","submit-container svelte-1de6p8m")},m(a,u){Z(a,e,u),N(e,t),re(s,t,null),i=!0,l||(r=F(t,"click",n[39]),l=!0)},p(a,u){(!i||u[0]&64)&&(t.disabled=a[6])},i(a){i||(p(s.$$.fragment,a),i=!0)},o(a){C(s.$$.fragment,a),i=!1},d(a){a&&Y(e),oe(s),l=!1,r()}}}function On(n){let e,t,s,i,l,r,a,u,_,f,g,m=n[7]&&n[10]&&Fe(n);s=new Wt({props:{show_label:n[7],info:n[5],$$slots:{default:[Cn]},$$scope:{ctx:n}}});let v=n[1].length!==0&&n[12]==="both"&&Ge(n);const j=[In,Sn],M=[];function K(h,S){return!h[14]&&h[12]!=="text"?0:h[14]&&h[12]!=="dialogue"?1:-1}~(r=K(n))&&(a=M[r]=j[r](n));let w=n[11]&&!n[6]&&xe(n);return{c(){e=P("label"),m&&m.c(),t=x(),ie(s.$$.fragment),i=x(),v&&v.c(),l=x(),a&&a.c(),u=x(),w&&w.c(),k(e,"class","svelte-1de6p8m"),X(e,"container",n[8])},m(h,S){Z(h,e,S),m&&m.m(e,null),N(e,t),re(s,e,null),N(e,i),v&&v.m(e,null),N(e,l),~r&&M[r].m(e,null),N(e,u),w&&w.m(e,null),_=!0,f||(g=F(window,"click",n[36]),f=!0)},p(h,S){h[7]&&h[10]?m?(m.p(h,S),S[0]&1152&&p(m,1)):(m=Fe(h),m.c(),p(m,1),m.m(e,t)):m&&(te(),C(m,1,1,()=>{m=null}),ee());const b={};S[0]&128&&(b.show_label=h[7]),S[0]&32&&(b.info=h[5]),S[0]&16|S[2]&262144&&(b.$$scope={dirty:S,ctx:h}),s.$set(b),h[1].length!==0&&h[12]==="both"?v?(v.p(h,S),S[0]&4098&&p(v,1)):(v=Ge(h),v.c(),p(v,1),v.m(e,l)):v&&(te(),C(v,1,1,()=>{v=null}),ee());let O=r;r=K(h),r===O?~r&&M[r].p(h,S):(a&&(te(),C(M[O],1,1,()=>{M[O]=null}),ee()),~r?(a=M[r],a?a.p(h,S):(a=M[r]=j[r](h),a.c()),p(a,1),a.m(e,u)):a=null),h[11]&&!h[6]?w?(w.p(h,S),S[0]&2112&&p(w,1)):(w=xe(h),w.c(),p(w,1),w.m(e,null)):w&&(te(),C(w,1,1,()=>{w=null}),ee()),(!_||S[0]&256)&&X(e,"container",h[8])},i(h){_||(p(m),p(s.$$.fragment,h),p(v),p(a),p(w),_=!0)},o(h){C(m),C(s.$$.fragment,h),C(v),C(a),C(w),_=!1},d(h){h&&Y(e),m&&m.d(),oe(s),v&&v.d(),~r&&M[r].d(),w&&w.d(),f=!1,g()}}}function yn(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const $e=n=>[n,n],et=(n,e)=>[n,e],tt=(n,e)=>[n,e];function Bn(n,e,t){let{speakers:s=[]}=e,{tags:i=[]}=e,{value:l=[]}=e,{value_is_output:r=!1}=e,{placeholder:a=void 0}=e,{label:u}=e,{info:_=void 0}=e,{disabled:f=!1}=e,{show_label:g=!0}=e,{container:m=!0}=e,{max_lines:v=void 0}=e,{show_copy_button:j=!1}=e,{show_submit_button:M=!0}=e,{color_map:K=null}=e,{ui_mode:w="both"}=e,h=w==="text",{server:S}=e,b=[];l&&l.length&&typeof l!="string"?b=[...l]:l&&typeof l!="string"&&(b=[{speaker:`${s.length?s[0]:""}`,text:""}]);let O,R=!1,z=-1,y=0,G=[],I=[],W,Q=JSON.stringify(l),_e=0,D=!1,T,q="",B=null,L=!1,c=!1,ue=!1;const Le=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],ft={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let me={};s.length===0&&(h=!0,l="");function Ne(o){const d=s.length>0?s[0]:"";t(15,b=[...b.slice(0,o+1),{speaker:d,text:""},...b.slice(o+1)]),he().then(()=>{I[o+1]&&I[o+1].focus()})}function Pe(o){t(15,b=[...b.slice(0,o),...b.slice(o+1)])}function Ce(o,d,E){t(15,b[o][d]=E,b),t(15,b=[...b])}function be(o,d){const E=o.target||HTMLTextAreaElement;E&&!I[d]&&t(16,I[d]=E,I);const V=E.selectionStart||0,$=E.value;let ne=!1,se=-1;if($[V-1]===":"){t(19,z=d),se=V;const H=yn($,V);t(21,G=i.filter(J=>H===""||J.toLowerCase().includes(H.toLowerCase()))),ne=G.length>0,t(20,y=0)}else{const H=$.lastIndexOf(":",V-1);if(H>=0&&!$.substring(H+1,V).includes(" ")){t(19,z=d),se=H+1;const J=$.substring(H+1,V);t(21,G=i.filter(le=>J===""||le.toLowerCase().includes(J.toLowerCase()))),ne=G.length>0,t(20,y=0)}}if(ne&&se!==-1){t(18,R=!0);const H=E.getBoundingClientRect();if(O){const J=O.getBoundingClientRect();t(23,_e=J.top+H.height*(d+1.5))}}else t(18,R=!1)}async function Te(){const o=G[y];if(o){let d,E;h?(E=W,d=q):(E=I[z],d=b[z].text);const V=E?.selectionStart||0,$=d.lastIndexOf(":",V-1);if($>=0){const ne=d.substring(0,$),se=d.substring(V);if(h){const H=`${ne}${o} ${se}`;t(25,q=H),s.length===0?t(0,l=H):t(0,l=await S.unformat({text:H})),he().then(()=>{if(W){const J=ne.length+o.length+1;W.setSelectionRange(J,J),W.focus()}})}else{const H=ne.replace(/\[S\d+\]/g,"").trim(),J=`${H}${o} ${se}`;Ce(z,"text",J),he().then(()=>{const le=I[z];if(le){const ce=H.length+o.length+1;le.setSelectionRange(ce,ce),le.focus()}})}}t(18,R=!1),t(20,y=0)}}async function Oe(o){const d=i[o.detail.target.dataset.index];if(d){let E,V;h?(V=W,E=q):(V=I[z],E=b[z].text);const $=V?.selectionStart||0,ne=E.lastIndexOf(":",$-1);if(ne>=0){const se=E.substring(0,ne),H=E.substring($);if(h){const J=`${se}${d} ${H}`;t(25,q=J),s.length===0?t(0,l=J):t(0,l=await S.unformat({text:J})),he().then(()=>{if(W){const le=se.length+d.length+1;W.setSelectionRange(le,le),W.focus()}})}else{const J=se.replace(/\[S\d+\]/g,"").trim(),le=`${J}${d} ${H}`;Ce(z,"text",le),he().then(()=>{const ce=I[z];if(ce){const Re=J.length+d.length+1;ce.setSelectionRange(Re,Re),ce.focus()}})}}t(18,R=!1),t(20,y=0)}}function _t(o){if(R){const d=o.target,E=document.getElementById("tag-menu");E&&!E.contains(d)&&t(18,R=!1)}}const Se=wn();function ct(){Se("change",l),r||Se("input")}function ht(o){s.length!==0&&(t(43,ue=!0),t(0,l=[...o]))}async function pe(o){return typeof o=="string"?o:await S.format(o)}async function dt(){if("clipboard"in navigator){const o=await pe(l);await navigator.clipboard.writeText(o),Se("copy",{value:o}),gt()}}function gt(){t(24,D=!0),T&&clearTimeout(T),T=setTimeout(()=>{t(24,D=!1)},1e3)}async function mt(){h&&t(0,l=await S.unformat({text:q})),Se("submit")}kn(async()=>{if(typeof l=="string")t(25,q=l);else if(l&&l.length>0){const o=await pe(l);t(25,q=o)}else t(25,q="")});function bt(o){h=o,t(14,h)}const pt=async o=>{if(o.detail.checked){t(28,c=!0);try{t(25,q=await pe(b))}finally{t(28,c=!1)}}else{t(27,L=!0);try{t(0,l=await S.unformat({text:q})),t(15,b=[...l])}finally{t(27,L=!1)}}};function wt(o,d){o[d].speaker=this.value,t(15,b),t(0,l),t(42,Q),t(43,ue),t(14,h)}function kt(o,d){n.$$.not_equal(d.speaker,o)&&(d.speaker=o,t(15,b),t(0,l),t(42,Q),t(43,ue),t(14,h))}const vt=(o,d)=>Ce(o,"speaker",d.speaker),Ct=o=>f&&t(26,B=o.speaker),St=()=>f&&t(26,B=null);function It(o,d){o[d].text=this.value,t(15,b),t(0,l),t(42,Q),t(43,ue),t(14,h)}const Dt=(o,d)=>be(d,o),Tt=(o,d)=>be(d,o),Ot=(o,d)=>{d.key==="Escape"&&R?(t(18,R=!1),t(20,y=0),d.preventDefault()):R&&z===o&&(d.key==="ArrowDown"?(t(20,y=Math.min(y+1,G.length-1)),d.preventDefault()):d.key==="ArrowUp"?(t(20,y=Math.max(y-1,0)),d.preventDefault()):d.key==="Enter"&&(G[y]&&Te(),d.preventDefault()))};function yt(o,d){ke[o?"unshift":"push"](()=>{I[d]=o,t(16,I),t(15,b),t(0,l),t(42,Q),t(43,ue),t(14,h)})}const Bt=o=>i.indexOf(o),Et=o=>i.indexOf(o),At=o=>Oe(o),Mt=o=>Ne(o),Lt=o=>Pe(o);function Nt(o){ke[o?"unshift":"push"](()=>{O=o,t(17,O)})}function Pt(){q=this.value,t(25,q),t(0,l),t(42,Q),t(43,ue),t(14,h),t(15,b)}const Rt=o=>{be(o,0)},qt=o=>be(o,0),Ht=o=>{o.key==="Escape"&&R?(t(18,R=!1),t(20,y=0),o.preventDefault()):R&&(o.key==="ArrowDown"?(t(20,y=Math.min(y+1,G.length-1)),o.preventDefault()):o.key==="ArrowUp"?(t(20,y=Math.max(y-1,0)),o.preventDefault()):o.key==="Enter"&&(G[y]&&Te(),o.preventDefault()))};function Jt(o){ke[o?"unshift":"push"](()=>{W=o,t(22,W)})}const jt=o=>i.indexOf(o),zt=o=>i.indexOf(o),Ut=o=>Oe(o);return n.$$set=o=>{"speakers"in o&&t(1,s=o.speakers),"tags"in o&&t(2,i=o.tags),"value"in o&&t(0,l=o.value),"value_is_output"in o&&t(40,r=o.value_is_output),"placeholder"in o&&t(3,a=o.placeholder),"label"in o&&t(4,u=o.label),"info"in o&&t(5,_=o.info),"disabled"in o&&t(6,f=o.disabled),"show_label"in o&&t(7,g=o.show_label),"container"in o&&t(8,m=o.container),"max_lines"in o&&t(9,v=o.max_lines),"show_copy_button"in o&&t(10,j=o.show_copy_button),"show_submit_button"in o&&t(11,M=o.show_submit_button),"color_map"in o&&t(41,K=o.color_map),"ui_mode"in o&&t(12,w=o.ui_mode),"server"in o&&t(13,S=o.server)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&(K?t(29,me={...K}):(t(29,me={}),s.forEach((o,d)=>{const E=Le[d%Le.length];t(29,me[o]=ft[E],me)}))),n.$$.dirty[0]&49153|n.$$.dirty[1]&6144&&JSON.stringify(l)!==Q&&(l==null&&t(15,b=[]),t(42,Q=JSON.stringify(l)),typeof l=="string"?t(25,q=l):typeof l=="object"&&Array.isArray(l)&&(t(15,b=[...l]),(!ue||h)&&pe(b).then(o=>{t(25,q=o)})),t(43,ue=!1),ct()),n.$$.dirty[0]&98304&&(b.length>I.length?t(16,I=[...I,...Array(b.length-I.length).fill(null)]):b.length<I.length&&t(16,I=I.slice(0,b.length)),he().then(()=>{I.forEach(o=>{o&&o instanceof HTMLTextAreaElement&&(o.style.height="auto",o.style.height=o.scrollHeight+"px")})})),n.$$.dirty[0]&32768&&ht(b)},[l,s,i,a,u,_,f,g,m,v,j,M,w,S,h,b,I,O,R,z,y,G,W,_e,D,q,B,L,c,me,Ne,Pe,Ce,be,Te,Oe,_t,pe,dt,mt,r,K,Q,ue,bt,pt,wt,kt,vt,Ct,St,It,Dt,Tt,Ot,yt,Bt,Et,At,Mt,Lt,Nt,Pt,Rt,qt,Ht,Jt,jt,zt,Ut]}class En extends hn{constructor(e){super(),gn(this,e,Bn,On,mn,{speakers:1,tags:2,value:0,value_is_output:40,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:41,ui_mode:12,server:13},null,[-1,-1,-1])}get speakers(){return this.$$.ctx[1]}set speakers(e){this.$$set({speakers:e}),U()}get tags(){return this.$$.ctx[2]}set tags(e){this.$$set({tags:e}),U()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),U()}get value_is_output(){return this.$$.ctx[40]}set value_is_output(e){this.$$set({value_is_output:e}),U()}get placeholder(){return this.$$.ctx[3]}set placeholder(e){this.$$set({placeholder:e}),U()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),U()}get info(){return this.$$.ctx[5]}set info(e){this.$$set({info:e}),U()}get disabled(){return this.$$.ctx[6]}set disabled(e){this.$$set({disabled:e}),U()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),U()}get container(){return this.$$.ctx[8]}set container(e){this.$$set({container:e}),U()}get max_lines(){return this.$$.ctx[9]}set max_lines(e){this.$$set({max_lines:e}),U()}get show_copy_button(){return this.$$.ctx[10]}set show_copy_button(e){this.$$set({show_copy_button:e}),U()}get show_submit_button(){return this.$$.ctx[11]}set show_submit_button(e){this.$$set({show_submit_button:e}),U()}get color_map(){return this.$$.ctx[41]}set color_map(e){this.$$set({color_map:e}),U()}get ui_mode(){return this.$$.ctx[12]}set ui_mode(e){this.$$set({ui_mode:e}),U()}get server(){return this.$$.ctx[13]}set server(e){this.$$set({server:e}),U()}}const{SvelteComponent:An,add_flush_callback:nt,assign:Mn,bind:st,binding_callbacks:lt,check_outros:Ln,create_component:Ee,destroy_component:Ae,detach:Nn,flush:A,get_spread_object:Pn,get_spread_update:Rn,group_outros:qn,init:Hn,insert:Jn,mount_component:Me,safe_not_equal:jn,space:zn,transition_in:de,transition_out:ve}=window.__gradio__svelte__internal;function it(n){let e,t;const s=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let i={};for(let l=0;l<s.length;l+=1)i=Mn(i,s[l]);return e=new Yt({props:i}),e.$on("clear_status",n[22]),{c(){Ee(e.$$.fragment)},m(l,r){Me(e,l,r),t=!0},p(l,r){const a=r[0]&262148?Rn(s,[r[0]&4&&{autoscroll:l[2].autoscroll},r[0]&4&&{i18n:l[2].i18n},r[0]&262144&&Pn(l[18])]):{};e.$set(a)},i(l){t||(de(e.$$.fragment,l),t=!0)},o(l){ve(e.$$.fragment,l),t=!1},d(l){Ae(e,l)}}}function Un(n){let e,t,s,i,l,r=n[18]&&it(n);function a(f){n[23](f)}function u(f){n[24](f)}let _={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],ui_mode:n[21],disabled:!n[19]};return n[0]!==void 0&&(_.value=n[0]),n[1]!==void 0&&(_.value_is_output=n[1]),t=new En({props:_}),lt.push(()=>st(t,"value",a)),lt.push(()=>st(t,"value_is_output",u)),t.$on("change",n[25]),t.$on("input",n[26]),t.$on("submit",n[27]),t.$on("blur",n[28]),t.$on("select",n[29]),t.$on("focus",n[30]),t.$on("copy",n[31]),{c(){r&&r.c(),e=zn(),Ee(t.$$.fragment)},m(f,g){r&&r.m(f,g),Jn(f,e,g),Me(t,f,g),l=!0},p(f,g){f[18]?r?(r.p(f,g),g[0]&262144&&de(r,1)):(r=it(f),r.c(),de(r,1),r.m(e.parentNode,e)):r&&(qn(),ve(r,1,1,()=>{r=null}),Ln());const m={};g[0]&16&&(m.label=f[4]),g[0]&128&&(m.info=f[7]),g[0]&4096&&(m.show_label=f[12]),g[0]&8192&&(m.max_lines=f[13]),g[0]&131072&&(m.show_copy_button=f[17]),g[0]&16384&&(m.container=f[14]),g[0]&32&&(m.speakers=f[5]),g[0]&64&&(m.tags=f[6]),g[0]&256&&(m.placeholder=f[8]),g[0]&1048576&&(m.show_submit_button=f[20]),g[0]&8&&(m.server=f[3]),g[0]&2097152&&(m.ui_mode=f[21]),g[0]&524288&&(m.disabled=!f[19]),!s&&g[0]&1&&(s=!0,m.value=f[0],nt(()=>s=!1)),!i&&g[0]&2&&(i=!0,m.value_is_output=f[1],nt(()=>i=!1)),t.$set(m)},i(f){l||(de(r),de(t.$$.fragment,f),l=!0)},o(f){ve(r),ve(t.$$.fragment,f),l=!1},d(f){f&&Nn(e),r&&r.d(f),Ae(t,f)}}}function Wn(n){let e,t;return e=new Xt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[Un]},$$scope:{ctx:n}}}),{c(){Ee(e.$$.fragment)},m(s,i){Me(e,s,i),t=!0},p(s,i){const l={};i[0]&2048&&(l.visible=s[11]),i[0]&512&&(l.elem_id=s[9]),i[0]&1024&&(l.elem_classes=s[10]),i[0]&32768&&(l.scale=s[15]),i[0]&65536&&(l.min_width=s[16]),i[0]&16384&&(l.padding=s[14]),i[0]&4092415|i[1]&2&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){ve(e.$$.fragment,s),t=!1},d(s){Ae(e,s)}}}function Fn(n,e,t){let{gradio:s}=e,{server:i}=e,{label:l="Dialogue"}=e,{speakers:r=[]}=e,{tags:a=[]}=e,{info:u=void 0}=e,{placeholder:_=void 0}=e,{elem_id:f=""}=e,{elem_classes:g=[]}=e,{visible:m=!0}=e,{value:v=[]}=e,{show_label:j}=e,{max_lines:M=void 0}=e,{container:K=!0}=e,{scale:w=null}=e,{min_width:h=void 0}=e,{show_copy_button:S=!1}=e,{loading_status:b=void 0}=e,{value_is_output:O=!1}=e,{interactive:R}=e,{show_submit_button:z=!0}=e,{ui_mode:y="both"}=e;const G=()=>s.dispatch("clear_status",b);function I(c){v=c,t(0,v)}function W(c){O=c,t(1,O)}const Q=()=>s.dispatch("change",v),_e=()=>s.dispatch("input"),D=()=>s.dispatch("submit"),T=()=>s.dispatch("blur"),q=c=>s.dispatch("select",c.detail),B=()=>s.dispatch("focus"),L=c=>s.dispatch("copy",c.detail);return n.$$set=c=>{"gradio"in c&&t(2,s=c.gradio),"server"in c&&t(3,i=c.server),"label"in c&&t(4,l=c.label),"speakers"in c&&t(5,r=c.speakers),"tags"in c&&t(6,a=c.tags),"info"in c&&t(7,u=c.info),"placeholder"in c&&t(8,_=c.placeholder),"elem_id"in c&&t(9,f=c.elem_id),"elem_classes"in c&&t(10,g=c.elem_classes),"visible"in c&&t(11,m=c.visible),"value"in c&&t(0,v=c.value),"show_label"in c&&t(12,j=c.show_label),"max_lines"in c&&t(13,M=c.max_lines),"container"in c&&t(14,K=c.container),"scale"in c&&t(15,w=c.scale),"min_width"in c&&t(16,h=c.min_width),"show_copy_button"in c&&t(17,S=c.show_copy_button),"loading_status"in c&&t(18,b=c.loading_status),"value_is_output"in c&&t(1,O=c.value_is_output),"interactive"in c&&t(19,R=c.interactive),"show_submit_button"in c&&t(20,z=c.show_submit_button),"ui_mode"in c&&t(21,y=c.ui_mode)},[v,O,s,i,l,r,a,u,_,f,g,m,j,M,K,w,h,S,b,R,z,y,G,I,W,Q,_e,D,T,q,B,L]}class es extends An{constructor(e){super(),Hn(this,e,Fn,Wn,jn,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20,ui_mode:21},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),A()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),A()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),A()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),A()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),A()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),A()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),A()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),A()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),A()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),A()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),A()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),A()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),A()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),A()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),A()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),A()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(e){this.$$set({show_copy_button:e}),A()}get loading_status(){return this.$$.ctx[18]}set loading_status(e){this.$$set({loading_status:e}),A()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),A()}get interactive(){return this.$$.ctx[19]}set interactive(e){this.$$set({interactive:e}),A()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(e){this.$$set({show_submit_button:e}),A()}get ui_mode(){return this.$$.ctx[21]}set ui_mode(e){this.$$set({ui_mode:e}),A()}}export{En as BaseDialogue,ss as BaseExample,es as default};
//# sourceMappingURL=Index-Bku516Ls.js.map
